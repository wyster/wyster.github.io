

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Defining Services Dependencies Automatically (Autowiring) &mdash; Symfony Framework Documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/rtd_custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Service Method Calls and Setter Injection" href="calls.html" />
    <link rel="prev" title="How to Create Service Aliases and Mark Services as Private" href="alias_private.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #f0f0f0" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/symfony-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                5.2}
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../quick_tour/index.html">The Quick Tour</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../best_practices.html">The Symfony Framework Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bundles.html">The Bundle System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cache.html">Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console.html">Console Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doctrine.html">Databases and the Doctrine ORM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">How to Deploy a Symfony Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../email.html">Swift Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../event_dispatcher.html">Events and Event Listeners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../forms.html">Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frontend.html">Managing CSS and JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_cache.html">HTTP Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_client.html">HTTP Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lock.html">Dealing with Concurrency with Locks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mailer.html">Sending Emails with Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mercure.html">Pushing Data to Clients Using the Mercure Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../messenger.html">Messenger: Sync &amp; Queued Message Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">Migrating an Existing Application to Symfony</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notifier.html">Creating and Sending Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../profiler.html">Profiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rate_limiter.html">Rate Limiter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../routing.html">Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../session.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setup.html">Installing &amp; Setting up the Symfony Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../serializer.html">How to Use the Serializer</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../service_container.html">Service Container</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../service_container.html#fetching-and-using-services">Fetching and using Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../service_container.html#creating-configuring-services-in-the-container">Creating/Configuring Services in the Container</a></li>
<li class="toctree-l2"><a class="reference internal" href="../service_container.html#injecting-services-config-into-a-service">Injecting Services/Config into a Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../service_container.html#service-parameters">Service Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../service_container.html#choose-a-specific-service">Choose a Specific Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../service_container.html#binding-arguments-by-name-or-type">Binding Arguments by Name or Type</a></li>
<li class="toctree-l2"><a class="reference internal" href="../service_container.html#the-autowire-option">The autowire Option</a></li>
<li class="toctree-l2"><a class="reference internal" href="../service_container.html#the-autoconfigure-option">The autoconfigure Option</a></li>
<li class="toctree-l2"><a class="reference internal" href="../service_container.html#linting-service-definitions">Linting Service Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../service_container.html#public-versus-private-services">Public Versus Private Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../service_container.html#importing-many-services-at-once-with-resource">Importing Many Services at once with resource</a></li>
<li class="toctree-l2"><a class="reference internal" href="../service_container.html#explicitly-configuring-services-and-arguments">Explicitly Configuring Services and Arguments</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../service_container.html#learn-more">Learn more</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="alias_private.html">How to Create Service Aliases and Mark Services as Private</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Defining Services Dependencies Automatically (Autowiring)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#an-autowiring-example">An Autowiring Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#autowiring-logic-explained">Autowiring Logic Explained</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-aliases-to-enable-autowiring">Using Aliases to Enable Autowiring</a></li>
<li class="toctree-l4"><a class="reference internal" href="#working-with-interfaces">Working with Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dealing-with-multiple-implementations-of-the-same-type">Dealing with Multiple Implementations of the Same Type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixing-non-autowireable-arguments">Fixing Non-Autowireable Arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#autowiring-other-methods-e-g-setters-and-public-typed-properties">Autowiring other Methods (e.g. Setters and Public Typed Properties)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#autowiring-controller-action-methods">Autowiring Controller Action Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#performance-consequences">Performance Consequences</a></li>
<li class="toctree-l4"><a class="reference internal" href="#public-and-reusable-bundles">Public and Reusable Bundles</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="calls.html">Service Method Calls and Setter Injection</a></li>
<li class="toctree-l3"><a class="reference internal" href="compiler_passes.html">How to Work with Compiler Passes</a></li>
<li class="toctree-l3"><a class="reference internal" href="configurators.html">How to Configure a Service with a Configurator</a></li>
<li class="toctree-l3"><a class="reference internal" href="debug.html">How to Debug the Service Container &amp; List Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="definitions.html">How to work with Service Definition Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="expression_language.html">How to Inject Values Based on Complex Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="factories.html">Using a Factory to Create Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="import.html">How to Import Configuration Files/Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="injection_types.html">Types of Injection</a></li>
<li class="toctree-l3"><a class="reference internal" href="lazy_services.html">Lazy Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="optional_dependencies.html">How to Make Service Arguments/References Optional</a></li>
<li class="toctree-l3"><a class="reference internal" href="parent_services.html">How to Manage Common Dependencies with Parent Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="request.html">How to Retrieve the Request from the Service Container</a></li>
<li class="toctree-l3"><a class="reference internal" href="service_decoration.html">How to Decorate Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="service_subscribers_locators.html">Service Subscribers &amp; Locators</a></li>
<li class="toctree-l3"><a class="reference internal" href="shared.html">How to Define Non Shared Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="synthetic_services.html">How to Inject Instances into the Container</a></li>
<li class="toctree-l3"><a class="reference internal" href="tags.html">How to Work with Service Tags</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../translation.html">Translations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../validation.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web_link.html">Asset Preloading and Resource Hints with HTTP/2 and WebLink</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">Workflow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../components/index.html">The Components</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference Documents</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../create_framework/index.html">Create your own PHP Framework</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Symfony Framework Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../service_container.html">Service Container</a> &raquo;</li>
        
      <li>Defining Services Dependencies Automatically (Autowiring)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/service_container/autowiring.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="defining-services-dependencies-automatically-autowiring">
<span id="index-0"></span><h1>Defining Services Dependencies Automatically (Autowiring)<a class="headerlink" href="#defining-services-dependencies-automatically-autowiring" title="Permalink to this headline">¶</a></h1>
<p>Autowiring allows you to manage services in the container with minimal
configuration. It reads the type-hints on your constructor (or other methods)
and automatically passes the correct services to each method. Symfony’s
autowiring is designed to be predictable: if it is not absolutely clear which
dependency should be passed, you’ll see an actionable exception.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Thanks to Symfony’s compiled container, there is no runtime overhead for using
autowiring.</p>
</div>
<div class="section" id="an-autowiring-example">
<h2>An Autowiring Example<a class="headerlink" href="#an-autowiring-example" title="Permalink to this headline">¶</a></h2>
<p>Imagine you’re building an API to publish statuses on a Twitter feed, obfuscated
with <a class="reference external" href="https://en.wikipedia.org/wiki/ROT13">ROT13</a>, a fun encoder that shifts all characters 13 letters forward in
the alphabet.</p>
<p>Start by creating a ROT13 transformer class:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Util/Rot13Transformer.php</span>
<span class="k">namespace</span> <span class="nx">App\Util</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Rot13Transformer</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">transform</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$value</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nb">str_rot13</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And now a Twitter client using this transformer:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Service/TwitterClient.php</span>
<span class="k">namespace</span> <span class="nx">App\Service</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Util\Rot13Transformer</span><span class="p">;</span>
<span class="c1">// ...</span>

<span class="k">class</span> <span class="nc">TwitterClient</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$transformer</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">Rot13Transformer</span> <span class="nv">$transformer</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">transformer</span> <span class="o">=</span> <span class="nv">$transformer</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">tweet</span><span class="p">(</span><span class="nx">User</span> <span class="nv">$user</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$key</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$status</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$transformedStatus</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">transformer</span><span class="o">-&gt;</span><span class="na">transform</span><span class="p">(</span><span class="nv">$status</span><span class="p">);</span>

        <span class="c1">// ... connect to Twitter and send the encoded status</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you’re using the <a class="reference internal" href="../service_container.html#service-container-services-load-example"><span class="std std-ref">default services.yaml configuration</span></a>,
<strong>both classes are automatically registered as services and configured to be autowired</strong>.
This means you can use them immediately without <em>any</em> configuration.</p>
<p>However, to understand autowiring better, the following examples explicitly configure
both services:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/services.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">services</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">_defaults</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">autowire</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="l l-Scalar l-Scalar-Plain">autoconfigure</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="c1"># ...</span>

    <span class="l l-Scalar l-Scalar-Plain">App\Service\TwitterClient</span><span class="p p-Indicator">:</span>
        <span class="c1"># redundant thanks to _defaults, but value is overridable on each service</span>
        <span class="l l-Scalar l-Scalar-Plain">autowire</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

    <span class="l l-Scalar l-Scalar-Plain">App\Util\Rot13Transformer</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">autowire</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/services.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services https://symfony.com/schema/dic/services/services-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;services&gt;</span>
        <span class="nt">&lt;defaults</span> <span class="na">autowire=</span><span class="s">&quot;true&quot;</span> <span class="na">autoconfigure=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
        <span class="c">&lt;!-- ... --&gt;</span>

        <span class="c">&lt;!-- autowire is redundant thanks to defaults, but value is overridable on each service --&gt;</span>
        <span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;App\Service\TwitterClient&quot;</span> <span class="na">autowire=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>

        <span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;App\Util\Rot13Transformer&quot;</span> <span class="na">autowire=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/services&gt;</span>
<span class="nt">&lt;/container&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/services.php</span>
<span class="k">return</span> <span class="k">function</span><span class="p">(</span><span class="nx">ContainerConfigurator</span> <span class="nv">$configurator</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$services</span> <span class="o">=</span> <span class="nv">$configurator</span><span class="o">-&gt;</span><span class="na">services</span><span class="p">()</span>
        <span class="o">-&gt;</span><span class="na">defaults</span><span class="p">()</span>
            <span class="o">-&gt;</span><span class="na">autowire</span><span class="p">()</span>
            <span class="o">-&gt;</span><span class="na">autoconfigure</span><span class="p">()</span>
    <span class="p">;</span>

    <span class="nv">$services</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nx">TwitterClient</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
        <span class="c1">// redundant thanks to defaults, but value is overridable on each service</span>
        <span class="o">-&gt;</span><span class="na">autowire</span><span class="p">();</span>

    <span class="nv">$services</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nx">Rot13Transformer</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">autowire</span><span class="p">();</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>Now, you can use the <code class="docutils literal notranslate"><span class="pre">TwitterClient</span></code> service immediately in a controller:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/DefaultController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Service\TwitterClient</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">DefaultController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/tweet&quot;, methods={&quot;POST&quot;})</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">tweet</span><span class="p">(</span><span class="nx">TwitterClient</span> <span class="nv">$twitterClient</span><span class="p">,</span> <span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span><span class="o">:</span> <span class="nx">Response</span>
    <span class="p">{</span>
        <span class="c1">// fetch $user, $key, $status from the POST&#39;ed data</span>

        <span class="nv">$twitterClient</span><span class="o">-&gt;</span><span class="na">tweet</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$key</span><span class="p">,</span> <span class="nv">$status</span><span class="p">);</span>

        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This works automatically! The container knows to pass the <code class="docutils literal notranslate"><span class="pre">Rot13Transformer</span></code> service
as the first argument when creating the <code class="docutils literal notranslate"><span class="pre">TwitterClient</span></code> service.</p>
</div>
<div class="section" id="autowiring-logic-explained">
<span id="id1"></span><h2>Autowiring Logic Explained<a class="headerlink" href="#autowiring-logic-explained" title="Permalink to this headline">¶</a></h2>
<p>Autowiring works by reading the <code class="docutils literal notranslate"><span class="pre">Rot13Transformer</span></code> <em>type-hint</em> in <code class="docutils literal notranslate"><span class="pre">TwitterClient</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Service/TwitterClient.php</span>
<span class="k">namespace</span> <span class="nx">App\Service</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">App\Util\Rot13Transformer</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">TwitterClient</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">Rot13Transformer</span> <span class="nv">$transformer</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">transformer</span> <span class="o">=</span> <span class="nv">$transformer</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The autowiring system <strong>looks for a service whose id exactly matches the type-hint</strong>:
so <code class="docutils literal notranslate"><span class="pre">App\Util\Rot13Transformer</span></code>. In this case, that exists! When you configured
the <code class="docutils literal notranslate"><span class="pre">Rot13Transformer</span></code> service, you used its fully-qualified class name as its
id. Autowiring isn’t magic: it looks for a service whose id matches the type-hint.
If you <a class="reference internal" href="../service_container.html#service-container-services-load-example"><span class="std std-ref">load services automatically</span></a>,
each service’s id is its class name.</p>
<p>If there is <em>not</em> a service whose id exactly matches the type, a clear exception
will be thrown.</p>
<p>Autowiring is a great way to automate configuration, and Symfony tries to be as
<em>predictable</em> and clear as possible.</p>
</div>
<div class="section" id="using-aliases-to-enable-autowiring">
<span id="service-autowiring-alias"></span><h2>Using Aliases to Enable Autowiring<a class="headerlink" href="#using-aliases-to-enable-autowiring" title="Permalink to this headline">¶</a></h2>
<p>The main way to configure autowiring is to create a service whose id exactly matches
its class. In the previous example, the service’s id is <code class="docutils literal notranslate"><span class="pre">App\Util\Rot13Transformer</span></code>,
which allows us to autowire this type automatically.</p>
<p>This can also be accomplished using an <a class="reference internal" href="alias_private.html#services-alias"><span class="std std-ref">alias</span></a>. Suppose that
for some reason, the id of the service was instead <code class="docutils literal notranslate"><span class="pre">app.rot13.transformer</span></code>. In
this case, any arguments type-hinted with the class name (<code class="docutils literal notranslate"><span class="pre">App\Util\Rot13Transformer</span></code>)
can no longer be autowired.</p>
<p>No problem! To fix this, you can <em>create</em> a service whose id matches the class by
adding a service alias:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/services.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">services</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>

    <span class="c1"># the id is not a class, so it won&#39;t be used for autowiring</span>
    <span class="l l-Scalar l-Scalar-Plain">app.rot13.transformer</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">class</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Util\Rot13Transformer</span>
        <span class="c1"># ...</span>

    <span class="c1"># but this fixes it!</span>
    <span class="c1"># the ``app.rot13.transformer`` service will be injected when</span>
    <span class="c1"># an ``App\Util\Rot13Transformer`` type-hint is detected</span>
    <span class="l l-Scalar l-Scalar-Plain">App\Util\Rot13Transformer</span><span class="p p-Indicator">:</span> <span class="s">&#39;@app.rot13.transformer&#39;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/services.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services https://symfony.com/schema/dic/services/services-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;services&gt;</span>
        <span class="c">&lt;!-- ... --&gt;</span>

        <span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;app.rot13.transformer&quot;</span> <span class="na">class=</span><span class="s">&quot;App\Util\Rot13Transformer&quot;</span> <span class="na">autowire=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;App\Util\Rot13Transformer&quot;</span> <span class="na">alias=</span><span class="s">&quot;app.rot13.transformer&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/services&gt;</span>
<span class="nt">&lt;/container&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/services.php</span>
<span class="k">namespace</span> <span class="nx">Symfony\Component\DependencyInjection\Loader\Configurator</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Util\Rot13Transformer</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span><span class="p">(</span><span class="nx">ContainerConfigurator</span> <span class="nv">$configurator</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="c1">// the id is not a class, so it won&#39;t be used for autowiring</span>
    <span class="nv">$services</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;app.rot13.transformer&#39;</span><span class="p">,</span> <span class="nx">Rot13Transformer</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">autowire</span><span class="p">();</span>

    <span class="c1">// but this fixes it!</span>
    <span class="c1">// the ``app.rot13.transformer`` service will be injected when</span>
    <span class="c1">// an ``App\Util\Rot13Transformer`` type-hint is detected</span>
    <span class="nv">$services</span><span class="o">-&gt;</span><span class="na">alias</span><span class="p">(</span><span class="nx">Rot13Transformer</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;app.rot13.transformer&#39;</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>This creates a service “alias”, whose id is <code class="docutils literal notranslate"><span class="pre">App\Util\Rot13Transformer</span></code>.
Thanks to this, autowiring sees this and uses it whenever the <code class="docutils literal notranslate"><span class="pre">Rot13Transformer</span></code>
class is type-hinted.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Aliases are used by the core bundles to allow services to be autowired. For
example, MonologBundle creates a service whose id is <code class="docutils literal notranslate"><span class="pre">logger</span></code>. But it also
adds an alias: <code class="docutils literal notranslate"><span class="pre">Psr\Log\LoggerInterface</span></code> that points to the <code class="docutils literal notranslate"><span class="pre">logger</span></code> service.
This is why arguments type-hinted with <code class="docutils literal notranslate"><span class="pre">Psr\Log\LoggerInterface</span></code> can be autowired.</p>
</div>
</div>
<div class="section" id="working-with-interfaces">
<span id="autowiring-interface-alias"></span><h2>Working with Interfaces<a class="headerlink" href="#working-with-interfaces" title="Permalink to this headline">¶</a></h2>
<p>You might also find yourself type-hinting abstractions (e.g. interfaces) instead
of concrete classes as it replaces your dependencies with other objects.</p>
<p>To follow this best practice, suppose you decide to create a <code class="docutils literal notranslate"><span class="pre">TransformerInterface</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Util/TransformerInterface.php</span>
<span class="k">namespace</span> <span class="nx">App\Util</span><span class="p">;</span>

<span class="k">interface</span> <span class="nx">TransformerInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">transform</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$value</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then, you update <code class="docutils literal notranslate"><span class="pre">Rot13Transformer</span></code> to implement it:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Rot13Transformer</span> <span class="k">implements</span> <span class="nx">TransformerInterface</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now that you have an interface, you should use this as your type-hint:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TwitterClient</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">TransformerInterface</span> <span class="nv">$transformer</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>But now, the type-hint (<code class="docutils literal notranslate"><span class="pre">App\Util\TransformerInterface</span></code>) no longer matches
the id of the service (<code class="docutils literal notranslate"><span class="pre">App\Util\Rot13Transformer</span></code>). This means that the
argument can no longer be autowired.</p>
<p>To fix that, add an <a class="reference internal" href="#service-autowiring-alias"><span class="std std-ref">alias</span></a>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/services.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">services</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>

    <span class="l l-Scalar l-Scalar-Plain">App\Util\Rot13Transformer</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>

    <span class="c1"># the ``App\Util\Rot13Transformer`` service will be injected when</span>
    <span class="c1"># an ``App\Util\TransformerInterface`` type-hint is detected</span>
    <span class="l l-Scalar l-Scalar-Plain">App\Util\TransformerInterface</span><span class="p p-Indicator">:</span> <span class="s">&#39;@App\Util\Rot13Transformer&#39;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/services.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services https://symfony.com/schema/dic/services/services-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;services&gt;</span>
        <span class="c">&lt;!-- ... --&gt;</span>
        <span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;App\Util\Rot13Transformer&quot;</span><span class="nt">/&gt;</span>

        <span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;App\Util\TransformerInterface&quot;</span> <span class="na">alias=</span><span class="s">&quot;App\Util\Rot13Transformer&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/services&gt;</span>
<span class="nt">&lt;/container&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/services.php</span>
<span class="k">namespace</span> <span class="nx">Symfony\Component\DependencyInjection\Loader\Configurator</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Util\Rot13Transformer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Util\TransformerInterface</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span><span class="p">(</span><span class="nx">ContainerConfigurator</span> <span class="nv">$configurator</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="nv">$services</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nx">Rot13Transformer</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>

    <span class="c1">// the ``App\Util\Rot13Transformer`` service will be injected when</span>
    <span class="c1">// an ``App\Util\TransformerInterface`` type-hint is detected</span>
    <span class="nv">$services</span><span class="o">-&gt;</span><span class="na">alias</span><span class="p">(</span><span class="nx">TransformerInterface</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="nx">Rot13Transformer</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>Thanks to the <code class="docutils literal notranslate"><span class="pre">App\Util\TransformerInterface</span></code> alias, the autowiring subsystem
knows that the <code class="docutils literal notranslate"><span class="pre">App\Util\Rot13Transformer</span></code> service should be injected when
dealing with the <code class="docutils literal notranslate"><span class="pre">TransformerInterface</span></code>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">When using a <a class="reference external" href="https://symfony.com/blog/new-in-symfony-3-3-psr-4-based-service-discovery">service definition prototype</a>, if only one service is
discovered that implements an interface, and that interface is also
discovered in the same file, configuring the alias is not mandatory
and Symfony will automatically create one.</p>
</div>
</div>
<div class="section" id="dealing-with-multiple-implementations-of-the-same-type">
<h2>Dealing with Multiple Implementations of the Same Type<a class="headerlink" href="#dealing-with-multiple-implementations-of-the-same-type" title="Permalink to this headline">¶</a></h2>
<p>Suppose you create a second class - <code class="docutils literal notranslate"><span class="pre">UppercaseTransformer</span></code> that implements
<code class="docutils literal notranslate"><span class="pre">TransformerInterface</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Util/UppercaseTransformer.php</span>
<span class="k">namespace</span> <span class="nx">App\Util</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">UppercaseTransformer</span> <span class="k">implements</span> <span class="nx">TransformerInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">transform</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$value</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you register this as a service, you now have <em>two</em> services that implement the
<code class="docutils literal notranslate"><span class="pre">App\Util\TransformerInterface</span></code> type. Autowiring subsystem can not decide
which one to use. Remember, autowiring isn’t magic; it looks for a service
whose id matches the type-hint. So you need to choose one by creating an alias
from the type to the correct service id (see <a class="reference internal" href="#autowiring-interface-alias"><span class="std std-ref">Working with Interfaces</span></a>).
Additionally, you can define several named autowiring aliases if you want to use
one implementation in some cases, and another implementation in some
other cases.</p>
<p>For instance, you may want to use the <code class="docutils literal notranslate"><span class="pre">Rot13Transformer</span></code>
implementation by default when the <code class="docutils literal notranslate"><span class="pre">TransformerInterface</span></code> interface is
type hinted, but use the <code class="docutils literal notranslate"><span class="pre">UppercaseTransformer</span></code> implementation in some
specific cases. To do so, you can create a normal alias from the
<code class="docutils literal notranslate"><span class="pre">TransformerInterface</span></code> interface to <code class="docutils literal notranslate"><span class="pre">Rot13Transformer</span></code>, and then
create a <em>named autowiring alias</em> from a special string containing the
interface followed by a variable name matching the one you use when doing
the injection:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Service/MastodonClient.php</span>
<span class="k">namespace</span> <span class="nx">App\Service</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Util\TransformerInterface</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MastodonClient</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$transformer</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">TransformerInterface</span> <span class="nv">$shoutyTransformer</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">transformer</span> <span class="o">=</span> <span class="nv">$shoutyTransformer</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">toot</span><span class="p">(</span><span class="nx">User</span> <span class="nv">$user</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$key</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$status</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$transformedStatus</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">transformer</span><span class="o">-&gt;</span><span class="na">transform</span><span class="p">(</span><span class="nv">$status</span><span class="p">);</span>

        <span class="c1">// ... connect to Mastodon and send the transformed status</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/services.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">services</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>

    <span class="l l-Scalar l-Scalar-Plain">App\Util\Rot13Transformer</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>
    <span class="l l-Scalar l-Scalar-Plain">App\Util\UppercaseTransformer</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>

    <span class="c1"># the ``App\Util\UppercaseTransformer`` service will be</span>
    <span class="c1"># injected when an ``App\Util\TransformerInterface``</span>
    <span class="c1"># type-hint for a ``$shoutyTransformer`` argument is detected.</span>
    <span class="l l-Scalar l-Scalar-Plain">App\Util\TransformerInterface $shoutyTransformer</span><span class="p p-Indicator">:</span> <span class="s">&#39;@App\Util\UppercaseTransformer&#39;</span>

    <span class="c1"># If the argument used for injection does not match, but the</span>
    <span class="c1"># type-hint still matches, the ``App\Util\Rot13Transformer``</span>
    <span class="c1"># service will be injected.</span>
    <span class="l l-Scalar l-Scalar-Plain">App\Util\TransformerInterface</span><span class="p p-Indicator">:</span> <span class="s">&#39;@App\Util\Rot13Transformer&#39;</span>

    <span class="l l-Scalar l-Scalar-Plain">App\Service\TwitterClient</span><span class="p p-Indicator">:</span>
        <span class="c1"># the Rot13Transformer will be passed as the $transformer argument</span>
        <span class="l l-Scalar l-Scalar-Plain">autowire</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

        <span class="c1"># If you wanted to choose the non-default service and do not</span>
        <span class="c1"># want to use a named autowiring alias, wire it manually:</span>
        <span class="c1">#     $transformer: &#39;@App\Util\UppercaseTransformer&#39;</span>
        <span class="c1"># ...</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/services.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services https://symfony.com/schema/dic/services/services-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;services&gt;</span>
        <span class="c">&lt;!-- ... --&gt;</span>
        <span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;App\Util\Rot13Transformer&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;App\Util\UppercaseTransformer&quot;</span><span class="nt">/&gt;</span>

        <span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;App\Util\TransformerInterface&quot;</span> <span class="na">alias=</span><span class="s">&quot;App\Util\Rot13Transformer&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;service</span>
            <span class="na">id=</span><span class="s">&quot;App\Util\TransformerInterface $shoutyTransformer&quot;</span>
            <span class="na">alias=</span><span class="s">&quot;App\Util\UppercaseTransformer&quot;</span><span class="nt">/&gt;</span>

        <span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;App\Service\TwitterClient&quot;</span> <span class="na">autowire=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
            <span class="c">&lt;!-- &lt;argument key=&quot;$transformer&quot; type=&quot;service&quot; id=&quot;App\Util\UppercaseTransformer&quot;/&gt; --&gt;</span>
        <span class="nt">&lt;/service&gt;</span>
    <span class="nt">&lt;/services&gt;</span>
<span class="nt">&lt;/container&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/services.php</span>
<span class="k">namespace</span> <span class="nx">Symfony\Component\DependencyInjection\Loader\Configurator</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Service\MastodonClient</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Service\TwitterClient</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Util\Rot13Transformer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Util\TransformerInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Util\UppercaseTransformer</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span><span class="p">(</span><span class="nx">ContainerConfigurator</span> <span class="nv">$configurator</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="nv">$services</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nx">Rot13Transformer</span><span class="o">::</span><span class="na">class</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">autowire</span><span class="p">();</span>
    <span class="nv">$services</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nx">UppercaseTransformer</span><span class="o">::</span><span class="na">class</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">autowire</span><span class="p">();</span>

    <span class="c1">// the ``App\Util\UppercaseTransformer`` service will be</span>
    <span class="c1">// injected when an ``App\Util\TransformerInterface``</span>
    <span class="c1">// type-hint for a ``$shoutyTransformer`` argument is detected.</span>
    <span class="nv">$services</span><span class="o">-&gt;</span><span class="na">alias</span><span class="p">(</span><span class="nx">TransformerInterface</span><span class="o">::</span><span class="na">class</span><span class="o">.</span><span class="s1">&#39; $shoutyTransformer&#39;</span><span class="p">,</span> <span class="nx">UppercaseTransformer</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>

    <span class="c1">// If the argument used for injection does not match, but the</span>
    <span class="c1">// type-hint still matches, the ``App\Util\Rot13Transformer``</span>
    <span class="c1">// service will be injected.</span>
    <span class="nv">$services</span><span class="o">-&gt;</span><span class="na">alias</span><span class="p">(</span><span class="nx">TransformerInterface</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="nx">Rot13Transformer</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>

    <span class="nv">$services</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nx">TwitterClient</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
        <span class="c1">// the Rot13Transformer will be passed as the $transformer argument</span>
        <span class="o">-&gt;</span><span class="na">autowire</span><span class="p">()</span>

        <span class="c1">// If you wanted to choose the non-default service and do not</span>
        <span class="c1">// want to use a named autowiring alias, wire it manually:</span>
        <span class="c1">//     -&gt;arg(&#39;$transformer&#39;, service(UppercaseTransformer::class))</span>
        <span class="c1">// ...</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>Thanks to the <code class="docutils literal notranslate"><span class="pre">App\Util\TransformerInterface</span></code> alias, any argument type-hinted
with this interface will be passed the <code class="docutils literal notranslate"><span class="pre">App\Util\Rot13Transformer</span></code> service.
If the argument is named <code class="docutils literal notranslate"><span class="pre">$shoutyTransformer</span></code>,
<code class="docutils literal notranslate"><span class="pre">App\Util\UppercaseTransformer</span></code> will be used instead.
But, you can also manually wire any <em>other</em> service by specifying the argument
under the arguments key.</p>
</div>
<div class="section" id="fixing-non-autowireable-arguments">
<h2>Fixing Non-Autowireable Arguments<a class="headerlink" href="#fixing-non-autowireable-arguments" title="Permalink to this headline">¶</a></h2>
<p>Autowiring only works when your argument is an <em>object</em>. But if you have a scalar
argument (e.g. a string), this cannot be autowired: Symfony will throw a clear
exception.</p>
<p>To fix this, you can <a class="reference internal" href="../service_container.html#services-manually-wire-args"><span class="std std-ref">manually wire the problematic argument</span></a>.
You wire up the difficult arguments, Symfony takes care of the rest.</p>
</div>
<div class="section" id="autowiring-other-methods-e-g-setters-and-public-typed-properties">
<span id="autowiring-calls"></span><h2>Autowiring other Methods (e.g. Setters and Public Typed Properties)<a class="headerlink" href="#autowiring-other-methods-e-g-setters-and-public-typed-properties" title="Permalink to this headline">¶</a></h2>
<p>When autowiring is enabled for a service, you can <em>also</em> configure the container
to call methods on your class when it’s instantiated. For example, suppose you want
to inject the <code class="docutils literal notranslate"><span class="pre">logger</span></code> service, and decide to use setter-injection:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Util/Rot13Transformer.php</span>
<span class="k">namespace</span> <span class="nx">App\Util</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Rot13Transformer</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$logger</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @required</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setLogger</span><span class="p">(</span><span class="nx">LoggerInterface</span> <span class="nv">$logger</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">logger</span> <span class="o">=</span> <span class="nv">$logger</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">transform</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Transforming &#39;</span><span class="o">.</span><span class="nv">$value</span><span class="p">);</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>Attributes</em><div class="highlight-php-attributes notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Util/Rot13Transformer.php</span>
<span class="k">namespace</span> <span class="nx">App\Util</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Contracts\Service\Attribute\Required</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Rot13Transformer</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$logger</span><span class="p">;</span>

    <span class="c1">#[Required]</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setLogger</span><span class="p">(</span><span class="nx">LoggerInterface</span> <span class="nv">$logger</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">logger</span> <span class="o">=</span> <span class="nv">$logger</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">transform</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Transforming &#39;</span><span class="o">.</span><span class="nv">$value</span><span class="p">);</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>Autowiring will automatically call <em>any</em> method with the <code class="docutils literal notranslate"><span class="pre">#[Required]</span></code> attribute
above it, autowiring each argument. If you need to manually wire some of the arguments
to a method, you can always explicitly <a class="reference internal" href="calls.html"><span class="doc">configure the method call</span></a>.</p>
<p>If your PHP version doesn’t support attributes (they were introduced in PHP 8),
you can use the <code class="docutils literal notranslate"><span class="pre">&#64;required</span></code> annotation instead.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 5.2: </span>The <code class="docutils literal notranslate"><span class="pre">#[Required]</span></code> attribute was introduced in Symfony 5.2.</p>
</div>
<p>Despite property injection has some <a class="reference internal" href="injection_types.html#property-injection"><span class="std std-ref">drawbacks</span></a>,
autowiring with <code class="docutils literal notranslate"><span class="pre">#[Required]</span></code> or <code class="docutils literal notranslate"><span class="pre">&#64;required</span></code> can also be applied to public
typed properties:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Util</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Rot13Transformer</span>
<span class="p">{</span>
    <span class="sd">/** @required */</span>
    <span class="k">public</span> <span class="nx">LoggerInterface</span> <span class="nv">$logger</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">transform</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Transforming &#39;</span><span class="o">.</span><span class="nv">$value</span><span class="p">);</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>Attributes</em><div class="highlight-php-attributes notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Util</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Contracts\Service\Attribute\Required</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Rot13Transformer</span>
<span class="p">{</span>
    <span class="c1">#[Required]</span>
    <span class="k">public</span> <span class="nx">LoggerInterface</span> <span class="nv">$logger</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">transform</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Transforming &#39;</span><span class="o">.</span><span class="nv">$value</span><span class="p">);</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 5.1: </span>Public typed properties autowiring was introduced in Symfony 5.1.</p>
</div>
</div>
<div class="section" id="autowiring-controller-action-methods">
<h2>Autowiring Controller Action Methods<a class="headerlink" href="#autowiring-controller-action-methods" title="Permalink to this headline">¶</a></h2>
<p>If you’re using the Symfony Framework, you can also autowire arguments to your controller
action methods. This is a special case for autowiring, which exists for convenience.
See <a class="reference internal" href="../controller.html#controller-accessing-services"><span class="std std-ref">Fetching Services</span></a> for more details.</p>
</div>
<div class="section" id="performance-consequences">
<h2>Performance Consequences<a class="headerlink" href="#performance-consequences" title="Permalink to this headline">¶</a></h2>
<p>Thanks to Symfony’s compiled container, there is <em>no</em> performance penalty for using
autowiring. However, there is a small performance penalty in the <code class="docutils literal notranslate"><span class="pre">dev</span></code> environment,
as the container may be rebuilt more often as you modify classes. If rebuilding
your container is slow (possible on very large projects), you may not be able to
use autowiring.</p>
</div>
<div class="section" id="public-and-reusable-bundles">
<h2>Public and Reusable Bundles<a class="headerlink" href="#public-and-reusable-bundles" title="Permalink to this headline">¶</a></h2>
<p>Public bundles should explicitly configure their services and not rely on autowiring.
Autowiring depends on the services that are available in the container and bundles have
no control over the service container of applications they are included in. You can use
autowiring when building reusable bundles within your company, as you have full control
over all code.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2004-2020 Fabien Potencier

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>