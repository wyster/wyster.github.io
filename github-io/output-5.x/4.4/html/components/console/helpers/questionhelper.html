

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Question Helper &mdash; Symfony Framework Documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/rtd_custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Table" href="table.html" />
    <link rel="prev" title="Progress Bar" href="progressbar.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #f0f0f0" >
          

          
            <a href="../../../index.html">
          

          
            
            <img src="../../../_static/symfony-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                4.4}
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../quick_tour/index.html">The Quick Tour</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../best_practices.html">The Symfony Framework Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bundles.html">The Bundle System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cache.html">Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../console.html">Console Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doctrine.html">Databases and the Doctrine ORM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../deployment.html">How to Deploy a Symfony Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../email.html">Swift Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../event_dispatcher.html">Events and Event Listeners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../forms.html">Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../frontend.html">Managing CSS and JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../http_cache.html">HTTP Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../http_client.html">HTTP Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../lock.html">Dealing with Concurrency with Locks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mailer.html">Sending Emails with Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mercure.html">Pushing Data to Clients Using the Mercure Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../messenger.html">Messenger: Sync &amp; Queued Message Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../migration.html">Migrating an Existing Application to Symfony</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../performance.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../profiler.html">Profiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../routing.html">Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../session.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../setup.html">Installing &amp; Setting up the Symfony Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../serializer.html">How to Use the Serializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../service_container.html">Service Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../translation.html">Translations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../validation.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../web_link.html">Asset Preloading and Resource Hints with HTTP/2 and WebLink</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../workflow.html">Workflow</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">The Components</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../using_components.html">How to Install and Use the Symfony Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asset.html">The Asset Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../browser_kit.html">The BrowserKit Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cache.html">The Cache Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../config.html">The Config Component</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../console.html">The Console Component</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../console.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../console.html#creating-a-console-application">Creating a Console Application</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../console.html#learn-more">Learn more</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../../console.html">Console Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changing_default_command.html">Changing the Default Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../console_arguments.html">Understanding how Console Arguments and Options Are Handled</a></li>
<li class="toctree-l4"><a class="reference internal" href="../events.html">Using Events</a></li>
<li class="toctree-l4"><a class="reference internal" href="../logger.html">Using the Logger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../single_command_tool.html">Building a single Command Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usage.html">Using Console Commands, Shortcuts and Built-in Commands</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">The Console Helpers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../console/calling_commands.html">How to Call Other Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../console/coloring.html">How to Color and Style the Console Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../console/command_in_controller.html">How to Call a Command from a Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../console/commands_as_services.html">How to Define Commands as Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../console/hide_commands.html">How to Hide Console Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../console/input.html">Console Input (Arguments &amp; Options)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../console/lazy_commands.html">How to Make Commands Lazily Loaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../console/lockable_trait.html">Prevent Running the Same Console Command Multiple Times</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../console/style.html">How to Style a Console Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../console/verbosity.html">Verbosity Levels</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contracts.html">The Contracts Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../css_selector.html">The CssSelector Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dependency_injection.html">The DependencyInjection Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dom_crawler.html">The DomCrawler Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../event_dispatcher.html">The EventDispatcher Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../expression_language.html">The ExpressionLanguage Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../filesystem.html">The Filesystem Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../finder.html">The Finder Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../form.html">The Form Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../http_foundation.html">The HttpFoundation Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../http_kernel.html">The HttpKernel Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../inflector.html">The Inflector Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intl.html">The Intl Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ldap.html">The Ldap Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lock.html">The Lock Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../messenger.html">The Messenger Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mime.html">The Mime Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../options_resolver.html">The OptionsResolver Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../phpunit_bridge.html">The PHPUnit Bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../process.html">The Process Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../property_access.html">The PropertyAccess Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../property_info.html">The PropertyInfo Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../psr7.html">The PSR-7 Bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../security.html">The Security Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../serializer.html">The Serializer Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../validator.html">The Validator Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../var_dumper.html">The VarDumper Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../var_exporter.html">The VarExporter Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../workflow.html">The Workflow Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../yaml.html">The Yaml Component</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">Reference Documents</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/index.html">Contributing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../create_framework/index.html">Create your own PHP Framework</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Symfony Framework Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">The Components</a> &raquo;</li>
        
          <li><a href="../../console.html">The Console Component</a> &raquo;</li>
        
          <li><a href="index.html">The Console Helpers</a> &raquo;</li>
        
      <li>Question Helper</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/components/console/helpers/questionhelper.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="question-helper">
<span id="index-0"></span><h1>Question Helper<a class="headerlink" href="#question-helper" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Helper/QuestionHelper.php" title="Symfony\Component\Console\Helper\QuestionHelper"><span class="pre">QuestionHelper</span></a></code> provides
functions to ask the user for more information. It is included in the default
helper set, which you can get by calling
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Command/Command.php" title="Symfony\Component\Console\Command\Command::getHelperSet()"><span class="pre">getHelperSet()</span></a></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$helper</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getHelper</span><span class="p">(</span><span class="s1">&#39;question&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>The Question Helper has a single method
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Helper/QuestionHelper.php" title="Symfony\Component\Console\Helper\QuestionHelper::ask()"><span class="pre">ask()</span></a></code> that needs an
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Input/InputInterface.php" title="Symfony\Component\Console\Input\InputInterface"><span class="pre">InputInterface</span></a></code> instance as the
first argument, an <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Output/OutputInterface.php" title="Symfony\Component\Console\Output\OutputInterface"><span class="pre">OutputInterface</span></a></code>
instance as the second argument and a
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Question/Question.php" title="Symfony\Component\Console\Question\Question"><span class="pre">Question</span></a></code> as last argument.</p>
<div class="section" id="asking-the-user-for-confirmation">
<h2>Asking the User for Confirmation<a class="headerlink" href="#asking-the-user-for-confirmation" title="Permalink to this headline">¶</a></h2>
<p>Suppose you want to confirm an action before actually executing it. Add
the following to your command:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Command\Command</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Input\InputInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Output\OutputInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Question\ConfirmationQuestion</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">YourCommand</span> <span class="k">extends</span> <span class="nx">Command</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$helper</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getHelper</span><span class="p">(</span><span class="s1">&#39;question&#39;</span><span class="p">);</span>
        <span class="nv">$question</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ConfirmationQuestion</span><span class="p">(</span><span class="s1">&#39;Continue with this action?&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">ask</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$question</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case, the user will be asked “Continue with this action?”. If the user
answers with <code class="docutils literal notranslate"><span class="pre">y</span></code> it returns <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code> if they answer with <code class="docutils literal notranslate"><span class="pre">n</span></code>.
The second argument to
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Question/ConfirmationQuestion.php" title="Symfony\Component\Console\Question\ConfirmationQuestion::__construct()"><span class="pre">__construct()</span></a></code>
is the default value to return if the user doesn’t enter any valid input. If
the second argument is not provided, <code class="docutils literal notranslate"><span class="pre">true</span></code> is assumed.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>You can customize the regex used to check if the answer means “yes” in the
third argument of the constructor. For instance, to allow anything that
starts with either <code class="docutils literal notranslate"><span class="pre">y</span></code> or <code class="docutils literal notranslate"><span class="pre">j</span></code>, you would set it to:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$question</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ConfirmationQuestion</span><span class="p">(</span>
    <span class="s1">&#39;Continue with this action?&#39;</span><span class="p">,</span>
    <span class="k">false</span><span class="p">,</span>
    <span class="s1">&#39;/^(y|j)/i&#39;</span>
<span class="p">);</span>
</pre></div>
</div>
<p class="last">The regex defaults to <code class="docutils literal notranslate"><span class="pre">/^y/i</span></code>.</p>
</div>
</div>
<div class="section" id="asking-the-user-for-information">
<h2>Asking the User for Information<a class="headerlink" href="#asking-the-user-for-information" title="Permalink to this headline">¶</a></h2>
<p>You can also ask a question with more than a simple yes/no answer. For instance,
if you want to know a bundle name, you can add this to your command:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Console\Question\Question</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="nv">$question</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Question</span><span class="p">(</span><span class="s1">&#39;Please enter the name of the bundle&#39;</span><span class="p">,</span> <span class="s1">&#39;AcmeDemoBundle&#39;</span><span class="p">);</span>

    <span class="nv">$bundleName</span> <span class="o">=</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">ask</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$question</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The user will be asked “Please enter the name of the bundle”. They can type
some name which will be returned by the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Helper/QuestionHelper.php" title="Symfony\Component\Console\Helper\QuestionHelper::ask()"><span class="pre">ask()</span></a></code> method.
If they leave it empty, the default value (<code class="docutils literal notranslate"><span class="pre">AcmeDemoBundle</span></code> here) is returned.</p>
<div class="section" id="let-the-user-choose-from-a-list-of-answers">
<h3>Let the User Choose from a List of Answers<a class="headerlink" href="#let-the-user-choose-from-a-list-of-answers" title="Permalink to this headline">¶</a></h3>
<p>If you have a predefined set of answers the user can choose from, you
could use a <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Question/ChoiceQuestion.php" title="Symfony\Component\Console\Question\ChoiceQuestion"><span class="pre">ChoiceQuestion</span></a></code>
which makes sure that the user can only enter a valid string
from a predefined list:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Console\Question\ChoiceQuestion</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="nv">$helper</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getHelper</span><span class="p">(</span><span class="s1">&#39;question&#39;</span><span class="p">);</span>
    <span class="nv">$question</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ChoiceQuestion</span><span class="p">(</span>
        <span class="s1">&#39;Please select your favorite color (defaults to red)&#39;</span><span class="p">,</span>
        <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">],</span>
        <span class="mi">0</span>
    <span class="p">);</span>
    <span class="nv">$question</span><span class="o">-&gt;</span><span class="na">setErrorMessage</span><span class="p">(</span><span class="s1">&#39;Color %s is invalid.&#39;</span><span class="p">);</span>

    <span class="nv">$color</span> <span class="o">=</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">ask</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$question</span><span class="p">);</span>
    <span class="nv">$output</span><span class="o">-&gt;</span><span class="na">writeln</span><span class="p">(</span><span class="s1">&#39;You have just selected: &#39;</span><span class="o">.</span><span class="nv">$color</span><span class="p">);</span>

    <span class="c1">// ... do something with the color</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The option which should be selected by default is provided with the third
argument of the constructor. The default is <code class="docutils literal notranslate"><span class="pre">null</span></code>, which means that no
option is the default one.</p>
<p>If the user enters an invalid string, an error message is shown and the user
is asked to provide the answer another time, until they enter a valid string
or reach the maximum number of attempts. The default value for the maximum number
of attempts is <code class="docutils literal notranslate"><span class="pre">null</span></code>, which means infinite number of attempts. You can define
your own error message using
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Question/ChoiceQuestion.php" title="Symfony\Component\Console\Question\ChoiceQuestion::setErrorMessage()"><span class="pre">setErrorMessage()</span></a></code>.</p>
<div class="section" id="multiple-choices">
<h4>Multiple Choices<a class="headerlink" href="#multiple-choices" title="Permalink to this headline">¶</a></h4>
<p>Sometimes, multiple answers can be given. The <code class="docutils literal notranslate"><span class="pre">ChoiceQuestion</span></code> provides this
feature using comma separated values. This is disabled by default, to enable
this use <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Question/ChoiceQuestion.php" title="Symfony\Component\Console\Question\ChoiceQuestion::setMultiselect()"><span class="pre">setMultiselect()</span></a></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Console\Question\ChoiceQuestion</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="nv">$helper</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getHelper</span><span class="p">(</span><span class="s1">&#39;question&#39;</span><span class="p">);</span>
    <span class="nv">$question</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ChoiceQuestion</span><span class="p">(</span>
        <span class="s1">&#39;Please select your favorite colors (defaults to red and blue)&#39;</span><span class="p">,</span>
        <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">],</span>
        <span class="s1">&#39;0,1&#39;</span>
    <span class="p">);</span>
    <span class="nv">$question</span><span class="o">-&gt;</span><span class="na">setMultiselect</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>

    <span class="nv">$colors</span> <span class="o">=</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">ask</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$question</span><span class="p">);</span>
    <span class="nv">$output</span><span class="o">-&gt;</span><span class="na">writeln</span><span class="p">(</span><span class="s1">&#39;You have just selected: &#39;</span> <span class="o">.</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">,</span> <span class="nv">$colors</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now, when the user enters <code class="docutils literal notranslate"><span class="pre">1,2</span></code>, the result will be:
<code class="docutils literal notranslate"><span class="pre">You</span> <span class="pre">have</span> <span class="pre">just</span> <span class="pre">selected:</span> <span class="pre">blue,</span> <span class="pre">yellow</span></code>.</p>
<p>If the user does not enter anything, the result will be:
<code class="docutils literal notranslate"><span class="pre">You</span> <span class="pre">have</span> <span class="pre">just</span> <span class="pre">selected:</span> <span class="pre">red,</span> <span class="pre">blue</span></code>.</p>
</div>
</div>
<div class="section" id="autocompletion">
<h3>Autocompletion<a class="headerlink" href="#autocompletion" title="Permalink to this headline">¶</a></h3>
<p>You can also specify an array of potential answers for a given question. These
will be autocompleted as the user types:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Console\Question\Question</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="nv">$helper</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getHelper</span><span class="p">(</span><span class="s1">&#39;question&#39;</span><span class="p">);</span>

    <span class="nv">$bundles</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AcmeDemoBundle&#39;</span><span class="p">,</span> <span class="s1">&#39;AcmeBlogBundle&#39;</span><span class="p">,</span> <span class="s1">&#39;AcmeStoreBundle&#39;</span><span class="p">];</span>
    <span class="nv">$question</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Question</span><span class="p">(</span><span class="s1">&#39;Please enter the name of a bundle&#39;</span><span class="p">,</span> <span class="s1">&#39;FooBundle&#39;</span><span class="p">);</span>
    <span class="nv">$question</span><span class="o">-&gt;</span><span class="na">setAutocompleterValues</span><span class="p">(</span><span class="nv">$bundles</span><span class="p">);</span>

    <span class="nv">$bundleName</span> <span class="o">=</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">ask</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$question</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In more complex use cases, it may be necessary to generate suggestions on the
fly, for instance if you wish to autocomplete a file path. In that case, you can
provide a callback function to dynamically generate suggestions:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Console\Question\Question</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$helper</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getHelper</span><span class="p">(</span><span class="s1">&#39;question&#39;</span><span class="p">);</span>

    <span class="c1">// This function is called whenever the input changes and new</span>
    <span class="c1">// suggestions are needed.</span>
    <span class="nv">$callback</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span><span class="nx">string</span> <span class="nv">$userInput</span><span class="p">)</span><span class="o">:</span> <span class="k">array</span> <span class="p">{</span>
        <span class="c1">// Strip any characters from the last slash to the end of the string</span>
        <span class="c1">// to keep only the last directory and generate suggestions for it</span>
        <span class="nv">$inputPath</span> <span class="o">=</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="s1">&#39;%(/|^)[^/]*$%&#39;</span><span class="p">,</span> <span class="s1">&#39;$1&#39;</span><span class="p">,</span> <span class="nv">$userInput</span><span class="p">);</span>
        <span class="nv">$inputPath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="o">===</span> <span class="nv">$inputPath</span> <span class="o">?</span> <span class="s1">&#39;.&#39;</span> <span class="o">:</span> <span class="nv">$inputPath</span><span class="p">;</span>

        <span class="c1">// CAUTION - this example code allows unrestricted access to the</span>
        <span class="c1">// entire filesystem. In real applications, restrict the directories</span>
        <span class="c1">// where files and dirs can be found</span>
        <span class="nv">$foundFilesAndDirs</span> <span class="o">=</span> <span class="o">@</span><span class="nb">scandir</span><span class="p">(</span><span class="nv">$inputPath</span><span class="p">)</span> <span class="o">?:</span> <span class="p">[];</span>

        <span class="k">return</span> <span class="nb">array_map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$dirOrFile</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$inputPath</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$inputPath</span><span class="o">.</span><span class="nv">$dirOrFile</span><span class="p">;</span>
        <span class="p">},</span> <span class="nv">$foundFilesAndDirs</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nv">$question</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Question</span><span class="p">(</span><span class="s1">&#39;Please provide the full path of a file to parse&#39;</span><span class="p">);</span>
    <span class="nv">$question</span><span class="o">-&gt;</span><span class="na">setAutocompleterCallback</span><span class="p">(</span><span class="nv">$callback</span><span class="p">);</span>

    <span class="nv">$filePath</span> <span class="o">=</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">ask</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$question</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.3: </span>The <code class="docutils literal notranslate"><span class="pre">setAutocompleterCallback()</span></code> method was introduced in Symfony 4.3.</p>
</div>
</div>
<div class="section" id="do-not-trim-the-answer">
<h3>Do not Trim the Answer<a class="headerlink" href="#do-not-trim-the-answer" title="Permalink to this headline">¶</a></h3>
<p>You can also specify if you want to not trim the answer by setting it directly with
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Question/Question.php" title="Symfony\Component\Console\Question\Question::setTrimmable()"><span class="pre">setTrimmable()</span></a></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Console\Question\Question</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="nv">$helper</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getHelper</span><span class="p">(</span><span class="s1">&#39;question&#39;</span><span class="p">);</span>

    <span class="nv">$question</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Question</span><span class="p">(</span><span class="s1">&#39;What is the name of the child?&#39;</span><span class="p">);</span>
    <span class="nv">$question</span><span class="o">-&gt;</span><span class="na">setTrimmable</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
    <span class="c1">// if the users inputs &#39;elsa &#39; it will not be trimmed and you will get &#39;elsa &#39; as value</span>
    <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">ask</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$question</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.4: </span>The <code class="docutils literal notranslate"><span class="pre">setTrimmable()</span></code> method was introduced in Symfony 4.4.</p>
</div>
</div>
<div class="section" id="hiding-the-user-s-response">
<h3>Hiding the User’s Response<a class="headerlink" href="#hiding-the-user-s-response" title="Permalink to this headline">¶</a></h3>
<p>You can also ask a question and hide the response. This is particularly
convenient for passwords:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Console\Question\Question</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="nv">$helper</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getHelper</span><span class="p">(</span><span class="s1">&#39;question&#39;</span><span class="p">);</span>

    <span class="nv">$question</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Question</span><span class="p">(</span><span class="s1">&#39;What is the database password?&#39;</span><span class="p">);</span>
    <span class="nv">$question</span><span class="o">-&gt;</span><span class="na">setHidden</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
    <span class="nv">$question</span><span class="o">-&gt;</span><span class="na">setHiddenFallback</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>

    <span class="nv">$password</span> <span class="o">=</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">ask</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$question</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">When you ask for a hidden response, Symfony will use either a binary, change
<code class="docutils literal notranslate"><span class="pre">stty</span></code> mode or use another trick to hide the response. If none is available,
it will fallback and allow the response to be visible unless you set this
behavior to <code class="docutils literal notranslate"><span class="pre">false</span></code> using
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Question/Question.php" title="Symfony\Component\Console\Question\Question::setHiddenFallback()"><span class="pre">setHiddenFallback()</span></a></code>
like in the example above. In this case, a <code class="docutils literal notranslate"><span class="pre">RuntimeException</span></code>
would be thrown.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">stty</span></code> command is used to get and set properties of the command line
(such as getting the number of rows and columns or hiding the input text).
On Windows systems, this <code class="docutils literal notranslate"><span class="pre">stty</span></code> command may generate gibberish output and
mangle the input text. If that’s your case, disable it with this command:</p>
<div class="last highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Console\Helper\QuestionHelper</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Question\ChoiceQuestion</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="nv">$helper</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getHelper</span><span class="p">(</span><span class="s1">&#39;question&#39;</span><span class="p">);</span>
    <span class="nx">QuestionHelper</span><span class="o">::</span><span class="na">disableStty</span><span class="p">();</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="normalizing-the-answer">
<h2>Normalizing the Answer<a class="headerlink" href="#normalizing-the-answer" title="Permalink to this headline">¶</a></h2>
<p>Before validating the answer, you can “normalize” it to fix minor errors or
tweak it as needed. For instance, in a previous example you asked for the bundle
name. In case the user adds white spaces around the name by mistake, you can
trim the name before validating it. To do so, configure a normalizer using the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Question/Question.php" title="Symfony\Component\Console\Question\Question::setNormalizer()"><span class="pre">setNormalizer()</span></a></code>
method:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Console\Question\Question</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="nv">$helper</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getHelper</span><span class="p">(</span><span class="s1">&#39;question&#39;</span><span class="p">);</span>

    <span class="nv">$question</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Question</span><span class="p">(</span><span class="s1">&#39;Please enter the name of the bundle&#39;</span><span class="p">,</span> <span class="s1">&#39;AcmeDemoBundle&#39;</span><span class="p">);</span>
    <span class="nv">$question</span><span class="o">-&gt;</span><span class="na">setNormalizer</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// $value can be null here</span>
        <span class="k">return</span> <span class="nv">$value</span> <span class="o">?</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="nv">$bundleName</span> <span class="o">=</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">ask</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$question</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">The normalizer is called first and the returned value is used as the input
of the validator. If the answer is invalid, don’t throw exceptions in the
normalizer and let the validator handle those errors.</p>
</div>
</div>
<div class="section" id="validating-the-answer">
<h2>Validating the Answer<a class="headerlink" href="#validating-the-answer" title="Permalink to this headline">¶</a></h2>
<p>You can even validate the answer. For instance, in a previous example you asked
for the bundle name. Following the Symfony naming conventions, it should
be suffixed with <code class="docutils literal notranslate"><span class="pre">Bundle</span></code>. You can validate that by using the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Question/Question.php" title="Symfony\Component\Console\Question\Question::setValidator()"><span class="pre">setValidator()</span></a></code>
method:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Console\Question\Question</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="nv">$helper</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getHelper</span><span class="p">(</span><span class="s1">&#39;question&#39;</span><span class="p">);</span>

    <span class="nv">$question</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Question</span><span class="p">(</span><span class="s1">&#39;Please enter the name of the bundle&#39;</span><span class="p">,</span> <span class="s1">&#39;AcmeDemoBundle&#39;</span><span class="p">);</span>
    <span class="nv">$question</span><span class="o">-&gt;</span><span class="na">setValidator</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$answer</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_string</span><span class="p">(</span><span class="nv">$answer</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;Bundle&#39;</span> <span class="o">!==</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$answer</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">\RuntimeException</span><span class="p">(</span>
                <span class="s1">&#39;The name of the bundle should be suffixed with \&#39;Bundle\&#39;&#39;</span>
            <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$answer</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nv">$question</span><span class="o">-&gt;</span><span class="na">setMaxAttempts</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

    <span class="nv">$bundleName</span> <span class="o">=</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">ask</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$question</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">$validator</span></code> is a callback which handles the validation. It should
throw an exception if there is something wrong. The exception message is displayed
in the console, so it is a good practice to put some useful information in it. The
callback function should also return the value of the user’s input if the validation
was successful.</p>
<p>You can set the max number of times to ask with the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Question/Question.php" title="Symfony\Component\Console\Question\Question::setMaxAttempts()"><span class="pre">setMaxAttempts()</span></a></code> method.
If you reach this max number it will use the default value. Using <code class="docutils literal notranslate"><span class="pre">null</span></code> means
the amount of attempts is infinite. The user will be asked as long as they provide an
invalid answer and will only be able to proceed if their input is valid.</p>
<div class="section" id="validating-a-hidden-response">
<h3>Validating a Hidden Response<a class="headerlink" href="#validating-a-hidden-response" title="Permalink to this headline">¶</a></h3>
<p>You can also use a validator with a hidden question:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Console\Question\Question</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="nv">$helper</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getHelper</span><span class="p">(</span><span class="s1">&#39;question&#39;</span><span class="p">);</span>

    <span class="nv">$question</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Question</span><span class="p">(</span><span class="s1">&#39;Please enter your password&#39;</span><span class="p">);</span>
    <span class="nv">$question</span><span class="o">-&gt;</span><span class="na">setValidator</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">trim</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">\Exception</span><span class="p">(</span><span class="s1">&#39;The password cannot be empty&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$value</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nv">$question</span><span class="o">-&gt;</span><span class="na">setHidden</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
    <span class="nv">$question</span><span class="o">-&gt;</span><span class="na">setMaxAttempts</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>

    <span class="nv">$password</span> <span class="o">=</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">ask</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$question</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="testing-a-command-that-expects-input">
<h2>Testing a Command that Expects Input<a class="headerlink" href="#testing-a-command-that-expects-input" title="Permalink to this headline">¶</a></h2>
<p>If you want to write a unit test for a command which expects some kind of input
from the command line, you need to set the inputs that the command expects:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Console\Helper\HelperSet</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Helper\QuestionHelper</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Tester\CommandTester</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">testExecute</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="nv">$commandTester</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CommandTester</span><span class="p">(</span><span class="nv">$command</span><span class="p">);</span>

    <span class="c1">// Equals to a user inputting &quot;Test&quot; and hitting ENTER</span>
    <span class="nv">$commandTester</span><span class="o">-&gt;</span><span class="na">setInputs</span><span class="p">([</span><span class="s1">&#39;Test&#39;</span><span class="p">]);</span>

    <span class="c1">// Equals to a user inputting &quot;This&quot;, &quot;That&quot; and hitting ENTER</span>
    <span class="c1">// This can be used for answering two separated questions for instance</span>
    <span class="nv">$commandTester</span><span class="o">-&gt;</span><span class="na">setInputs</span><span class="p">([</span><span class="s1">&#39;This&#39;</span><span class="p">,</span> <span class="s1">&#39;That&#39;</span><span class="p">]);</span>

    <span class="c1">// For simulating a positive answer to a confirmation question, adding an</span>
    <span class="c1">// additional input saying &quot;yes&quot; will work</span>
    <span class="nv">$commandTester</span><span class="o">-&gt;</span><span class="na">setInputs</span><span class="p">([</span><span class="s1">&#39;yes&#39;</span><span class="p">]);</span>

    <span class="nv">$commandTester</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">([</span><span class="s1">&#39;command&#39;</span> <span class="o">=&gt;</span> <span class="nv">$command</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()]);</span>

    <span class="c1">// $this-&gt;assertRegExp(&#39;/.../&#39;, $commandTester-&gt;getDisplay());</span>
<span class="p">}</span>
</pre></div>
</div>
<p>By calling <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Tester/CommandTester.php" title="Symfony\Component\Console\Tester\CommandTester::setInputs()"><span class="pre">setInputs()</span></a></code>,
you imitate what the console would do internally with all user input through the CLI.
This method takes an array as only argument with, for each input that the command expects,
a string representing what the user would have typed.
This way you can test any user interaction (even complex ones) by passing the appropriate inputs.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Tester/CommandTester.php" title="Symfony\Component\Console\Tester\CommandTester"><span class="pre">CommandTester</span></a></code> automatically
simulates a user hitting <code class="docutils literal notranslate"><span class="pre">ENTER</span></code> after each input, no need for passing
an additional input.</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">On Windows systems Symfony uses a special binary to implement hidden
questions. This means that those questions don’t use the default <code class="docutils literal notranslate"><span class="pre">Input</span></code>
console object and therefore you can’t test them on Windows.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2004-2020 Fabien Potencier

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>