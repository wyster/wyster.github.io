

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Extending Action Argument Resolving &mdash; Symfony Framework Documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/rtd_custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to Customize Error Pages" href="error_pages.html" />
    <link rel="prev" title="How to Write a custom Twig Extension" href="../templating/twig_extension.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #f0f0f0" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/symfony-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                4.4}
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../quick_tour/index.html">The Quick Tour</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../best_practices.html">The Symfony Framework Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bundles.html">The Bundle System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cache.html">Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console.html">Console Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doctrine.html">Databases and the Doctrine ORM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">How to Deploy a Symfony Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../email.html">Swift Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../event_dispatcher.html">Events and Event Listeners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../forms.html">Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frontend.html">Managing CSS and JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_cache.html">HTTP Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_client.html">HTTP Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lock.html">Dealing with Concurrency with Locks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mailer.html">Sending Emails with Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mercure.html">Pushing Data to Clients Using the Mercure Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../messenger.html">Messenger: Sync &amp; Queued Message Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">Migrating an Existing Application to Symfony</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../profiler.html">Profiler</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../routing.html">Routing</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../routing.html#creating-routes">Creating Routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routing.html#route-parameters">Route Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routing.html#route-groups-and-prefixes">Route Groups and Prefixes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routing.html#getting-the-route-name-and-parameters">Getting the Route Name and Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routing.html#special-routes">Special Routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routing.html#sub-domain-routing">Sub-Domain Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routing.html#localized-routes-i18n">Localized Routes (i18n)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routing.html#generating-urls">Generating URLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routing.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../routing.html#learn-more-about-routing">Learn more about Routing</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../controller.html">Controller</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../controller.html#a-basic-controller">A Basic Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="../controller.html#the-base-controller-classes-services">The Base Controller Class &amp; Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../controller.html#generating-controllers">Generating Controllers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../controller.html#managing-errors-and-404-pages">Managing Errors and 404 Pages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../controller.html#the-request-object-as-a-controller-argument">The Request object as a Controller Argument</a></li>
<li class="toctree-l4"><a class="reference internal" href="../controller.html#managing-the-session">Managing the Session</a></li>
<li class="toctree-l4"><a class="reference internal" href="../controller.html#the-request-and-response-object">The Request and Response Object</a></li>
<li class="toctree-l4"><a class="reference internal" href="../controller.html#final-thoughts">Final Thoughts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../controller.html#keep-going">Keep Going!</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../controller.html#learn-more-about-controllers">Learn more about Controllers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../routing/custom_route_loader.html">How to Create a custom Route Loader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../routing/routing_from_database.html">Looking up Routes from a Database: Symfony CMF DynamicRouter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../session.html">Sessions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../setup.html">Installing &amp; Setting up the Symfony Framework</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../setup.html#technical-requirements">Technical Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#creating-symfony-applications">Creating Symfony Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#setting-up-an-existing-symfony-project">Setting up an Existing Symfony Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#running-symfony-applications">Running Symfony Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#installing-packages">Installing Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#checking-security-vulnerabilities">Checking Security Vulnerabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#symfony-lts-versions">Symfony LTS Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#the-symfony-demo-application">The Symfony Demo application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#start-coding">Start Coding!</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../setup.html#learn-more">Learn More</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../page_creation.html">Create your First Page in Symfony</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../page_creation.html#creating-a-page-route-and-controller">Creating a Page: Route and Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="../page_creation.html#annotation-routes">Annotation Routes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../page_creation.html#auto-installing-recipes-with-symfony-flex">Auto-Installing Recipes with Symfony Flex</a></li>
<li class="toctree-l4"><a class="reference internal" href="../page_creation.html#the-bin-console-command">The bin/console Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../page_creation.html#the-web-debug-toolbar-debugging-dream">The Web Debug Toolbar: Debugging Dream</a></li>
<li class="toctree-l4"><a class="reference internal" href="../page_creation.html#rendering-a-template">Rendering a Template</a></li>
<li class="toctree-l4"><a class="reference internal" href="../page_creation.html#checking-out-the-project-structure">Checking out the Project Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../page_creation.html#what-s-next">What’s Next?</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../page_creation.html#go-deeper-with-http-framework-fundamentals">Go Deeper with HTTP &amp; Framework Fundamentals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../setup/homestead.html">Using Symfony with Homestead/Vagrant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup/web_server_configuration.html">Configuring a Web Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup/built_in_web_server.html">How to Use PHP’s built-in Web Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup/bundles.html">Upgrading a Third-Party Bundle for a Major Symfony Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup/file_permissions.html">Setting up or Fixing File Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup/flex.html">Upgrading Existing Applications to Symfony Flex</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup/symfony_server.html">Symfony Local Web Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup/unstable_versions.html">How to Install or Upgrade to the Latest, Unreleased Symfony Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup/upgrade_major.html">Upgrading a Major Version (e.g. 4.4.0 to 5.0.0)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup/upgrade_minor.html">Upgrading a Minor Version (e.g. 4.0.0 to 4.1.0)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup/upgrade_patch.html">Upgrading a Patch Version (e.g. 4.1.0 to 4.1.1)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../serializer.html">How to Use the Serializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../service_container.html">Service Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../translation.html">Translations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../validation.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web_link.html">Asset Preloading and Resource Hints with HTTP/2 and WebLink</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">Workflow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../components/index.html">The Components</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference Documents</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../create_framework/index.html">Create your own PHP Framework</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Symfony Framework Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../getting_started/index.html">Getting Started</a> &raquo;</li>
        
          <li><a href="../setup.html">Installing &amp; Setting up the Symfony Framework</a> &raquo;</li>
        
          <li><a href="../page_creation.html">Create your First Page in Symfony</a> &raquo;</li>
        
          <li><a href="../routing.html">Routing</a> &raquo;</li>
        
          <li><a href="../controller.html">Controller</a> &raquo;</li>
        
      <li>Extending Action Argument Resolving</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/controller/argument_value_resolver.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="extending-action-argument-resolving">
<span id="index-0"></span><h1>Extending Action Argument Resolving<a class="headerlink" href="#extending-action-argument-resolving" title="Permalink to this headline">¶</a></h1>
<p>In the <a class="reference internal" href="../controller.html"><span class="doc">controller guide</span></a>, you’ve learned that you can get the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request"><span class="pre">Request</span></a></code> object via an argument in
your controller. This argument has to be type-hinted by the <code class="docutils literal notranslate"><span class="pre">Request</span></code> class
in order to be recognized. This is done via the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/Controller/ArgumentResolver.php" title="Symfony\Component\HttpKernel\Controller\ArgumentResolver"><span class="pre">ArgumentResolver</span></a></code>. By
creating and registering custom argument value resolvers, you can extend this
functionality.</p>
<div class="section" id="built-in-value-resolvers">
<span id="functionality-shipped-with-the-httpkernel"></span><h2>Built-In Value Resolvers<a class="headerlink" href="#built-in-value-resolvers" title="Permalink to this headline">¶</a></h2>
<p>Symfony ships with the following value resolvers in the
<a class="reference internal" href="../components/http_kernel.html"><span class="doc">HttpKernel component</span></a>:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/Controller/ArgumentResolver/RequestAttributeValueResolver.php" title="Symfony\Component\HttpKernel\Controller\ArgumentResolver\RequestAttributeValueResolver"><span class="pre">RequestAttributeValueResolver</span></a></code></dt>
<dd>Attempts to find a request attribute that matches the name of the argument.</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/Controller/ArgumentResolver/RequestValueResolver.php" title="Symfony\Component\HttpKernel\Controller\ArgumentResolver\RequestValueResolver"><span class="pre">RequestValueResolver</span></a></code></dt>
<dd>Injects the current <code class="docutils literal notranslate"><span class="pre">Request</span></code> if type-hinted with <code class="docutils literal notranslate"><span class="pre">Request</span></code> or a class
extending <code class="docutils literal notranslate"><span class="pre">Request</span></code>.</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/Controller/ArgumentResolver/ServiceValueResolver.php" title="Symfony\Component\HttpKernel\Controller\ArgumentResolver\ServiceValueResolver"><span class="pre">ServiceValueResolver</span></a></code></dt>
<dd>Injects a service if type-hinted with a valid service class or interface. This
works like <a class="reference internal" href="../service_container/autowiring.html"><span class="doc">autowiring</span></a>.</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/Controller/ArgumentResolver/SessionValueResolver.php" title="Symfony\Component\HttpKernel\Controller\ArgumentResolver\SessionValueResolver"><span class="pre">SessionValueResolver</span></a></code></dt>
<dd>Injects the configured session class implementing <code class="docutils literal notranslate"><span class="pre">SessionInterface</span></code> if
type-hinted with <code class="docutils literal notranslate"><span class="pre">SessionInterface</span></code> or a class implementing
<code class="docutils literal notranslate"><span class="pre">SessionInterface</span></code>.</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/Controller/ArgumentResolver/DefaultValueResolver.php" title="Symfony\Component\HttpKernel\Controller\ArgumentResolver\DefaultValueResolver"><span class="pre">DefaultValueResolver</span></a></code></dt>
<dd>Will set the default value of the argument if present and the argument
is optional.</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/Controller/ArgumentResolver/VariadicValueResolver.php" title="Symfony\Component\HttpKernel\Controller\ArgumentResolver\VariadicValueResolver"><span class="pre">VariadicValueResolver</span></a></code></dt>
<dd>Verifies if the request data is an array and will add all of them to the
argument list. When the action is called, the last (variadic) argument will
contain all the values of this array.</dd>
</dl>
<p>In addition, some components and official bundles provide other value resolvers:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/Controller/UserValueResolver.php" title="Symfony\Component\Security\Http\Controller\UserValueResolver"><span class="pre">UserValueResolver</span></a></code></dt>
<dd>Injects the object that represents the current logged in user if type-hinted
with <code class="docutils literal notranslate"><span class="pre">UserInterface</span></code>. Default value can be set to <code class="docutils literal notranslate"><span class="pre">null</span></code> in case
the controller can be accessed by anonymous users. It requires installing
the <a class="reference internal" href="../components/security.html"><span class="doc">Security component</span></a>.</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/SecurityBundle/SecurityUserValueResolver.php" title="Symfony\Bundle\SecurityBundle\SecurityUserValueResolver"><span class="pre">SecurityUserValueResolver</span></a></code></dt>
<dd>Injects the object that represents the current logged in user if type-hinted
with <code class="docutils literal notranslate"><span class="pre">UserInterface</span></code>. Default value can be set to <code class="docutils literal notranslate"><span class="pre">null</span></code> in case
the controller can be accessed by anonymous users. It requires installing
the <a class="reference external" href="https://github.com/symfony/security-bundle">SecurityBundle</a>.</dd>
</dl>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 4.1: </span>The <code class="docutils literal notranslate"><span class="pre">SecurityUserValueResolver</span></code> was deprecated in Symfony 4.1 in favor of
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/Controller/UserValueResolver.php" title="Symfony\Component\Security\Http\Controller\UserValueResolver"><span class="pre">UserValueResolver</span></a></code>.</p>
</div>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">Psr7ServerRequestResolver</span></code></dt>
<dd>Injects a <a class="reference external" href="https://www.php-fig.org/psr/psr-7/">PSR-7</a> compliant version of the current request if type-hinted
with <code class="docutils literal notranslate"><span class="pre">RequestInterface</span></code>, <code class="docutils literal notranslate"><span class="pre">MessageInterface</span></code> or <code class="docutils literal notranslate"><span class="pre">ServerRequestInterface</span></code>.
It requires installing the <a class="reference external" href="https://github.com/sensiolabs/SensioFrameworkExtraBundle">SensioFrameworkExtraBundle</a>.</dd>
</dl>
</div>
<div class="section" id="adding-a-custom-value-resolver">
<h2>Adding a Custom Value Resolver<a class="headerlink" href="#adding-a-custom-value-resolver" title="Permalink to this headline">¶</a></h2>
<p>In the next example, you’ll create a value resolver to inject the object that
represents the current user whenever a controller method type-hints an argument
with the <code class="docutils literal notranslate"><span class="pre">User</span></code> class:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/UserController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Entity\User</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">UserController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">(</span><span class="nx">User</span> <span class="nv">$user</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;Hello &#39;</span><span class="o">.</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">getUsername</span><span class="p">()</span><span class="o">.</span><span class="s1">&#39;!&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Beware that this feature is already provided by the <a class="reference external" href="https://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/converters.html">&#64;ParamConverter</a>
annotation from the SensioFrameworkExtraBundle. If you have that bundle
installed in your project, add this config to disable the auto-conversion of
type-hinted method arguments:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/packages/sensio_framework_extra.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">sensio_framework_extra</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">request</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">converters</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="l l-Scalar l-Scalar-Plain">auto_convert</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/packages/sensio_framework_extra.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xmlns:sensio-framework-extra=</span><span class="s">&quot;http://symfony.com/schema/dic/symfony_extra&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services</span>
<span class="s">        https://symfony.com/schema/dic/services/services-1.0.xsd</span>
<span class="s">        http://symfony.com/schema/dic/symfony_extra</span>
<span class="s">        https://symfony.com/schema/dic/symfony_extra/symfony_extra-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;sensio-framework-extra:config&gt;</span>
        <span class="nt">&lt;request</span> <span class="na">converters=</span><span class="s">&quot;true&quot;</span> <span class="na">auto-convert=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/sensio-framework-extra:config&gt;</span>
<span class="nt">&lt;/container&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/packages/sensio_framework_extra.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;sensio_framework_extra&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;request&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;converters&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
        <span class="s1">&#39;auto_convert&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">]);</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>Adding a new value resolver requires creating a class that implements
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/Controller/ArgumentValueResolverInterface.php" title="Symfony\Component\HttpKernel\Controller\ArgumentValueResolverInterface"><span class="pre">ArgumentValueResolverInterface</span></a></code>
and defining a service for it. The interface defines two methods:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">supports()</span></code></dt>
<dd>This method is used to check whether the value resolver supports the
given argument. <code class="docutils literal notranslate"><span class="pre">resolve()</span></code> will only be called when this returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">resolve()</span></code></dt>
<dd>This method will resolve the actual value for the argument. Once the value
is resolved, you must <a class="reference external" href="https://www.php.net/manual/en/language.generators.syntax.php">yield</a> the value to the <code class="docutils literal notranslate"><span class="pre">ArgumentResolver</span></code>.</dd>
</dl>
<p>Both methods get the <code class="docutils literal notranslate"><span class="pre">Request</span></code> object, which is the current request, and an
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/ControllerMetadata/ArgumentMetadata.php" title="Symfony\Component\HttpKernel\ControllerMetadata\ArgumentMetadata"><span class="pre">ArgumentMetadata</span></a></code>
instance. This object contains all information retrieved from the method signature
for the current argument.</p>
<p>Now that you know what to do, you can implement this interface. To get the
current <code class="docutils literal notranslate"><span class="pre">User</span></code>, you need the current security token. This token can be
retrieved from the token storage:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/ArgumentResolver/UserValueResolver.php</span>
<span class="k">namespace</span> <span class="nx">App\ArgumentResolver</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Entity\User</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpKernel\Controller\ArgumentValueResolverInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpKernel\ControllerMetadata\ArgumentMetadata</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Security\Core\Security</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">UserValueResolver</span> <span class="k">implements</span> <span class="nx">ArgumentValueResolverInterface</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$security</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">Security</span> <span class="nv">$security</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">security</span> <span class="o">=</span> <span class="nv">$security</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">supports</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">ArgumentMetadata</span> <span class="nv">$argument</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">User</span><span class="o">::</span><span class="na">class</span> <span class="o">!==</span> <span class="nv">$argument</span><span class="o">-&gt;</span><span class="na">getType</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">security</span><span class="o">-&gt;</span><span class="na">getUser</span><span class="p">()</span> <span class="nx">instanceof</span> <span class="nx">User</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">resolve</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">ArgumentMetadata</span> <span class="nv">$argument</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">yield</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">security</span><span class="o">-&gt;</span><span class="na">getUser</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In order to get the actual <code class="docutils literal notranslate"><span class="pre">User</span></code> object in your argument, the given value
must fulfill the following requirements:</p>
<ul class="simple">
<li>An argument must be type-hinted as <code class="docutils literal notranslate"><span class="pre">User</span></code> in your action method signature;</li>
<li>The value must be an instance of the <code class="docutils literal notranslate"><span class="pre">User</span></code> class.</li>
</ul>
<p>When all those requirements are met and <code class="docutils literal notranslate"><span class="pre">true</span></code> is returned, the
<code class="docutils literal notranslate"><span class="pre">ArgumentResolver</span></code> calls <code class="docutils literal notranslate"><span class="pre">resolve()</span></code> with the same values as it called
<code class="docutils literal notranslate"><span class="pre">supports()</span></code>.</p>
<p>That’s it! Now all you have to do is add the configuration for the service
container. This can be done by tagging the service with <code class="docutils literal notranslate"><span class="pre">controller.argument_value_resolver</span></code>
and adding a priority.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/services.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">services</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">_defaults</span><span class="p p-Indicator">:</span>
        <span class="c1"># ... be sure autowiring is enabled</span>
        <span class="l l-Scalar l-Scalar-Plain">autowire</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="c1"># ...</span>

    <span class="l l-Scalar l-Scalar-Plain">App\ArgumentResolver\UserValueResolver</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">tags</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">controller.argument_value_resolver</span><span class="p p-Indicator">,</span> <span class="nv">priority</span><span class="p p-Indicator">:</span> <span class="nv">50</span> <span class="p p-Indicator">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/services.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-Instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services</span>
<span class="s">        https://symfony.com/schema/dic/services/services-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;services&gt;</span>
        <span class="c">&lt;!-- ... be sure autowiring is enabled --&gt;</span>
        <span class="nt">&lt;defaults</span> <span class="na">autowire=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
        <span class="c">&lt;!-- ... --&gt;</span>

        <span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;App\ArgumentResolver\UserValueResolver&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;tag</span> <span class="na">name=</span><span class="s">&quot;controller.argument_value_resolver&quot;</span> <span class="na">priority=</span><span class="s">&quot;50&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/service&gt;</span>
    <span class="nt">&lt;/services&gt;</span>

<span class="nt">&lt;/container&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/services.php</span>
<span class="k">use</span> <span class="nx">App\ArgumentResolver\UserValueResolver</span><span class="p">;</span>

<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">autowire</span><span class="p">(</span><span class="nx">UserValueResolver</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addTag</span><span class="p">(</span><span class="s1">&#39;controller.argument_value_resolver&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;priority&#39;</span> <span class="o">=&gt;</span> <span class="mi">50</span><span class="p">])</span>
<span class="p">;</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>While adding a priority is optional, it’s recommended to add one to make sure
the expected value is injected. The built-in <code class="docutils literal notranslate"><span class="pre">RequestAttributeValueResolver</span></code>,
which fetches attributes from the <code class="docutils literal notranslate"><span class="pre">Request</span></code>, has a priority of <code class="docutils literal notranslate"><span class="pre">100</span></code>. If your
resolver also fetches <code class="docutils literal notranslate"><span class="pre">Request</span></code> attributes, set a priority of <code class="docutils literal notranslate"><span class="pre">100</span></code> or more.
Otherwise, set a priority lower than <code class="docutils literal notranslate"><span class="pre">100</span></code> to make sure the argument resolver
is not triggered when the <code class="docutils literal notranslate"><span class="pre">Request</span></code> attribute is present (for example, when
passing the user along sub-requests).</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>As you can see in the <code class="docutils literal notranslate"><span class="pre">UserValueResolver::supports()</span></code> method, the user
may not be available (e.g. when the controller is not behind a firewall).
In these cases, the resolver will not be executed. If no argument value
is resolved, an exception will be thrown.</p>
<p class="last">To prevent this, you can add a default value in the controller (e.g. <code class="docutils literal notranslate"><span class="pre">User</span>
<span class="pre">$user</span> <span class="pre">=</span> <span class="pre">null</span></code>). The <code class="docutils literal notranslate"><span class="pre">DefaultValueResolver</span></code> is executed as the last
resolver and will use the default value if no value was already resolved.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2004-2020 Fabien Potencier

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>