

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Setting up or Fixing File Permissions &mdash; Symfony Framework Documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/rtd_custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Upgrading Existing Applications to Symfony Flex" href="flex.html" />
    <link rel="prev" title="Upgrading a Third-Party Bundle for a Major Symfony Version" href="bundles.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #f0f0f0" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/symfony-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                5.x}
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../quick_tour/index.html">The Quick Tour</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../best_practices.html">The Symfony Framework Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bundles.html">The Bundle System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cache.html">Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console.html">Console Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doctrine.html">Databases and the Doctrine ORM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">How to Deploy a Symfony Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../email.html">Swift Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../event_dispatcher.html">Events and Event Listeners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../forms.html">Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frontend.html">Managing CSS and JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_cache.html">HTTP Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_client.html">HTTP Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lock.html">Dealing with Concurrency with Locks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mailer.html">Sending Emails with Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mercure.html">Pushing Data to Clients Using the Mercure Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../messenger.html">Messenger: Sync &amp; Queued Message Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">Migrating an Existing Application to Symfony</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notifier.html">Creating and Sending Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../profiler.html">Profiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rate_limiter.html">Rate Limiter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../routing.html">Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../session.html">Sessions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../setup.html">Installing &amp; Setting up the Symfony Framework</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../setup.html#technical-requirements">Technical Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#creating-symfony-applications">Creating Symfony Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#setting-up-an-existing-symfony-project">Setting up an Existing Symfony Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#running-symfony-applications">Running Symfony Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#installing-packages">Installing Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#checking-security-vulnerabilities">Checking Security Vulnerabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#symfony-lts-versions">Symfony LTS Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#the-symfony-demo-application">The Symfony Demo application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html#start-coding">Start Coding!</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../setup.html#learn-more">Learn More</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../page_creation.html">Create your First Page in Symfony</a></li>
<li class="toctree-l3"><a class="reference internal" href="homestead.html">Using Symfony with Homestead/Vagrant</a></li>
<li class="toctree-l3"><a class="reference internal" href="web_server_configuration.html">Configuring a Web Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="bundles.html">Upgrading a Third-Party Bundle for a Major Symfony Version</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Setting up or Fixing File Permissions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#permissions-required-by-symfony-applications">Permissions Required by Symfony Applications</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-permissions-for-symfony-applications">Configuring Permissions for Symfony Applications</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="flex.html">Upgrading Existing Applications to Symfony Flex</a></li>
<li class="toctree-l3"><a class="reference internal" href="symfony_server.html">Symfony Local Web Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="unstable_versions.html">How to Install or Upgrade to the Latest, Unreleased Symfony Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_major.html">Upgrading a Major Version (e.g. 4.4.0 to 5.0.0)</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_minor.html">Upgrading a Minor Version (e.g. 4.0.0 to 4.1.0)</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_patch.html">Upgrading a Patch Version (e.g. 5.0.0 to 5.0.1)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../serializer.html">How to Use the Serializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../service_container.html">Service Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../translation.html">Translations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../validation.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web_link.html">Asset Preloading and Resource Hints with HTTP/2 and WebLink</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">Workflow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../components/index.html">The Components</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference Documents</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../create_framework/index.html">Create your own PHP Framework</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Symfony Framework Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../getting_started/index.html">Getting Started</a> &raquo;</li>
        
          <li><a href="../setup.html">Installing &amp; Setting up the Symfony Framework</a> &raquo;</li>
        
      <li>Setting up or Fixing File Permissions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/setup/file_permissions.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setting-up-or-fixing-file-permissions">
<h1>Setting up or Fixing File Permissions<a class="headerlink" href="#setting-up-or-fixing-file-permissions" title="Permalink to this headline">¶</a></h1>
<p>Symfony generates certain files in the <code class="docutils literal notranslate"><span class="pre">var/</span></code> directory of your project when
running the application. In the <code class="docutils literal notranslate"><span class="pre">dev</span></code> <a class="reference internal" href="../configuration.html#configuration-environments"><span class="std std-ref">environment</span></a>,
the <code class="docutils literal notranslate"><span class="pre">bin/console</span></code> and <code class="docutils literal notranslate"><span class="pre">public/index.php</span></code> files use <code class="docutils literal notranslate"><span class="pre">umask()</span></code> to make sure
that the directory is writable. This means that you don’t need to configure
permissions when developing the application in your local machine.</p>
<p>However, using <code class="docutils literal notranslate"><span class="pre">umask()</span></code> is not considered safe in production. That’s why you
often need to configure some permissions explicitly in your production servers
as explained in this article.</p>
<div class="section" id="permissions-required-by-symfony-applications">
<h2>Permissions Required by Symfony Applications<a class="headerlink" href="#permissions-required-by-symfony-applications" title="Permalink to this headline">¶</a></h2>
<p>These are the permissions required to run Symfony applications:</p>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">var/log/</span></code> directory must exist and must be writable by both your
web server user and the terminal user;</li>
<li>The <code class="docutils literal notranslate"><span class="pre">var/cache/</span></code> directory must be writable by the terminal user (the
user running <code class="docutils literal notranslate"><span class="pre">cache:warmup</span></code> or <code class="docutils literal notranslate"><span class="pre">cache:clear</span></code> commands);</li>
<li>The <code class="docutils literal notranslate"><span class="pre">var/cache/</span></code> directory must be writable by the web server user if you use
a <a class="reference internal" href="../components/cache/adapters/filesystem_adapter.html"><span class="doc">filesystem-based cache</span></a>.</li>
</ul>
</div>
<div class="section" id="configuring-permissions-for-symfony-applications">
<span id="setup-file-permissions"></span><h2>Configuring Permissions for Symfony Applications<a class="headerlink" href="#configuring-permissions-for-symfony-applications" title="Permalink to this headline">¶</a></h2>
<p>On Linux and macOS systems, if your web server user is different from your
command line user, you need to configure permissions properly to avoid issues.
There are several ways to achieve that:</p>
<div class="section" id="using-acl-on-a-system-that-supports-setfacl-linux-bsd">
<h3>1. Using ACL on a System that Supports <code class="docutils literal notranslate"><span class="pre">setfacl</span></code> (Linux/BSD)<a class="headerlink" href="#using-acl-on-a-system-that-supports-setfacl-linux-bsd" title="Permalink to this headline">¶</a></h3>
<p>Using Access Control Lists (ACL) permissions is the most safe and
recommended method to make the <code class="docutils literal notranslate"><span class="pre">var/</span></code> directory writable. You may need to
install <code class="docutils literal notranslate"><span class="pre">setfacl</span></code> and <a class="reference external" href="https://help.ubuntu.com/community/FilePermissionsACLs">enable ACL support</a> on your disk partition before
using this method. Then, use the following script to determine your web
server user and grant the needed permissions:</p>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">HTTPDUSER</span><span class="o">=</span><span class="k">$(</span>ps axo user,comm <span class="p">|</span> grep -E <span class="s1">&#39;[a]pache|[h]ttpd|[_]www|[w]ww-data|[n]ginx&#39;</span> <span class="p">|</span> grep -v root <span class="p">|</span> head -1 <span class="p">|</span> cut -d<span class="se">\ </span> -f1<span class="k">)</span>
<span class="c1"># if this doesn&#39;t work, try adding `-n` option</span>

<span class="c1"># set permissions for future files and folders</span>
<span class="gp">$</span> sudo setfacl -dR -m u:<span class="s2">&quot;</span><span class="nv">$HTTPDUSER</span><span class="s2">&quot;</span>:rwX -m u:<span class="k">$(</span>whoami<span class="k">)</span>:rwX var
<span class="c1"># set permissions on the existing files and folders</span>
<span class="gp">$</span> sudo setfacl -R -m u:<span class="s2">&quot;</span><span class="nv">$HTTPDUSER</span><span class="s2">&quot;</span>:rwX -m u:<span class="k">$(</span>whoami<span class="k">)</span>:rwX var
</pre></div>
</td></tr></table></div>
<p>Both of these commands assign permissions for the system user (the one
running these commands) and the web server user.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">setfacl</span></code> isn’t available on NFS mount points. However, storing cache and
logs over NFS is strongly discouraged for performance reasons.</p>
</div>
</div>
<div class="section" id="use-the-same-user-for-the-cli-and-the-web-server">
<h3>2. Use the same User for the CLI and the Web Server<a class="headerlink" href="#use-the-same-user-for-the-cli-and-the-web-server" title="Permalink to this headline">¶</a></h3>
<p>Edit your web server configuration (commonly <code class="docutils literal notranslate"><span class="pre">httpd.conf</span></code> or <code class="docutils literal notranslate"><span class="pre">apache2.conf</span></code>
for Apache) and set its user to be the same as your CLI user (e.g. for Apache,
update the <code class="docutils literal notranslate"><span class="pre">User</span></code> and <code class="docutils literal notranslate"><span class="pre">Group</span></code> directives).</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">If this solution is used in a production server, be sure this user only has
limited privileges (no access to private data or servers, execution of
unsafe binaries, etc.) as a compromised server would give to the hacker
those privileges.</p>
</div>
</div>
<div class="section" id="without-using-acl">
<h3>3. Without Using ACL<a class="headerlink" href="#without-using-acl" title="Permalink to this headline">¶</a></h3>
<p>If none of the previous methods work for you, change the <code class="docutils literal notranslate"><span class="pre">umask</span></code> so that the
cache and log directories are group-writable or world-writable (depending
if the web server user and the command line user are in the same group or not).
To achieve this, put the following line at the beginning of the <code class="docutils literal notranslate"><span class="pre">bin/console</span></code>,
and <code class="docutils literal notranslate"><span class="pre">public/index.php</span></code> files:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nb">umask</span><span class="p">(</span><span class="mo">0002</span><span class="p">);</span> <span class="c1">// This will let the permissions be 0775</span>

<span class="c1">// or</span>

<span class="nb">umask</span><span class="p">(</span><span class="mo">0000</span><span class="p">);</span> <span class="c1">// This will let the permissions be 0777</span>
</pre></div>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">Changing the <code class="docutils literal notranslate"><span class="pre">umask</span></code> is not thread-safe, so the ACL methods are recommended
when they are available.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2004-2020 Fabien Potencier

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>