<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>The Yaml Component</title>
    <link rel="stylesheet" href="../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/rtd_custom.css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-yaml-component">
<span id="index-0"></span><h1>The Yaml Component</h1>
<blockquote>
<div><p>The Yaml component loads and dumps YAML files.</p>
</div></blockquote>
<div class="section" id="what-is-it">
<h2>What is It?</h2>
<p>The Symfony Yaml component parses YAML strings to convert them to PHP arrays.
It is also able to convert PHP arrays to YAML strings.</p>
<p><a class="reference external" href="https://yaml.org/">YAML</a><span class="link-target"> [https://yaml.org/]</span>, <em>YAML Ain’t Markup Language</em>, is a human friendly data serialization
standard for all programming languages. YAML is a great format for your
configuration files. YAML files are as expressive as XML files and as readable
as INI files.</p>
<p>The Symfony Yaml Component implements a selected subset of features defined in
the <a class="reference external" href="https://yaml.org/spec/1.2/spec.html">YAML 1.2 version specification</a><span class="link-target"> [https://yaml.org/spec/1.2/spec.html]</span>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Learn more about the Yaml component in the
<a class="reference internal" href="yaml/yaml_format.xhtml"><span class="doc">The YAML Format</span></a> article.</p>
</div>
</div>
<div class="section" id="installation">
<h2>Installation</h2>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> composer require symfony/yaml
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you install this component outside of a Symfony application, you must
require the <code class="docutils literal notranslate"><span class="pre">vendor/autoload.php</span></code> file in your code to enable the class
autoloading mechanism provided by Composer. Read
<a class="reference internal" href="using_components.xhtml"><span class="doc">this article</span></a> for more details.</p>
</div>
</div>
<div class="section" id="why">
<h2>Why?</h2>
<div class="section" id="fast">
<h3>Fast</h3>
<p>One of the goals of Symfony Yaml is to find the right balance between speed and
features. It supports just the needed features to handle configuration files.
Notable lacking features are: document directives, multi-line quoted messages,
compact block collections and multi-document files.</p>
</div>
<div class="section" id="real-parser">
<h3>Real Parser</h3>
<p>It sports a real parser and is able to parse a large subset of the YAML
specification, for all your configuration needs. It also means that the parser
is pretty robust, easy to understand, and simple enough to extend.</p>
</div>
<div class="section" id="clear-error-messages">
<h3>Clear Error Messages</h3>
<p>Whenever you have a syntax problem with your YAML files, the library outputs a
helpful message with the filename and the line number where the problem
occurred. It eases the debugging a lot.</p>
</div>
<div class="section" id="dump-support">
<h3>Dump Support</h3>
<p>It is also able to dump PHP arrays to YAML with object support, and inline
level configuration for pretty outputs.</p>
</div>
<div class="section" id="types-support">
<h3>Types Support</h3>
<p>It supports most of the YAML built-in types like dates, integers, octal numbers,
booleans, and much more…</p>
</div>
<div class="section" id="full-merge-key-support">
<h3>Full Merge Key Support</h3>
<p>Full support for references, aliases, and full merge key. Don’t repeat
yourself by referencing common configuration bits.</p>
</div>
</div>
<div class="section" id="using-the-symfony-yaml-component">
<span id="using-the-symfony2-yaml-component"></span><h2>Using the Symfony YAML Component</h2>
<p>The Symfony Yaml component consists of two main classes:
one parses YAML strings (<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Parser.php" title="Symfony\Component\Yaml\Parser"><span class="pre">Parser</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Parser.php]</span></span></code>), and the
other dumps a PHP array to a YAML string
(<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Dumper.php" title="Symfony\Component\Yaml\Dumper"><span class="pre">Dumper</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Dumper.php]</span></span></code>).</p>
<p>On top of these two classes, the <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Yaml.php" title="Symfony\Component\Yaml\Yaml"><span class="pre">Yaml</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Yaml.php]</span></span></code> class
acts as a thin wrapper that simplifies common uses.</p>
<div class="section" id="reading-yaml-contents">
<h3>Reading YAML Contents</h3>
<p>The <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Yaml.php" title="Symfony\Component\Yaml\Yaml::parse()"><span class="pre">parse()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Yaml.php]</span></span></code> method parses a YAML
string and converts it to a PHP array:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Yaml\Yaml</span><span class="p">;</span>

<span class="nv">$value</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">parse</span><span class="p">(</span><span class="s2">&quot;foo: bar&quot;</span><span class="p">);</span>
<span class="c1">// $value = [&#39;foo&#39; =&gt; &#39;bar&#39;]</span>
</pre></div>
</div>
<p>If an error occurs during parsing, the parser throws a
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Exception/ParseException.php" title="Symfony\Component\Yaml\Exception\ParseException"><span class="pre">ParseException</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Exception/ParseException.php]</span></span></code> exception
indicating the error type and the line in the original YAML string where the
error occurred:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Yaml\Exception\ParseException</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$value</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">parse</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">ParseException</span> <span class="nv">$exception</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">printf</span><span class="p">(</span><span class="s1">&#39;Unable to parse the YAML string: %s&#39;</span><span class="p">,</span> <span class="nv">$exception</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="reading-yaml-files">
<h3>Reading YAML Files</h3>
<p>The <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Yaml.php" title="Symfony\Component\Yaml\Yaml::parseFile()"><span class="pre">parseFile()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Yaml.php]</span></span></code> method parses the YAML
contents of the given file path and converts them to a PHP value:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Yaml\Yaml</span><span class="p">;</span>

<span class="nv">$value</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">parseFile</span><span class="p">(</span><span class="s1">&#39;/path/to/file.yaml&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>If an error occurs during parsing, the parser throws a <code class="docutils literal notranslate"><span class="pre">ParseException</span></code> exception.</p>
</div>
<div class="section" id="writing-yaml-files">
<span id="components-yaml-dump"></span><h3>Writing YAML Files</h3>
<p>The <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Yaml.php" title="Symfony\Component\Yaml\Yaml::dump()"><span class="pre">dump()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Yaml.php]</span></span></code> method dumps any PHP
array to its YAML representation:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Yaml\Yaml</span><span class="p">;</span>

<span class="nv">$array</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bar&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;baz&#39;</span><span class="p">],</span>
<span class="p">];</span>

<span class="nv">$yaml</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">dump</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>

<span class="nb">file_put_contents</span><span class="p">(</span><span class="s1">&#39;/path/to/file.yaml&#39;</span><span class="p">,</span> <span class="nv">$yaml</span><span class="p">);</span>
</pre></div>
</div>
<p>If an error occurs during the dump, the parser throws a
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Exception/DumpException.php" title="Symfony\Component\Yaml\Exception\DumpException"><span class="pre">DumpException</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Exception/DumpException.php]</span></span></code> exception.</p>
<div class="section" id="expanded-and-inlined-arrays">
<span id="array-expansion-and-inlining"></span><h4>Expanded and Inlined Arrays</h4>
<p>The YAML format supports two kind of representation for arrays, the expanded
one, and the inline one. By default, the dumper uses the expanded
representation:</p>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">foo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bar</span>
<span class="l l-Scalar l-Scalar-Plain">bar</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">foo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bar</span>
    <span class="l l-Scalar l-Scalar-Plain">bar</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">baz</span>
</pre></div>
</td></tr></table></div>
<p>The second argument of the <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Yaml.php" title="Symfony\Component\Yaml\Yaml::dump()"><span class="pre">dump()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Yaml.php]</span></span></code>
method customizes the level at which the output switches from the expanded
representation to the inline one:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">dump</span><span class="p">(</span><span class="nv">$array</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">foo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bar</span>
<span class="l l-Scalar l-Scalar-Plain">bar</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">foo</span><span class="p p-Indicator">:</span> <span class="nv">bar</span><span class="p p-Indicator">,</span> <span class="nv">bar</span><span class="p p-Indicator">:</span> <span class="nv">baz</span> <span class="p p-Indicator">}</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">dump</span><span class="p">(</span><span class="nv">$array</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">foo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bar</span>
<span class="l l-Scalar l-Scalar-Plain">bar</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">foo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bar</span>
    <span class="l l-Scalar l-Scalar-Plain">bar</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">baz</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="indentation">
<h4>Indentation</h4>
<p>By default, the YAML component will use 4 spaces for indentation. This can be
changed using the third argument as follows:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// uses 8 spaces for indentation</span>
<span class="k">echo</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">dump</span><span class="p">(</span><span class="nv">$array</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">foo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bar</span>
<span class="l l-Scalar l-Scalar-Plain">bar</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">foo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bar</span>
        <span class="l l-Scalar l-Scalar-Plain">bar</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">baz</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="numeric-literals">
<h4>Numeric Literals</h4>
<p>Long numeric literals, being integer, float or hexadecimal, are known for their
poor readability in code and configuration files. That’s why YAML files allow to
add underscores to improve their readability:</p>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">credit_card_number</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1234_5678_9012_3456</span>
    <span class="l l-Scalar l-Scalar-Plain">long_number</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10_000_000_000</span>
    <span class="l l-Scalar l-Scalar-Plain">pi</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">3.14159_26535_89793</span>
    <span class="l l-Scalar l-Scalar-Plain">hex_words</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0x_CAFE_F00D</span>
</pre></div>
</td></tr></table></div>
<p>During the parsing of the YAML contents, all the <code class="docutils literal notranslate"><span class="pre">_</span></code> characters are removed
from the numeric literal contents, so there is not a limit in the number of
underscores you can include or the way you group contents.</p>
</div>
</div>
</div>
<div class="section" id="advanced-usage-flags">
<h2>Advanced Usage: Flags</h2>
<div class="section" id="object-parsing-and-dumping">
<span id="objects-for-mappings"></span><h3>Object Parsing and Dumping</h3>
<p>You can dump objects by using the <code class="docutils literal notranslate"><span class="pre">DUMP_OBJECT</span></code> flag:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$object</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\stdClass</span><span class="p">();</span>
<span class="nv">$object</span><span class="o">-&gt;</span><span class="na">foo</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span><span class="p">;</span>

<span class="nv">$dumped</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">dump</span><span class="p">(</span><span class="nv">$object</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">DUMP_OBJECT</span><span class="p">);</span>
<span class="c1">// !php/object &#39;O:8:&quot;stdClass&quot;:1:{s:5:&quot;foo&quot;;s:7:&quot;bar&quot;;}&#39;</span>
</pre></div>
</div>
<p>And parse them by using the <code class="docutils literal notranslate"><span class="pre">PARSE_OBJECT</span></code> flag:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$parsed</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">parse</span><span class="p">(</span><span class="nv">$dumped</span><span class="p">,</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">PARSE_OBJECT</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">is_object</span><span class="p">(</span><span class="nv">$parsed</span><span class="p">));</span> <span class="c1">// true</span>
<span class="k">echo</span> <span class="nv">$parsed</span><span class="o">-&gt;</span><span class="na">foo</span><span class="p">;</span> <span class="c1">// bar</span>
</pre></div>
</div>
<p>The YAML component uses PHP’s <code class="docutils literal notranslate"><span class="pre">serialize()</span></code> method to generate a string
representation of the object.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Object serialization is specific to this implementation, other PHP YAML
parsers will likely not recognize the <code class="docutils literal notranslate"><span class="pre">php/object</span></code> tag and non-PHP
implementations certainly won’t - use with discretion!</p>
</div>
</div>
<div class="section" id="parsing-and-dumping-objects-as-maps">
<h3>Parsing and Dumping Objects as Maps</h3>
<p>You can dump objects as Yaml maps by using the <code class="docutils literal notranslate"><span class="pre">DUMP_OBJECT_AS_MAP</span></code> flag:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$object</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\stdClass</span><span class="p">();</span>
<span class="nv">$object</span><span class="o">-&gt;</span><span class="na">foo</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span><span class="p">;</span>

<span class="nv">$dumped</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">dump</span><span class="p">([</span><span class="s1">&#39;data&#39;</span> <span class="o">=&gt;</span> <span class="nv">$object</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">DUMP_OBJECT_AS_MAP</span><span class="p">);</span>
<span class="c1">// $dumped = &quot;data:\n    foo: bar&quot;</span>
</pre></div>
</div>
<p>And parse them by using the <code class="docutils literal notranslate"><span class="pre">PARSE_OBJECT_FOR_MAP</span></code> flag:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$parsed</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">parse</span><span class="p">(</span><span class="nv">$dumped</span><span class="p">,</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">PARSE_OBJECT_FOR_MAP</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">is_object</span><span class="p">(</span><span class="nv">$parsed</span><span class="p">));</span> <span class="c1">// true</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">is_object</span><span class="p">(</span><span class="nv">$parsed</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">));</span> <span class="c1">// true</span>
<span class="k">echo</span> <span class="nv">$parsed</span><span class="o">-&gt;</span><span class="na">data</span><span class="o">-&gt;</span><span class="na">foo</span><span class="p">;</span> <span class="c1">// bar</span>
</pre></div>
</div>
<p>The YAML component uses PHP’s <code class="docutils literal notranslate"><span class="pre">(array)</span></code> casting to generate a string
representation of the object as a map.</p>
</div>
<div class="section" id="handling-invalid-types">
<span id="invalid-types-and-object-serialization"></span><h3>Handling Invalid Types</h3>
<p>By default, the parser will encode invalid types as <code class="docutils literal notranslate"><span class="pre">null</span></code>. You can make the
parser throw exceptions by using the <code class="docutils literal notranslate"><span class="pre">PARSE_EXCEPTION_ON_INVALID_TYPE</span></code>
flag:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$yaml</span> <span class="o">=</span> <span class="s1">&#39;!php/object \&#39;O:8:&quot;stdClass&quot;:1:{s:5:&quot;foo&quot;;s:7:&quot;bar&quot;;}\&#39;&#39;</span><span class="p">;</span>
<span class="nx">Yaml</span><span class="o">::</span><span class="na">parse</span><span class="p">(</span><span class="nv">$yaml</span><span class="p">,</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">PARSE_EXCEPTION_ON_INVALID_TYPE</span><span class="p">);</span> <span class="c1">// throws an exception</span>
</pre></div>
</div>
<p>Similarly you can use <code class="docutils literal notranslate"><span class="pre">DUMP_EXCEPTION_ON_INVALID_TYPE</span></code> when dumping:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$data</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\stdClass</span><span class="p">();</span> <span class="c1">// by default objects are invalid.</span>
<span class="nx">Yaml</span><span class="o">::</span><span class="na">dump</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">DUMP_EXCEPTION_ON_INVALID_TYPE</span><span class="p">);</span> <span class="c1">// throws an exception</span>
</pre></div>
</div>
</div>
<div class="section" id="date-handling">
<h3>Date Handling</h3>
<p>By default, the YAML parser will convert unquoted strings which look like a
date or a date-time into a Unix timestamp; for example <code class="docutils literal notranslate"><span class="pre">2016-05-27</span></code> or
<code class="docutils literal notranslate"><span class="pre">2016-05-27T02:59:43.1Z</span></code> (<a class="reference external" href="https://www.iso.org/iso-8601-date-and-time-format.html">ISO-8601</a><span class="link-target"> [https://www.iso.org/iso-8601-date-and-time-format.html]</span>):</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nx">Yaml</span><span class="o">::</span><span class="na">parse</span><span class="p">(</span><span class="s1">&#39;2016-05-27&#39;</span><span class="p">);</span> <span class="c1">// 1464307200</span>
</pre></div>
</div>
<p>You can make it convert to a <code class="docutils literal notranslate"><span class="pre">DateTime</span></code> instance by using the <code class="docutils literal notranslate"><span class="pre">PARSE_DATETIME</span></code>
flag:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$date</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">parse</span><span class="p">(</span><span class="s1">&#39;2016-05-27&#39;</span><span class="p">,</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">PARSE_DATETIME</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">get_class</span><span class="p">(</span><span class="nv">$date</span><span class="p">));</span> <span class="c1">// DateTime</span>
</pre></div>
</div>
</div>
<div class="section" id="dumping-multi-line-literal-blocks">
<h3>Dumping Multi-line Literal Blocks</h3>
<p>In YAML, multiple lines can be represented as literal blocks. By default, the
dumper will encode multiple lines as an inline string:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$string</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;string&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Multiple</span><span class="se">\n</span><span class="s2">Line</span><span class="se">\n</span><span class="s2">String&quot;</span><span class="p">];</span>
<span class="nv">$yaml</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">dump</span><span class="p">(</span><span class="nv">$string</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$yaml</span><span class="p">;</span> <span class="c1">// string: &quot;Multiple\nLine\nString&quot;</span>
</pre></div>
</div>
<p>You can make it use a literal block with the <code class="docutils literal notranslate"><span class="pre">DUMP_MULTI_LINE_LITERAL_BLOCK</span></code>
flag:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$string</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;string&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Multiple</span><span class="se">\n</span><span class="s2">Line</span><span class="se">\n</span><span class="s2">String&quot;</span><span class="p">];</span>
<span class="nv">$yaml</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">dump</span><span class="p">(</span><span class="nv">$string</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">DUMP_MULTI_LINE_LITERAL_BLOCK</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$yaml</span><span class="p">;</span>
<span class="c1">//  string: |</span>
<span class="c1">//       Multiple</span>
<span class="c1">//       Line</span>
<span class="c1">//       String</span>
</pre></div>
</div>
</div>
<div class="section" id="parsing-php-constants">
<h3>Parsing PHP Constants</h3>
<p>By default, the YAML parser treats the PHP constants included in the contents as
regular strings. Use the <code class="docutils literal notranslate"><span class="pre">PARSE_CONSTANT</span></code> flag and the special <code class="docutils literal notranslate"><span class="pre">!php/const</span></code>
syntax to parse them as proper PHP constants:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$yaml</span> <span class="o">=</span> <span class="s1">&#39;{ foo: PHP_INT_SIZE, bar: !php/const PHP_INT_SIZE }&#39;</span><span class="p">;</span>
<span class="nv">$parameters</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">parse</span><span class="p">(</span><span class="nv">$yaml</span><span class="p">,</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">PARSE_CONSTANT</span><span class="p">);</span>
<span class="c1">// $parameters = [&#39;foo&#39; =&gt; &#39;PHP_INT_SIZE&#39;, &#39;bar&#39; =&gt; 8];</span>
</pre></div>
</div>
</div>
<div class="section" id="parsing-and-dumping-of-binary-data">
<h3>Parsing and Dumping of Binary Data</h3>
<p>You can dump binary data by using the <code class="docutils literal notranslate"><span class="pre">DUMP_BASE64_BINARY_DATA</span></code> flag:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$imageContents</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="no">__DIR__</span><span class="o">.</span><span class="s1">&#39;/images/logo.png&#39;</span><span class="p">);</span>

<span class="nv">$dumped</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">dump</span><span class="p">([</span><span class="s1">&#39;logo&#39;</span> <span class="o">=&gt;</span> <span class="nv">$imageContents</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">DUMP_BASE64_BINARY_DATA</span><span class="p">);</span>
<span class="c1">// logo: !!binary iVBORw0KGgoAAAANSUhEUgAAA6oAAADqCAY...</span>
</pre></div>
</div>
<p>Binary data is automatically parsed if they include the <code class="docutils literal notranslate"><span class="pre">!!binary</span></code> YAML tag
(there’s no need to pass any flag to the Yaml parser):</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$dumped</span> <span class="o">=</span> <span class="s1">&#39;logo: !!binary iVBORw0KGgoAAAANSUhEUgAAA6oAAADqCAY...&#39;</span><span class="p">;</span>
<span class="nv">$parsed</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">parse</span><span class="p">(</span><span class="nv">$dumped</span><span class="p">);</span>
<span class="nv">$imageContents</span> <span class="o">=</span> <span class="nv">$parsed</span><span class="p">[</span><span class="s1">&#39;logo&#39;</span><span class="p">];</span>
</pre></div>
</div>
</div>
<div class="section" id="parsing-and-dumping-custom-tags">
<h3>Parsing and Dumping Custom Tags</h3>
<p>In addition to the built-in support of tags like <code class="docutils literal notranslate"><span class="pre">!php/const</span></code> and
<code class="docutils literal notranslate"><span class="pre">!!binary</span></code>, you can define your own custom YAML tags and parse them with the
<code class="docutils literal notranslate"><span class="pre">PARSE_CUSTOM_TAGS</span></code> flag:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$data</span> <span class="o">=</span> <span class="s2">&quot;!my_tag { foo: bar }&quot;</span><span class="p">;</span>
<span class="nv">$parsed</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">parse</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">PARSE_CUSTOM_TAGS</span><span class="p">);</span>
<span class="c1">// $parsed = Symfony\Component\Yaml\Tag\TaggedValue(&#39;my_tag&#39;, [&#39;foo&#39; =&gt; &#39;bar&#39;]);</span>
<span class="nv">$tagName</span> <span class="o">=</span> <span class="nv">$parsed</span><span class="o">-&gt;</span><span class="na">getTag</span><span class="p">();</span>    <span class="c1">// $tagName = &#39;my_tag&#39;</span>
<span class="nv">$tagValue</span> <span class="o">=</span> <span class="nv">$parsed</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">();</span> <span class="c1">// $tagValue = [&#39;foo&#39; =&gt; &#39;bar&#39;]</span>
</pre></div>
</div>
<p>If the contents to dump contain <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Tag/TaggedValue.php" title="Symfony\Component\Yaml\Tag\TaggedValue"><span class="pre">TaggedValue</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Tag/TaggedValue.php]</span></span></code>
objects, they are automatically transformed into YAML tags:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Yaml\Tag\TaggedValue</span><span class="p">;</span>

<span class="nv">$data</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TaggedValue</span><span class="p">(</span><span class="s1">&#39;my_tag&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span><span class="p">]);</span>
<span class="nv">$dumped</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">dump</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
<span class="c1">// $dumped = &#39;!my_tag { foo: bar }&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="dumping-null-values">
<h3>Dumping Null Values</h3>
<p>The official YAML specification uses both <code class="docutils literal notranslate"><span class="pre">null</span></code> and <code class="docutils literal notranslate"><span class="pre">~</span></code> to represent null
values. This component uses <code class="docutils literal notranslate"><span class="pre">null</span></code> by default when dumping null values but
you can dump them as <code class="docutils literal notranslate"><span class="pre">~</span></code> with the <code class="docutils literal notranslate"><span class="pre">DUMP_NULL_AS_TILDE</span></code> flag:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$dumped</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">dump</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">]);</span>
<span class="c1">// foo: null</span>

<span class="nv">$dumped</span> <span class="o">=</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">dump</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">Yaml</span><span class="o">::</span><span class="na">DUMP_NULL_AS_TILDE</span><span class="p">);</span>
<span class="c1">// foo: ~</span>
</pre></div>
</div>
</div>
<div class="section" id="syntax-validation">
<h3>Syntax Validation</h3>
<p>The syntax of YAML contents can be validated through the CLI using the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Command/LintCommand.php" title="Symfony\Component\Yaml\Command\LintCommand"><span class="pre">LintCommand</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Yaml/Command/LintCommand.php]</span></span></code> command.</p>
<p>First, install the Console component:</p>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> composer require symfony/console
</pre></div>
</td></tr></table></div>
<p>Create a console application with <code class="docutils literal notranslate"><span class="pre">lint:yaml</span></code> as its only command:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// lint.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Application</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Yaml\Command\LintCommand</span><span class="p">;</span>

<span class="p">(</span><span class="k">new</span> <span class="nx">Application</span><span class="p">(</span><span class="s1">&#39;yaml/lint&#39;</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">LintCommand</span><span class="p">())</span>
    <span class="o">-&gt;</span><span class="na">getApplication</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">setDefaultCommand</span><span class="p">(</span><span class="s1">&#39;lint:yaml&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">run</span><span class="p">();</span>
</pre></div>
</div>
<p>Then, execute the script for validating contents:</p>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># validates a single file</span>
<span class="gp">$</span> php lint.php path/to/file.yaml

<span class="c1"># or validates multiple files</span>
<span class="gp">$</span> php lint.php path/to/file1.yaml path/to/file2.yaml

<span class="c1"># or all the files in a directory</span>
<span class="gp">$</span> php lint.php path/to/directory

<span class="c1"># or all the files in multiple directories</span>
<span class="gp">$</span> php lint.php path/to/directory1 path/to/directory2

<span class="c1"># or contents passed to STDIN</span>
<span class="gp">$</span> cat path/to/file.yaml <span class="p">|</span> php lint.php
</pre></div>
</td></tr></table></div>
<p>The result is written to STDOUT and uses a plain text format by default.
Add the <code class="docutils literal notranslate"><span class="pre">--format</span></code> option to get the output in JSON format:</p>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> php lint.php path/to/file.yaml --format json
</pre></div>
</td></tr></table></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The linting command will also report any deprecations in the checked
YAML files. This may for example be useful for recognizing deprecations of
contents of YAML files during automated tests.</p>
</div>
</div>
</div>
<div class="section" id="learn-more">
<h2>Learn More</h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="yaml/yaml_format.xhtml">The YAML Format</a></li>
</ul>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>