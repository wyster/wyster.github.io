<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>Understanding how Console Arguments and Options Are Handled</title>
    <link rel="stylesheet" href="../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/rtd_custom.css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="understanding-how-console-arguments-and-options-are-handled">
<span id="index-0"></span><h1>Understanding how Console Arguments and Options Are Handled</h1>
<p>Symfony Console applications follow the same <a class="reference external" href="http://docopt.org/">docopt</a><span class="link-target"> [http://docopt.org/]</span> standard used in most
CLI utility tools. This article explains how to handle edge-cases when the
commands define options with required values, without values, etc. Read
<a class="reference internal" href="../../console/input.xhtml"><span class="doc">this other article</span></a> to learn about using arguments and
options inside Symfony Console commands.</p>
<p>Have a look at the following command that has three options:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">Acme\Console\Command</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Console\Command\Command</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Input\InputArgument</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Input\InputDefinition</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Input\InputInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Input\InputOption</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Output\OutputInterface</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">DemoArgsCommand</span> <span class="k">extends</span> <span class="nx">Command</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="k">static</span> <span class="nv">$defaultName</span> <span class="o">=</span> <span class="s1">&#39;demo:args&#39;</span><span class="p">;</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">configure</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span>
            <span class="o">-&gt;</span><span class="na">setDescription</span><span class="p">(</span><span class="s1">&#39;Describe args behaviors&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setDefinition</span><span class="p">(</span>
                <span class="k">new</span> <span class="nx">InputDefinition</span><span class="p">([</span>
                    <span class="k">new</span> <span class="nx">InputOption</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">),</span>
                    <span class="k">new</span> <span class="nx">InputOption</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="nx">InputOption</span><span class="o">::</span><span class="na">VALUE_REQUIRED</span><span class="p">),</span>
                    <span class="k">new</span> <span class="nx">InputOption</span><span class="p">(</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="nx">InputOption</span><span class="o">::</span><span class="na">VALUE_OPTIONAL</span><span class="p">),</span>
                <span class="p">])</span>
            <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Since the <code class="docutils literal notranslate"><span class="pre">foo</span></code> option doesn’t accept a value, it will be either <code class="docutils literal notranslate"><span class="pre">false</span></code>
(when it is not passed to the command) or <code class="docutils literal notranslate"><span class="pre">true</span></code> (when <code class="docutils literal notranslate"><span class="pre">--foo</span></code> was passed
by the user). The value of the <code class="docutils literal notranslate"><span class="pre">bar</span></code> option (and its <code class="docutils literal notranslate"><span class="pre">b</span></code> shortcut respectively)
is required. It can be separated from the option name either by spaces or
<code class="docutils literal notranslate"><span class="pre">=</span></code> characters. The <code class="docutils literal notranslate"><span class="pre">cat</span></code> option (and its <code class="docutils literal notranslate"><span class="pre">c</span></code> shortcut) behaves similar
except that it doesn’t require a value. Have a look at the following table
to get an overview of the possible ways to pass options:</p>
<table class="docutils">
<colgroup>
<col style="width: 39%" />
<col style="width: 17%" />
<col style="width: 22%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Input</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">foo</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">bar</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">cat</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--bar=Hello</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;Hello&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--bar</span> <span class="pre">Hello</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;Hello&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-b=Hello</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;=Hello&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-b</span> <span class="pre">Hello</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;Hello&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-bHello</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;Hello&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-fcWorld</span> <span class="pre">-b</span> <span class="pre">Hello</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;Hello&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;World&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-cfWorld</span> <span class="pre">-b</span> <span class="pre">Hello</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;Hello&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;fWorld&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-cbWorld</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;bWorld&quot;</span></code></p></td>
</tr>
</tbody>
</table>
<p>Things get a little bit more tricky when the command also accepts an optional
argument:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// ...</span>

<span class="k">new</span> <span class="nx">InputDefinition</span><span class="p">([</span>
    <span class="c1">// ...</span>
    <span class="k">new</span> <span class="nx">InputArgument</span><span class="p">(</span><span class="s1">&#39;arg&#39;</span><span class="p">,</span> <span class="nx">InputArgument</span><span class="o">::</span><span class="na">OPTIONAL</span><span class="p">),</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>You might have to use the special <code class="docutils literal notranslate"><span class="pre">--</span></code> separator to separate options from
arguments. Have a look at the fifth example in the following table where it
is used to tell the command that <code class="docutils literal notranslate"><span class="pre">World</span></code> is the value for <code class="docutils literal notranslate"><span class="pre">arg</span></code> and not
the value of the optional <code class="docutils literal notranslate"><span class="pre">cat</span></code> option:</p>
<table class="docutils">
<colgroup>
<col style="width: 43%" />
<col style="width: 25%" />
<col style="width: 16%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Input</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">bar</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">cat</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">arg</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--bar</span> <span class="pre">Hello</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;Hello&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--bar</span> <span class="pre">Hello</span> <span class="pre">World</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;Hello&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;World&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--bar</span> <span class="pre">&quot;Hello</span> <span class="pre">World&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;Hello</span> <span class="pre">World&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--bar</span> <span class="pre">Hello</span> <span class="pre">--cat</span> <span class="pre">World</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;Hello&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;World&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--bar</span> <span class="pre">Hello</span> <span class="pre">--cat</span> <span class="pre">--</span> <span class="pre">World</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;Hello&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;World&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-b</span> <span class="pre">Hello</span> <span class="pre">-c</span> <span class="pre">World</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;Hello&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;World&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
</tr>
</tbody>
</table>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>