<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>The HttpFoundation Component</title>
    <link rel="stylesheet" href="../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/rtd_custom.css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-httpfoundation-component">
<span id="index-0"></span><h1>The HttpFoundation Component</h1>
<blockquote>
<div><p>The HttpFoundation component defines an object-oriented layer for the HTTP
specification.</p>
</div></blockquote>
<p>In PHP, the request is represented by some global variables (<code class="docutils literal notranslate"><span class="pre">$_GET</span></code>,
<code class="docutils literal notranslate"><span class="pre">$_POST</span></code>, <code class="docutils literal notranslate"><span class="pre">$_FILES</span></code>, <code class="docutils literal notranslate"><span class="pre">$_COOKIE</span></code>, <code class="docutils literal notranslate"><span class="pre">$_SESSION</span></code>, …) and the response is
generated by some functions (<code class="docutils literal notranslate"><span class="pre">echo</span></code>, <code class="docutils literal notranslate"><span class="pre">header()</span></code>, <code class="docutils literal notranslate"><span class="pre">setcookie()</span></code>, …).</p>
<p>The Symfony HttpFoundation component replaces these default PHP global
variables and functions by an object-oriented layer.</p>
<div class="section" id="installation">
<h2>Installation</h2>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> composer require symfony/http-foundation
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you install this component outside of a Symfony application, you must
require the <code class="docutils literal notranslate"><span class="pre">vendor/autoload.php</span></code> file in your code to enable the class
autoloading mechanism provided by Composer. Read
<a class="reference internal" href="using_components.xhtml"><span class="doc">this article</span></a> for more details.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>This article explains how to use the HttpFoundation features as an
independent component in any PHP application. In Symfony applications
everything is already configured and ready to use. Read the <a class="reference internal" href="../controller.xhtml"><span class="doc">Controller</span></a>
article to learn about how to use these features when creating controllers.</p>
</div>
</div>
<div class="section" id="request">
<span id="component-http-foundation-request"></span><h2>Request</h2>
<p>The most common way to create a request is to base it on the current PHP global
variables with
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request::createFromGlobals()"><span class="pre">createFromGlobals()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Request</span><span class="p">;</span>

<span class="nv">$request</span> <span class="o">=</span> <span class="nx">Request</span><span class="o">::</span><span class="na">createFromGlobals</span><span class="p">();</span>
</pre></div>
</div>
<p>which is almost equivalent to the more verbose, but also more flexible,
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request::__construct()"><span class="pre">__construct()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code> call:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Request</span><span class="p">(</span>
    <span class="nv">$_GET</span><span class="p">,</span>
    <span class="nv">$_POST</span><span class="p">,</span>
    <span class="p">[],</span>
    <span class="nv">$_COOKIE</span><span class="p">,</span>
    <span class="nv">$_FILES</span><span class="p">,</span>
    <span class="nv">$_SERVER</span>
<span class="p">);</span>
</pre></div>
</div>
<div class="section" id="accessing-request-data">
<span id="id1"></span><h3>Accessing Request Data</h3>
<p>A Request object holds information about the client request. This information
can be accessed via several public properties:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">request</span></code>: equivalent of <code class="docutils literal notranslate"><span class="pre">$_POST</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">query</span></code>: equivalent of <code class="docutils literal notranslate"><span class="pre">$_GET</span></code> (<code class="docutils literal notranslate"><span class="pre">$request-&gt;query-&gt;get('name')</span></code>);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookies</span></code>: equivalent of <code class="docutils literal notranslate"><span class="pre">$_COOKIE</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">attributes</span></code>: no equivalent - used by your app to store other data (see <a class="reference internal" href="#component-foundation-attributes"><span class="std std-ref">below</span></a>);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">files</span></code>: equivalent of <code class="docutils literal notranslate"><span class="pre">$_FILES</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">server</span></code>: equivalent of <code class="docutils literal notranslate"><span class="pre">$_SERVER</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">headers</span></code>: mostly equivalent to a subset of <code class="docutils literal notranslate"><span class="pre">$_SERVER</span></code>
(<code class="docutils literal notranslate"><span class="pre">$request-&gt;headers-&gt;get('User-Agent')</span></code>).</p></li>
</ul>
<p>Each property is a <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code>
instance (or a sub-class of), which is a data holder class:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">request</span></code>: <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">query</span></code>:   <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookies</span></code>: <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">attributes</span></code>: <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">files</span></code>:   <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/FileBag.php" title="Symfony\Component\HttpFoundation\FileBag"><span class="pre">FileBag</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/FileBag.php]</span></span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">server</span></code>:  <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ServerBag.php" title="Symfony\Component\HttpFoundation\ServerBag"><span class="pre">ServerBag</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ServerBag.php]</span></span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">headers</span></code>: <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/HeaderBag.php" title="Symfony\Component\HttpFoundation\HeaderBag"><span class="pre">HeaderBag</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/HeaderBag.php]</span></span></code>.</p></li>
</ul>
<p>All <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code> instances have
methods to retrieve and update their data:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag::all()"><span class="pre">all()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code></dt>
<dd><p>Returns the parameters.</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag::keys()"><span class="pre">keys()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code></dt>
<dd><p>Returns the parameter keys.</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag::replace()"><span class="pre">replace()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code></dt>
<dd><p>Replaces the current parameters by a new set.</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag::add()"><span class="pre">add()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code></dt>
<dd><p>Adds parameters.</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag::get()"><span class="pre">get()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code></dt>
<dd><p>Returns a parameter by name.</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag::set()"><span class="pre">set()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code></dt>
<dd><p>Sets a parameter by name.</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag::has()"><span class="pre">has()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the parameter is defined.</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag::remove()"><span class="pre">remove()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code></dt>
<dd><p>Removes a parameter.</p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code> instance also
has some methods to filter the input values:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag::getAlpha()"><span class="pre">getAlpha()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code></dt>
<dd><p>Returns the alphabetic characters of the parameter value;</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag::getAlnum()"><span class="pre">getAlnum()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code></dt>
<dd><p>Returns the alphabetic characters and digits of the parameter value;</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag::getBoolean()"><span class="pre">getBoolean()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code></dt>
<dd><p>Returns the parameter value converted to boolean;</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag::getDigits()"><span class="pre">getDigits()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code></dt>
<dd><p>Returns the digits of the parameter value;</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag::getInt()"><span class="pre">getInt()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code></dt>
<dd><p>Returns the parameter value converted to integer;</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag::filter()"><span class="pre">filter()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code></dt>
<dd><p>Filters the parameter by using the PHP <code class="docutils literal notranslate"><a class="reference external" href="https://www.php.net/manual/en/function.filter-var.php" title="filter_var"><span class="pre">filter_var</span></a><span class="link-target"> <span class="pre">[https://www.php.net/manual/en/function.filter-var.php]</span></span></code> function.</p>
</dd>
</dl>
<p>All getters take up to two arguments: the first one is the parameter name
and the second one is the default value to return if the parameter does not
exist:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// the query string is &#39;?foo=bar&#39;</span>

<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">query</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">);</span>
<span class="c1">// returns &#39;bar&#39;</span>

<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">query</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>
<span class="c1">// returns null</span>

<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">query</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">);</span>
<span class="c1">// returns &#39;baz&#39;</span>
</pre></div>
</div>
<p>When PHP imports the request query, it handles request parameters like
<code class="docutils literal notranslate"><span class="pre">foo[bar]=baz</span></code> in a special way as it creates an array. So you can get the
<code class="docutils literal notranslate"><span class="pre">foo</span></code> parameter and you will get back an array with a <code class="docutils literal notranslate"><span class="pre">bar</span></code> element:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// the query string is &#39;?foo[bar]=baz&#39;</span>

<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">query</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">);</span>
<span class="c1">// returns [&#39;bar&#39; =&gt; &#39;baz&#39;]</span>

<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">query</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;foo[bar]&#39;</span><span class="p">);</span>
<span class="c1">// returns null</span>

<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">query</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)[</span><span class="s1">&#39;bar&#39;</span><span class="p">];</span>
<span class="c1">// returns &#39;baz&#39;</span>
</pre></div>
</div>
<p id="component-foundation-attributes">Thanks to the public <code class="docutils literal notranslate"><span class="pre">attributes</span></code> property, you can store additional data
in the request, which is also an instance of
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php]</span></span></code>. This is mostly used
to attach information that belongs to the Request and that needs to be
accessed from many different points in your application.</p>
<p>Finally, the raw data sent with the request body can be accessed using
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request::getContent()"><span class="pre">getContent()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$content</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getContent</span><span class="p">();</span>
</pre></div>
</div>
<p>For instance, this may be useful to process a JSON string sent to the
application by a remote service using the HTTP POST method.</p>
</div>
<div class="section" id="identifying-a-request">
<h3>Identifying a Request</h3>
<p>In your application, you need a way to identify a request; most of the time,
this is done via the “path info” of the request, which can be accessed via the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request::getPathInfo()"><span class="pre">getPathInfo()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code> method:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// for a request to http://example.com/blog/index.php/post/hello-world</span>
<span class="c1">// the path info is &quot;/post/hello-world&quot;</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getPathInfo</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="simulating-a-request">
<h3>Simulating a Request</h3>
<p>Instead of creating a request based on the PHP globals, you can also simulate
a request:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span> <span class="o">=</span> <span class="nx">Request</span><span class="o">::</span><span class="na">create</span><span class="p">(</span>
    <span class="s1">&#39;/hello-world&#39;</span><span class="p">,</span>
    <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Fabien&#39;</span><span class="p">]</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request::create()"><span class="pre">create()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code> method
creates a request based on a URI, a method and some parameters (the
query parameters or the request ones depending on the HTTP method); and of
course, you can also override all other variables as well (by default, Symfony
creates sensible defaults for all the PHP global variables).</p>
<p>Based on such a request, you can override the PHP global variables via
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request::overrideGlobals()"><span class="pre">overrideGlobals()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">overrideGlobals</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can also duplicate an existing request via
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request::duplicate()"><span class="pre">duplicate()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code> or
change a bunch of parameters with a single call to
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request::initialize()"><span class="pre">initialize()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code>.</p>
</div>
</div>
<div class="section" id="accessing-the-session">
<h3>Accessing the Session</h3>
<p>If you have a session attached to the request, you can access it via the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request::getSession()"><span class="pre">getSession()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code> method;
the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request::hasPreviousSession()"><span class="pre">hasPreviousSession()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code>
method tells you if the request contains a session which was started in one of
the previous requests.</p>
</div>
<div class="section" id="processing-http-headers">
<h3>Processing HTTP Headers</h3>
<p>Processing HTTP headers is not a trivial task because of the escaping and white
space handling of their contents. Symfony provides a
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/HeaderUtils.php" title="Symfony\Component\HttpFoundation\HeaderUtils"><span class="pre">HeaderUtils</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/HeaderUtils.php]</span></span></code> class that abstracts
this complexity and defines some methods for the most common tasks:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\HeaderUtils</span><span class="p">;</span>

<span class="c1">// Splits an HTTP header by one or more separators</span>
<span class="nx">HeaderUtils</span><span class="o">::</span><span class="na">split</span><span class="p">(</span><span class="s1">&#39;da, en-gb;q=0.8&#39;</span><span class="p">,</span> <span class="s1">&#39;,;&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; [[&#39;da&#39;], [&#39;en-gb&#39;,&#39;q=0.8&#39;]]</span>

<span class="c1">// Combines an array of arrays into one associative array</span>
<span class="nx">HeaderUtils</span><span class="o">::</span><span class="na">combine</span><span class="p">([[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;abc&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">]]);</span>
<span class="c1">// =&gt; [&#39;foo&#39; =&gt; &#39;abc&#39;, &#39;bar&#39; =&gt; true]</span>

<span class="c1">// Joins an associative array into a string for use in an HTTP header</span>
<span class="nx">HeaderUtils</span><span class="o">::</span><span class="na">toString</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;a b c&#39;</span><span class="p">],</span> <span class="s1">&#39;,&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; &#39;foo=abc, bar, baz=&quot;a b c&quot;&#39;</span>

<span class="c1">// Encodes a string as a quoted string, if necessary</span>
<span class="nx">HeaderUtils</span><span class="o">::</span><span class="na">quote</span><span class="p">(</span><span class="s1">&#39;foo &quot;bar&quot;&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; &#39;&quot;foo \&quot;bar\&quot;&quot;&#39;</span>

<span class="c1">// Decodes a quoted string</span>
<span class="nx">HeaderUtils</span><span class="o">::</span><span class="na">unquote</span><span class="p">(</span><span class="s1">&#39;&quot;foo \&quot;bar\&quot;&quot;&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; &#39;foo &quot;bar&quot;&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="accessing-accept-headers-data">
<h3>Accessing <code class="docutils literal notranslate"><span class="pre">Accept-*</span></code> Headers Data</h3>
<p>You can access basic data extracted from <code class="docutils literal notranslate"><span class="pre">Accept-*</span></code> headers
by using the following methods:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request::getAcceptableContentTypes()"><span class="pre">getAcceptableContentTypes()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code></dt>
<dd><p>Returns the list of accepted content types ordered by descending quality.</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request::getLanguages()"><span class="pre">getLanguages()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code></dt>
<dd><p>Returns the list of accepted languages ordered by descending quality.</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request::getCharsets()"><span class="pre">getCharsets()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code></dt>
<dd><p>Returns the list of accepted charsets ordered by descending quality.</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request::getEncodings()"><span class="pre">getEncodings()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code></dt>
<dd><p>Returns the list of accepted encodings ordered by descending quality.</p>
</dd>
</dl>
<p>If you need to get full access to parsed data from <code class="docutils literal notranslate"><span class="pre">Accept</span></code>, <code class="docutils literal notranslate"><span class="pre">Accept-Language</span></code>,
<code class="docutils literal notranslate"><span class="pre">Accept-Charset</span></code> or <code class="docutils literal notranslate"><span class="pre">Accept-Encoding</span></code>, you can use
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/AcceptHeader.php" title="Symfony\Component\HttpFoundation\AcceptHeader"><span class="pre">AcceptHeader</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/AcceptHeader.php]</span></span></code> utility class:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\AcceptHeader</span><span class="p">;</span>

<span class="nv">$acceptHeader</span> <span class="o">=</span> <span class="nx">AcceptHeader</span><span class="o">::</span><span class="na">fromString</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Accept&#39;</span><span class="p">));</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$acceptHeader</span><span class="o">-&gt;</span><span class="na">has</span><span class="p">(</span><span class="s1">&#39;text/html&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$item</span> <span class="o">=</span> <span class="nv">$acceptHeader</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;text/html&#39;</span><span class="p">);</span>
    <span class="nv">$charset</span> <span class="o">=</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">getAttribute</span><span class="p">(</span><span class="s1">&#39;charset&#39;</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">);</span>
    <span class="nv">$quality</span> <span class="o">=</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">getQuality</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Accept header items are sorted by descending quality</span>
<span class="nv">$acceptHeaders</span> <span class="o">=</span> <span class="nx">AcceptHeader</span><span class="o">::</span><span class="na">fromString</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Accept&#39;</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</pre></div>
</div>
<p>The default values that can be optionally included in the <code class="docutils literal notranslate"><span class="pre">Accept-*</span></code> headers
are also supported:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$acceptHeader</span> <span class="o">=</span> <span class="s1">&#39;text/plain;q=0.5, text/html, text/*;q=0.8, */*;q=0.3&#39;</span><span class="p">;</span>
<span class="nv">$accept</span> <span class="o">=</span> <span class="nx">AcceptHeader</span><span class="o">::</span><span class="na">fromString</span><span class="p">(</span><span class="nv">$acceptHeader</span><span class="p">);</span>

<span class="nv">$quality</span> <span class="o">=</span> <span class="nv">$accept</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">getQuality</span><span class="p">();</span> <span class="c1">// $quality = 0.8</span>
<span class="nv">$quality</span> <span class="o">=</span> <span class="nv">$accept</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;application/xml&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">getQuality</span><span class="p">();</span> <span class="c1">// $quality = 0.3</span>
</pre></div>
</div>
</div>
<div class="section" id="anonymizing-ip-addresses">
<h3>Anonymizing IP Addresses</h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.4: </span>The <code class="docutils literal notranslate"><span class="pre">anonymize()</span></code> method was introduced in Symfony 4.4.</p>
</div>
<p>An increasingly common need for applications to comply with user protection
regulations is to anonymize IP addresses before logging and storing them for
analysis purposes. Use the <code class="docutils literal notranslate"><span class="pre">anonymize()</span></code> method from the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/IpUtils.php" title="Symfony\Component\HttpFoundation\IpUtils"><span class="pre">IpUtils</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/IpUtils.php]</span></span></code> to do that:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\IpUtils</span><span class="p">;</span>

<span class="nv">$ipv4</span> <span class="o">=</span> <span class="s1">&#39;123.234.235.236&#39;</span><span class="p">;</span>
<span class="nv">$anonymousIpv4</span> <span class="o">=</span> <span class="nx">IPUtils</span><span class="o">::</span><span class="na">anonymize</span><span class="p">(</span><span class="nv">$ipv4</span><span class="p">);</span>
<span class="c1">// $anonymousIpv4 = &#39;123.234.235.0&#39;</span>

<span class="nv">$ipv6</span> <span class="o">=</span> <span class="s1">&#39;2a01:198:603:10:396e:4789:8e99:890f&#39;</span><span class="p">;</span>
<span class="nv">$anonymousIpv6</span> <span class="o">=</span> <span class="nx">IPUtils</span><span class="o">::</span><span class="na">anonymize</span><span class="p">(</span><span class="nv">$ipv6</span><span class="p">);</span>
<span class="c1">// $anonymousIpv6 = &#39;2a01:198:603:10::&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="accessing-other-data">
<h3>Accessing other Data</h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Request</span></code> class has many other methods that you can use to access the
request information. Have a look at
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php" title="Symfony\Component\HttpFoundation\Request"><span class="pre">the</span> <span class="pre">Request</span> <span class="pre">API</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Request.php]</span></span></code>
for more information about them.</p>
</div>
<div class="section" id="overriding-the-request">
<h3>Overriding the Request</h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Request</span></code> class should not be overridden as it is a data object that
represents an HTTP message. But when moving from a legacy system, adding
methods or changing some default behavior might help. In that case, register a
PHP callable that is able to create an instance of your <code class="docutils literal notranslate"><span class="pre">Request</span></code> class:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">App\Http\SpecialRequest</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Request</span><span class="p">;</span>

<span class="nx">Request</span><span class="o">::</span><span class="na">setFactory</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span>
    <span class="k">array</span> <span class="nv">$query</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="k">array</span> <span class="nv">$request</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="k">array</span> <span class="nv">$attributes</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="k">array</span> <span class="nv">$cookies</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="k">array</span> <span class="nv">$files</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="k">array</span> <span class="nv">$server</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nv">$content</span> <span class="o">=</span> <span class="k">null</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">SpecialRequest</span><span class="p">(</span>
        <span class="nv">$query</span><span class="p">,</span>
        <span class="nv">$request</span><span class="p">,</span>
        <span class="nv">$attributes</span><span class="p">,</span>
        <span class="nv">$cookies</span><span class="p">,</span>
        <span class="nv">$files</span><span class="p">,</span>
        <span class="nv">$server</span><span class="p">,</span>
        <span class="nv">$content</span>
    <span class="p">);</span>
<span class="p">});</span>

<span class="nv">$request</span> <span class="o">=</span> <span class="nx">Request</span><span class="o">::</span><span class="na">createFromGlobals</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="response">
<span id="component-http-foundation-response"></span><h2>Response</h2>
<p>A <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response"><span class="pre">Response</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code> object holds all the
information that needs to be sent back to the client from a given request. The
constructor takes up to three arguments: the response content, the status
code, and an array of HTTP headers:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span>
    <span class="s1">&#39;Content&#39;</span><span class="p">,</span>
    <span class="nx">Response</span><span class="o">::</span><span class="na">HTTP_OK</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;content-type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;text/html&#39;</span><span class="p">]</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This information can also be manipulated after the Response object creation:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setContent</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">);</span>

<span class="c1">// the headers public attribute is a ResponseHeaderBag</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/plain&#39;</span><span class="p">);</span>

<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setStatusCode</span><span class="p">(</span><span class="nx">Response</span><span class="o">::</span><span class="na">HTTP_NOT_FOUND</span><span class="p">);</span>
</pre></div>
</div>
<p>When setting the <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> of the Response, you can set the charset,
but it is better to set it via the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setCharset()"><span class="pre">setCharset()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code> method:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setCharset</span><span class="p">(</span><span class="s1">&#39;ISO-8859-1&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Note that by default, Symfony assumes that your Responses are encoded in
UTF-8.</p>
<div class="section" id="sending-the-response">
<h3>Sending the Response</h3>
<p>Before sending the Response, you can optionally call the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::prepare()"><span class="pre">prepare()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code> method to fix any
incompatibility with the HTTP specification (e.g. a wrong <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> header):</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
</pre></div>
</div>
<p>Sending the response to the client is done by calling the method
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::send()"><span class="pre">send()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-cookies">
<h3>Setting Cookies</h3>
<p>The response cookies can be manipulated through the <code class="docutils literal notranslate"><span class="pre">headers</span></code> public
attribute:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Cookie</span><span class="p">;</span>

<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">setCookie</span><span class="p">(</span><span class="nx">Cookie</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>The
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ResponseHeaderBag.php" title="Symfony\Component\HttpFoundation\ResponseHeaderBag::setCookie()"><span class="pre">setCookie()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ResponseHeaderBag.php]</span></span></code>
method takes an instance of
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Cookie.php" title="Symfony\Component\HttpFoundation\Cookie"><span class="pre">Cookie</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Cookie.php]</span></span></code> as an argument.</p>
<p>You can clear a cookie via the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ResponseHeaderBag.php" title="Symfony\Component\HttpFoundation\ResponseHeaderBag::clearCookie()"><span class="pre">clearCookie()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ResponseHeaderBag.php]</span></span></code> method.</p>
<p>Note you can create a
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Cookie.php" title="Symfony\Component\HttpFoundation\Cookie"><span class="pre">Cookie</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Cookie.php]</span></span></code> object from a raw header
value using <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Cookie.php" title="Symfony\Component\HttpFoundation\Cookie::fromString()"><span class="pre">fromString()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Cookie.php]</span></span></code>.</p>
</div>
<div class="section" id="managing-the-http-cache">
<h3>Managing the HTTP Cache</h3>
<p>The <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response"><span class="pre">Response</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code> class has a rich set
of methods to manipulate the HTTP headers related to the cache:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setPublic()"><span class="pre">setPublic()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code></p></li>
<li><p><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setPrivate()"><span class="pre">setPrivate()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code></p></li>
<li><p><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::expire()"><span class="pre">expire()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code></p></li>
<li><p><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setExpires()"><span class="pre">setExpires()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code></p></li>
<li><p><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setMaxAge()"><span class="pre">setMaxAge()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code></p></li>
<li><p><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setSharedMaxAge()"><span class="pre">setSharedMaxAge()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code></p></li>
<li><p><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setTtl()"><span class="pre">setTtl()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code></p></li>
<li><p><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setClientTtl()"><span class="pre">setClientTtl()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code></p></li>
<li><p><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setLastModified()"><span class="pre">setLastModified()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code></p></li>
<li><p><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setEtag()"><span class="pre">setEtag()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code></p></li>
<li><p><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setVary()"><span class="pre">setVary()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The methods <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setExpires()"><span class="pre">setExpires()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code>,
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setLastModified()"><span class="pre">setLastModified()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code> and
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setDate()"><span class="pre">setDate()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code> accept any
object that implements <code class="docutils literal notranslate"><span class="pre">\DateTimeInterface</span></code>, including immutable date objects.</p>
</div>
<p>The <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::setCache()"><span class="pre">setCache()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code> method
can be used to set the most commonly used cache information in one method
call:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setCache</span><span class="p">([</span>
    <span class="s1">&#39;etag&#39;</span>          <span class="o">=&gt;</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">,</span>
    <span class="s1">&#39;last_modified&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">\DateTime</span><span class="p">(),</span>
    <span class="s1">&#39;max_age&#39;</span>       <span class="o">=&gt;</span> <span class="mi">600</span><span class="p">,</span>
    <span class="s1">&#39;s_maxage&#39;</span>      <span class="o">=&gt;</span> <span class="mi">600</span><span class="p">,</span>
    <span class="s1">&#39;private&#39;</span>       <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
    <span class="s1">&#39;public&#39;</span>        <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="s1">&#39;immutable&#39;</span>     <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>To check if the Response validators (<code class="docutils literal notranslate"><span class="pre">ETag</span></code>, <code class="docutils literal notranslate"><span class="pre">Last-Modified</span></code>) match a
conditional value specified in the client Request, use the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response::isNotModified()"><span class="pre">isNotModified()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code>
method:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">isNotModified</span><span class="p">(</span><span class="nv">$request</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the Response is not modified, it sets the status code to 304 and removes the
actual response content.</p>
</div>
<div class="section" id="redirecting-the-user">
<span id="redirect-response"></span><h3>Redirecting the User</h3>
<p>To redirect the client to another URL, you can use the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/RedirectResponse.php" title="Symfony\Component\HttpFoundation\RedirectResponse"><span class="pre">RedirectResponse</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/RedirectResponse.php]</span></span></code> class:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\RedirectResponse</span><span class="p">;</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RedirectResponse</span><span class="p">(</span><span class="s1">&#39;http://example.com/&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="streaming-a-response">
<span id="streaming-response"></span><h3>Streaming a Response</h3>
<p>The <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/StreamedResponse.php" title="Symfony\Component\HttpFoundation\StreamedResponse"><span class="pre">StreamedResponse</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/StreamedResponse.php]</span></span></code> class allows
you to stream the Response back to the client. The response content is
represented by a PHP callable instead of a string:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\StreamedResponse</span><span class="p">;</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">StreamedResponse</span><span class="p">();</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setCallback</span><span class="p">(</span><span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">);</span>
    <span class="nb">flush</span><span class="p">();</span>
    <span class="nb">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">);</span>
    <span class="nb">flush</span><span class="p">();</span>
<span class="p">});</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">flush()</span></code> function does not flush buffering. If <code class="docutils literal notranslate"><span class="pre">ob_start()</span></code> has
been called before or the <code class="docutils literal notranslate"><span class="pre">output_buffering</span></code> <code class="docutils literal notranslate"><span class="pre">php.ini</span></code> option is enabled,
you must call <code class="docutils literal notranslate"><span class="pre">ob_flush()</span></code> before <code class="docutils literal notranslate"><span class="pre">flush()</span></code>.</p>
<p>Additionally, PHP isn’t the only layer that can buffer output. Your web
server might also buffer based on its configuration. Some servers, such as
nginx, let you disable buffering at the config level or by adding a special HTTP
header in the response:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// disables FastCGI buffering in nginx only for this response</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;X-Accel-Buffering&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="serving-files">
<span id="component-http-foundation-serving-files"></span><h3>Serving Files</h3>
<p>When sending a file, you must add a <code class="docutils literal notranslate"><span class="pre">Content-Disposition</span></code> header to your
response. While creating this header for basic file downloads is straightforward,
using non-ASCII filenames is more involved. The
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/HeaderUtils.php" title="Symfony\Component\HttpFoundation\HeaderUtils::makeDisposition()"><span class="pre">makeDisposition()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/HeaderUtils.php]</span></span></code>
abstracts the hard work behind a simple API:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\HeaderUtils</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\ResponseHeaderBag</span><span class="p">;</span>

<span class="nv">$fileContent</span> <span class="o">=</span> <span class="o">...</span><span class="p">;</span> <span class="c1">// the generated file content</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nv">$fileContent</span><span class="p">);</span>

<span class="nv">$disposition</span> <span class="o">=</span> <span class="nx">HeaderUtils</span><span class="o">::</span><span class="na">makeDisposition</span><span class="p">(</span>
    <span class="nx">HeaderUtils</span><span class="o">::</span><span class="na">DISPOSITION_ATTACHMENT</span><span class="p">,</span>
    <span class="s1">&#39;foo.pdf&#39;</span>
<span class="p">);</span>

<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">,</span> <span class="nv">$disposition</span><span class="p">);</span>
</pre></div>
</div>
<p>Alternatively, if you are serving a static file, you can use a
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/BinaryFileResponse.php" title="Symfony\Component\HttpFoundation\BinaryFileResponse"><span class="pre">BinaryFileResponse</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/BinaryFileResponse.php]</span></span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\BinaryFileResponse</span><span class="p">;</span>

<span class="nv">$file</span> <span class="o">=</span> <span class="s1">&#39;path/to/file.txt&#39;</span><span class="p">;</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BinaryFileResponse</span><span class="p">(</span><span class="nv">$file</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">BinaryFileResponse</span></code> will automatically handle <code class="docutils literal notranslate"><span class="pre">Range</span></code> and
<code class="docutils literal notranslate"><span class="pre">If-Range</span></code> headers from the request. It also supports <code class="docutils literal notranslate"><span class="pre">X-Sendfile</span></code>
(see for <a class="reference external" href="https://www.nginx.com/resources/wiki/start/topics/examples/xsendfile/">nginx</a><span class="link-target"> [https://www.nginx.com/resources/wiki/start/topics/examples/xsendfile/]</span> and <a class="reference external" href="https://tn123.org/mod_xsendfile/">Apache</a><span class="link-target"> [https://tn123.org/mod_xsendfile/]</span>). To make use of it, you need to determine
whether or not the <code class="docutils literal notranslate"><span class="pre">X-Sendfile-Type</span></code> header should be trusted and call
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/BinaryFileResponse.php" title="Symfony\Component\HttpFoundation\BinaryFileResponse::trustXSendfileTypeHeader()"><span class="pre">trustXSendfileTypeHeader()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/BinaryFileResponse.php]</span></span></code>
if it should:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nx">BinaryFileResponse</span><span class="o">::</span><span class="na">trustXSendfileTypeHeader</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">BinaryFileResponse</span></code> will only handle <code class="docutils literal notranslate"><span class="pre">X-Sendfile</span></code> if the particular header is present.
For Apache, this is not the default case.</p>
<p>To add the header use the <code class="docutils literal notranslate"><span class="pre">mod_headers</span></code> Apache module and add the following to the Apache configuration:</p>
<div class="highlight-apache notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nt">&lt;IfModule</span> <span class="s">mod_xsendfile.c</span><span class="nt">&gt;</span>
  <span class="c"># This is already present somewhere...</span>
  <span class="nb">XSendFile</span> <span class="k">on</span>
  <span class="nb">XSendFilePath</span> ...some path...

  <span class="c"># This needs to be added:</span>
  <span class="nt">&lt;IfModule</span> <span class="s">mod_headers.c</span><span class="nt">&gt;</span>
    <span class="nb">RequestHeader</span> set X-Sendfile-Type X-Sendfile
  <span class="nt">&lt;/IfModule&gt;</span>
<span class="nt">&lt;/IfModule&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
<p>With the <code class="docutils literal notranslate"><span class="pre">BinaryFileResponse</span></code>, you can still set the <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> of the sent file,
or change its <code class="docutils literal notranslate"><span class="pre">Content-Disposition</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/plain&#39;</span><span class="p">);</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setContentDisposition</span><span class="p">(</span>
    <span class="nx">ResponseHeaderBag</span><span class="o">::</span><span class="na">DISPOSITION_ATTACHMENT</span><span class="p">,</span>
    <span class="s1">&#39;filename.txt&#39;</span>
<span class="p">);</span>
</pre></div>
</div>
<p>It is possible to delete the file after the response is sent with the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/BinaryFileResponse.php" title="Symfony\Component\HttpFoundation\BinaryFileResponse::deleteFileAfterSend()"><span class="pre">deleteFileAfterSend()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/BinaryFileResponse.php]</span></span></code> method.
Please note that this will not work when the <code class="docutils literal notranslate"><span class="pre">X-Sendfile</span></code> header is set.</p>
<p>If the size of the served file is unknown (e.g. because it’s being generated on the fly,
or because a PHP stream filter is registered on it, etc.), you can pass a <code class="docutils literal notranslate"><span class="pre">Stream</span></code>
instance to <code class="docutils literal notranslate"><span class="pre">BinaryFileResponse</span></code>. This will disable <code class="docutils literal notranslate"><span class="pre">Range</span></code> and <code class="docutils literal notranslate"><span class="pre">Content-Length</span></code>
handling, switching to chunked encoding instead:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\BinaryFileResponse</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\File\Stream</span><span class="p">;</span>

<span class="nv">$stream</span>  <span class="o">=</span> <span class="k">new</span> <span class="nx">Stream</span><span class="p">(</span><span class="s1">&#39;path/to/stream&#39;</span><span class="p">);</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BinaryFileResponse</span><span class="p">(</span><span class="nv">$stream</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you <em>just</em> created the file during this same request, the file <em>may</em> be sent
without any content. This may be due to cached file stats that return zero for
the size of the file. To fix this issue, call <code class="docutils literal notranslate"><span class="pre">clearstatcache(true,</span> <span class="pre">$file)</span></code>
with the path to the binary file.</p>
</div>
</div>
<div class="section" id="creating-a-json-response">
<span id="component-http-foundation-json-response"></span><h3>Creating a JSON Response</h3>
<p>Any type of response can be created via the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php" title="Symfony\Component\HttpFoundation\Response"><span class="pre">Response</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Response.php]</span></span></code> class by setting the
right content and headers. A JSON response might look like this:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">();</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setContent</span><span class="p">(</span><span class="nb">json_encode</span><span class="p">([</span>
    <span class="s1">&#39;data&#39;</span> <span class="o">=&gt;</span> <span class="mi">123</span><span class="p">,</span>
<span class="p">]));</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>There is also a helpful <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/JsonResponse.php" title="Symfony\Component\HttpFoundation\JsonResponse"><span class="pre">JsonResponse</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/JsonResponse.php]</span></span></code>
class, which can make this even easier:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\JsonResponse</span><span class="p">;</span>

<span class="c1">// if you know the data to send when creating the response</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">JsonResponse</span><span class="p">([</span><span class="s1">&#39;data&#39;</span> <span class="o">=&gt;</span> <span class="mi">123</span><span class="p">]);</span>

<span class="c1">// if you don&#39;t know the data to send when creating the response</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">JsonResponse</span><span class="p">();</span>
<span class="c1">// ...</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setData</span><span class="p">([</span><span class="s1">&#39;data&#39;</span> <span class="o">=&gt;</span> <span class="mi">123</span><span class="p">]);</span>

<span class="c1">// if the data to send is already encoded in JSON</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nx">JsonResponse</span><span class="o">::</span><span class="na">fromJsonString</span><span class="p">(</span><span class="s1">&#39;{ &quot;data&quot;: 123 }&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">JsonResponse</span></code> class sets the <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> header to
<code class="docutils literal notranslate"><span class="pre">application/json</span></code> and encodes your data to JSON when needed.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>To avoid XSSI <a class="reference external" href="https://haacked.com/archive/2009/06/25/json-hijacking.aspx/">JSON Hijacking</a><span class="link-target"> [https://haacked.com/archive/2009/06/25/json-hijacking.aspx/]</span>, you should pass an associative array
as the outer-most array to <code class="docutils literal notranslate"><span class="pre">JsonResponse</span></code> and not an indexed array so
that the final result is an object (e.g. <code class="docutils literal notranslate"><span class="pre">{&quot;object&quot;:</span> <span class="pre">&quot;not</span> <span class="pre">inside</span> <span class="pre">an</span> <span class="pre">array&quot;}</span></code>)
instead of an array (e.g. <code class="docutils literal notranslate"><span class="pre">[{&quot;object&quot;:</span> <span class="pre">&quot;inside</span> <span class="pre">an</span> <span class="pre">array&quot;}]</span></code>). Read
the <a class="reference external" href="https://cheatsheetseries.owasp.org/cheatsheets/AJAX_Security_Cheat_Sheet.html#always-return-json-with-an-object-on-the-outside">OWASP guidelines</a><span class="link-target"> [https://cheatsheetseries.owasp.org/cheatsheets/AJAX_Security_Cheat_Sheet.html#always-return-json-with-an-object-on-the-outside]</span> for more information.</p>
<p>Only methods that respond to GET requests are vulnerable to XSSI ‘JSON Hijacking’.
Methods responding to POST requests only remain unaffected.</p>
</div>
</div>
<div class="section" id="jsonp-callback">
<h3>JSONP Callback</h3>
<p>If you’re using JSONP, you can set the callback function that the data should
be passed to:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setCallback</span><span class="p">(</span><span class="s1">&#39;handleResponse&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>In this case, the <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> header will be <code class="docutils literal notranslate"><span class="pre">text/javascript</span></code> and
the response content will look like this:</p>
<div class="highlight-javascript notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nx">handleResponse</span><span class="p">({</span><span class="s1">&#39;data&#39;</span><span class="o">:</span> <span class="mi">123</span><span class="p">});</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="session">
<h2>Session</h2>
<p>The session information is in its own document: <a class="reference internal" href="http_foundation/sessions.xhtml"><span class="doc">Session Management</span></a>.</p>
</div>
<div class="section" id="learn-more">
<h2>Learn More</h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="http_foundation/session_configuration.xhtml">Configuring Sessions and Save Handlers</a></li>
<li class="toctree-l1"><a class="reference internal" href="http_foundation/session_php_bridge.xhtml">Integrating with Legacy Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="http_foundation/session_testing.xhtml">Testing with Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="http_foundation/sessions.xhtml">Session Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controller.xhtml">Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controller/argument_value_resolver.xhtml">Extending Action Argument Resolving</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controller/error_pages.xhtml">How to Customize Error Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controller/forwarding.xhtml">How to Forward Requests to another Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controller/service.xhtml">How to Define Controllers as Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controller/soap_web_service.xhtml">How to Create a SOAP Web Service in a Symfony Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controller/upload_file.xhtml">How to Upload Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../session/database.xhtml">Store Sessions in a Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../session/locale_sticky_session.xhtml">Making the Locale “Sticky” during a User’s Session</a></li>
<li class="toctree-l1"><a class="reference internal" href="../session/php_bridge.xhtml">Bridge a legacy Application with Symfony Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../session/proxy_examples.xhtml">Session Proxy Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_cache/cache_invalidation.xhtml">Cache Invalidation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_cache/cache_vary.xhtml">Varying the Response for HTTP Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_cache/esi.xhtml">Working with Edge Side Includes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_cache/expiration.xhtml">HTTP Cache Expiration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_cache/ssi.xhtml">Working with Server Side Includes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_cache/validation.xhtml">HTTP Cache Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_cache/varnish.xhtml">How to Use Varnish to Speed up my Website</a></li>
</ul>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>