<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>PDO &amp; Doctrine DBAL Cache Adapter</title>
    <link rel="stylesheet" href="../../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/rtd_custom.css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="pdo-doctrine-dbal-cache-adapter">
<span id="pdo-doctrine-adapter"></span><span id="index-0"></span><h1>PDO &amp; Doctrine DBAL Cache Adapter</h1>
<p>This adapter stores the cache items in an SQL database. It requires a <code class="docutils literal notranslate"><a class="reference external" href="https://www.php.net/manual/en/class.pdo.php" title="PDO"><span class="pre">PDO</span></a><span class="link-target"> <span class="pre">[https://www.php.net/manual/en/class.pdo.php]</span></span></code>,
<a class="reference external" href="https://github.com/doctrine/dbal/blob/master/src/Connection.php">Doctrine DBAL Connection</a><span class="link-target"> [https://github.com/doctrine/dbal/blob/master/src/Connection.php]</span>, or <a class="reference external" href="https://en.wikipedia.org/wiki/Data_source_name">Data Source Name (DSN)</a><span class="link-target"> [https://en.wikipedia.org/wiki/Data_source_name]</span> as its first parameter, and
optionally a namespace, default cache lifetime, and options array as its second,
third, and forth parameters:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Cache\Adapter\PdoAdapter</span><span class="p">;</span>

<span class="nv">$cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PdoAdapter</span><span class="p">(</span>

    <span class="c1">// a PDO, a Doctrine DBAL connection or DSN for lazy connecting through PDO</span>
    <span class="nv">$databaseConnectionOrDSN</span><span class="p">,</span>

    <span class="c1">// the string prefixed to the keys of the items stored in this cache</span>
    <span class="nv">$namespace</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="c1">// the default lifetime (in seconds) for cache items that do not define their</span>
    <span class="c1">// own lifetime, with a value 0 causing items to be stored indefinitely (i.e.</span>
    <span class="c1">// until the database table is truncated or its rows are otherwise deleted)</span>
    <span class="nv">$defaultLifetime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

    <span class="c1">// an array of options for configuring the database table and connection</span>
    <span class="nv">$options</span> <span class="o">=</span> <span class="p">[]</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The table where values are stored is created automatically on the first call to
the <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Cache/Adapter/PdoAdapter.php" title="Symfony\Component\Cache\Adapter\PdoAdapter::save()"><span class="pre">save()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Cache/Adapter/PdoAdapter.php]</span></span></code> method.
You can also create this table explicitly by calling the
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Cache/Adapter/PdoAdapter.php" title="Symfony\Component\Cache\Adapter\PdoAdapter::createTable()"><span class="pre">createTable()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Cache/Adapter/PdoAdapter.php]</span></span></code> method in
your code.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When passed a <a class="reference external" href="https://en.wikipedia.org/wiki/Data_source_name">Data Source Name (DSN)</a><span class="link-target"> [https://en.wikipedia.org/wiki/Data_source_name]</span> string (instead of a database connection
class instance), the connection will be lazy-loaded when needed.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This adapter implements <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Cache/PruneableInterface.php" title="Symfony\Component\Cache\PruneableInterface"><span class="pre">PruneableInterface</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Cache/PruneableInterface.php]</span></span></code>,
allowing for manual <a class="reference internal" href="../cache_pools.xhtml#component-cache-cache-pool-prune"><span class="std std-ref">pruning of expired cache entries</span></a> by
calling its <code class="docutils literal notranslate"><span class="pre">prune()</span></code> method.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>