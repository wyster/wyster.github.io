<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>The VarDumper Component</title>
    <link rel="stylesheet" href="../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/rtd_custom.css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-vardumper-component">
<span id="index-0"></span><h1>The VarDumper Component</h1>
<blockquote>
<div><p>The VarDumper component provides mechanisms for extracting the state out of
any PHP variables. Built on top, it provides a better <code class="docutils literal notranslate"><span class="pre">dump()</span></code> function
that you can use instead of <code class="docutils literal notranslate"><a class="reference external" href="https://www.php.net/manual/en/function.var-dump.php" title="var_dump"><span class="pre">var_dump</span></a><span class="link-target"> <span class="pre">[https://www.php.net/manual/en/function.var-dump.php]</span></span></code>.</p>
</div></blockquote>
<div class="section" id="installation">
<h2>Installation</h2>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> composer require --dev symfony/var-dumper
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you install this component outside of a Symfony application, you must
require the <code class="docutils literal notranslate"><span class="pre">vendor/autoload.php</span></code> file in your code to enable the class
autoloading mechanism provided by Composer. Read
<a class="reference internal" href="using_components.xhtml"><span class="doc">this article</span></a> for more details.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If using it inside a Symfony application, make sure that the DebugBundle has
been installed (or run <code class="docutils literal notranslate"><span class="pre">composer</span> <span class="pre">require</span> <span class="pre">--dev</span> <span class="pre">symfony/debug-bundle</span></code> to install it).</p>
</div>
</div>
<div class="section" id="the-dump-function">
<span id="components-var-dumper-dump"></span><h2>The dump() Function</h2>
<p>The VarDumper component creates a global <code class="docutils literal notranslate"><span class="pre">dump()</span></code> function that you can
use instead of e.g. <code class="docutils literal notranslate"><a class="reference external" href="https://www.php.net/manual/en/function.var-dump.php" title="var_dump"><span class="pre">var_dump</span></a><span class="link-target"> <span class="pre">[https://www.php.net/manual/en/function.var-dump.php]</span></span></code>. By using it, you’ll gain:</p>
<ul class="simple">
<li><p>Per object and resource types specialized view to e.g. filter out
Doctrine internals while dumping a single proxy entity, or get more
insight on opened files with <code class="docutils literal notranslate"><a class="reference external" href="https://www.php.net/manual/en/function.stream-get-meta-data.php" title="stream_get_meta_data"><span class="pre">stream_get_meta_data</span></a><span class="link-target"> <span class="pre">[https://www.php.net/manual/en/function.stream-get-meta-data.php]</span></span></code>;</p></li>
<li><p>Configurable output formats: HTML or colored command line output;</p></li>
<li><p>Ability to dump internal references, either soft ones (objects or
resources) or hard ones (<code class="docutils literal notranslate"><span class="pre">=&amp;</span></code> on arrays or objects properties).
Repeated occurrences of the same object/array/resource won’t appear
again and again anymore. Moreover, you’ll be able to inspect the
reference structure of your data;</p></li>
<li><p>Ability to operate in the context of an output buffering handler.</p></li>
</ul>
<p>For example:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">require</span> <span class="no">__DIR__</span><span class="o">.</span><span class="s1">&#39;/vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="c1">// create a variable, which could be anything!</span>
<span class="nv">$someVar</span> <span class="o">=</span> <span class="o">...</span><span class="p">;</span>

<span class="nx">dump</span><span class="p">(</span><span class="nv">$someVar</span><span class="p">);</span>

<span class="c1">// dump() returns the passed value, so you can dump an object and keep using it</span>
<span class="nx">dump</span><span class="p">(</span><span class="nv">$someObject</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">someMethod</span><span class="p">();</span>
</pre></div>
</div>
<p>By default, the output format and destination are selected based on your
current PHP SAPI:</p>
<ul class="simple">
<li><p>On the command line (CLI SAPI), the output is written on <code class="docutils literal notranslate"><span class="pre">STDOUT</span></code>. This
can be surprising to some because this bypasses PHP’s output buffering
mechanism;</p></li>
<li><p>On other SAPIs, dumps are written as HTML in the regular output.</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can also select the output format explicitly defining the
<code class="docutils literal notranslate"><span class="pre">VAR_DUMPER_FORMAT</span></code> environment variable and setting its value to either
<code class="docutils literal notranslate"><span class="pre">html</span></code>, <code class="docutils literal notranslate"><span class="pre">cli</span></code> or <a class="reference internal" href="#var-dumper-dump-server-format"><span class="std std-ref">server</span></a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to catch the dump output as a string, please read the
<a class="reference internal" href="var_dumper/advanced.xhtml"><span class="doc">advanced documentation</span></a> which contains examples of it.
You’ll also learn how to change the format or redirect the output to
wherever you want.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In order to have the <code class="docutils literal notranslate"><span class="pre">dump()</span></code> function always available when running
any PHP code, you can install it globally on your computer:</p>
<ol class="arabic simple">
<li><p>Run <code class="docutils literal notranslate"><span class="pre">composer</span> <span class="pre">global</span> <span class="pre">require</span> <span class="pre">symfony/var-dumper</span></code>;</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">auto_prepend_file</span> <span class="pre">=</span> <span class="pre">${HOME}/.composer/vendor/autoload.php</span></code>
to your <code class="docutils literal notranslate"><span class="pre">php.ini</span></code> file;</p></li>
<li><p>From time to time, run <code class="docutils literal notranslate"><span class="pre">composer</span> <span class="pre">global</span> <span class="pre">update</span> <span class="pre">symfony/var-dumper</span></code>
to have the latest bug fixes.</p></li>
</ol>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The VarDumper component also provides a <code class="docutils literal notranslate"><span class="pre">dd()</span></code> (“dump and die”) helper
function. This function dumps the variables using <code class="docutils literal notranslate"><span class="pre">dump()</span></code> and
immediately ends the execution of the script (using <code class="docutils literal notranslate"><a class="reference external" href="https://www.php.net/manual/en/function.exit.php" title="exit"><span class="pre">exit</span></a><span class="link-target"> <span class="pre">[https://www.php.net/manual/en/function.exit.php]</span></span></code>).</p>
</div>
</div>
<div class="section" id="the-dump-server">
<span id="var-dumper-dump-server"></span><h2>The Dump Server</h2>
<p>The <code class="docutils literal notranslate"><span class="pre">dump()</span></code> function outputs its contents in the same browser window or
console terminal as your own application. Sometimes mixing the real output
with the debug output can be confusing. That’s why this component provides a
server to collect all the dumped data.</p>
<p>Start the server with the <code class="docutils literal notranslate"><span class="pre">server:dump</span></code> command and whenever you call to
<code class="docutils literal notranslate"><span class="pre">dump()</span></code>, the dumped data won’t be displayed in the output but sent to that
server, which outputs it to its own console or to an HTML file:</p>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># displays the dumped data in the console:</span>
<span class="gp">$</span> php bin/console server:dump
<span class="go">  [OK] Server listening on tcp://0.0.0.0:9912</span>

<span class="c1"># stores the dumped data in a file using the HTML format:</span>
<span class="gp">$</span> php bin/console server:dump --format<span class="o">=</span>html &gt; dump.html
</pre></div>
</td></tr></table></div>
<p>Inside a Symfony application, the output of the dump server is configured with
the <a class="reference internal" href="../reference/configuration/debug.xhtml#configuration-debug-dump-destination"><span class="std std-ref">dump_destination option</span></a> of the
<code class="docutils literal notranslate"><span class="pre">debug</span></code> package:</p>
<div class="configuration-block">
<ul class="simple">
<li><p><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/packages/debug.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">debug</span><span class="p p-Indicator">:</span>
   <span class="l l-Scalar l-Scalar-Plain">dump_destination</span><span class="p p-Indicator">:</span> <span class="s">&quot;tcp://%env(VAR_DUMPER_SERVER)%&quot;</span>
</pre></div>
</td></tr></table></div>
</p></li>
<li><p><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/packages/debug.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/debug&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xmlns:debug=</span><span class="s">&quot;http://symfony.com/schema/dic/debug&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services</span>
<span class="s">        https://symfony.com/schema/dic/services/services-1.0.xsd</span>
<span class="s">        http://symfony.com/schema/dic/debug https://symfony.com/schema/dic/debug/debug-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;debug:config</span> <span class="na">dump-destination=</span><span class="s">&quot;tcp://%env(VAR_DUMPER_SERVER)%&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/container&gt;</span>
</pre></div>
</td></tr></table></div>
</p></li>
<li><p><em>PHP</em><div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/packages/debug.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;debug&#39;</span><span class="p">,</span> <span class="p">[</span>
   <span class="s1">&#39;dump_destination&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;tcp://%env(VAR_DUMPER_SERVER)%&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</pre></div>
</td></tr></table></div>
</p></li>
</ul>
</div>
<p>Outside a Symfony application, use the <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Dumper/ServerDumper.php" title="Symfony\Component\VarDumper\Dumper\ServerDumper"><span class="pre">ServerDumper</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Dumper/ServerDumper.php]</span></span></code> class:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">require</span> <span class="no">__DIR__</span><span class="o">.</span><span class="s1">&#39;/vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\VarDumper\Cloner\VarCloner</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\VarDumper\Dumper\CliDumper</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\VarDumper\Dumper\ContextProvider\CliContextProvider</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\VarDumper\Dumper\ContextProvider\SourceContextProvider</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\VarDumper\Dumper\HtmlDumper</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\VarDumper\Dumper\ServerDumper</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\VarDumper\VarDumper</span><span class="p">;</span>

<span class="nv">$cloner</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VarCloner</span><span class="p">();</span>
<span class="nv">$fallbackDumper</span> <span class="o">=</span> <span class="nx">\in_array</span><span class="p">(</span><span class="nx">\PHP_SAPI</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;cli&#39;</span><span class="p">,</span> <span class="s1">&#39;phpdbg&#39;</span><span class="p">])</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">CliDumper</span><span class="p">()</span> <span class="o">:</span> <span class="k">new</span> <span class="nx">HtmlDumper</span><span class="p">();</span>
<span class="nv">$dumper</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ServerDumper</span><span class="p">(</span><span class="s1">&#39;tcp://127.0.0.1:9912&#39;</span><span class="p">,</span> <span class="nv">$fallbackDumper</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;cli&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">CliContextProvider</span><span class="p">(),</span>
    <span class="s1">&#39;source&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">SourceContextProvider</span><span class="p">(),</span>
<span class="p">]);</span>

<span class="nx">VarDumper</span><span class="o">::</span><span class="na">setHandler</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$var</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$cloner</span><span class="p">,</span> <span class="nv">$dumper</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$dumper</span><span class="o">-&gt;</span><span class="na">dump</span><span class="p">(</span><span class="nv">$cloner</span><span class="o">-&gt;</span><span class="na">cloneVar</span><span class="p">(</span><span class="nv">$var</span><span class="p">));</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The second argument of <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Dumper/ServerDumper.php" title="Symfony\Component\VarDumper\Dumper\ServerDumper"><span class="pre">ServerDumper</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Dumper/ServerDumper.php]</span></span></code>
is a <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Dumper/DataDumperInterface.php" title="Symfony\Component\VarDumper\Dumper\DataDumperInterface"><span class="pre">DataDumperInterface</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Dumper/DataDumperInterface.php]</span></span></code> instance
used as a fallback when the server is unreachable. The third argument are the
context providers, which allow to gather some info about the context in which the
data was dumped. The built-in context providers are: <code class="docutils literal notranslate"><span class="pre">cli</span></code>, <code class="docutils literal notranslate"><span class="pre">request</span></code> and <code class="docutils literal notranslate"><span class="pre">source</span></code>.</p>
</div>
<p>Then you can use the following command to start a server out-of-the-box:</p>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> ./vendor/bin/var-dump-server
<span class="go">  [OK] Server listening on tcp://127.0.0.1:9912</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="configuring-the-dump-server-with-environment-variables">
<span id="var-dumper-dump-server-format"></span><h3>Configuring the Dump Server with Environment Variables</h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 5.2: </span>The <code class="docutils literal notranslate"><span class="pre">VAR_DUMPER_FORMAT=server</span></code> feature was introduced in Symfony 5.2.</p>
</div>
<p>If you prefer to not modify the application configuration (e.g. to quickly debug
a project given to you) use the <code class="docutils literal notranslate"><span class="pre">VAR_DUMPER_FORMAT</span></code> env var.</p>
<p>First, start the server as usual:</p>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> ./vendor/bin/var-dump-server
</pre></div>
</td></tr></table></div>
<p>Then, run your code with the <code class="docutils literal notranslate"><span class="pre">VAR_DUMPER_FORMAT=server</span></code> env var by configuring
this value in the <a class="reference internal" href="../configuration.xhtml#config-env-vars"><span class="std std-ref">.env file of your application</span></a>. For
console commands, you can also define this env var as follows:</p>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">VAR_DUMPER_FORMAT</span><span class="o">=</span>server <span class="o">[</span>your-cli-command<span class="o">]</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The host used by the <code class="docutils literal notranslate"><span class="pre">server</span></code> format is the one configured in the
<code class="docutils literal notranslate"><span class="pre">VAR_DUMPER_SERVER</span></code> env var or <code class="docutils literal notranslate"><span class="pre">127.0.0.1:9912</span></code> if none is defined.
If you prefer, you can also configure the host in the <code class="docutils literal notranslate"><span class="pre">VAR_DUMPER_FORMAT</span></code>
env var like this: <code class="docutils literal notranslate"><span class="pre">VAR_DUMPER_FORMAT=tcp://127.0.0.1:1234</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="debugbundle-and-twig-integration">
<h2>DebugBundle and Twig Integration</h2>
<p>The DebugBundle allows greater integration of this component into Symfony
applications.</p>
<p>Since generating (even debug) output in the controller or in the model
of your application may just break it by e.g. sending HTTP headers or
corrupting your view, the bundle configures the <code class="docutils literal notranslate"><span class="pre">dump()</span></code> function so that
variables are dumped in the web debug toolbar.</p>
<p>But if the toolbar cannot be displayed because you e.g. called
<code class="docutils literal notranslate"><span class="pre">die()</span></code>/<code class="docutils literal notranslate"><span class="pre">exit()</span></code>/<code class="docutils literal notranslate"><span class="pre">dd()</span></code> or a fatal error occurred, then dumps are written
on the regular output.</p>
<p>In a Twig template, two constructs are available for dumping a variable.
Choosing between both is mostly a matter of personal taste, still:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">dump</span> <span class="pre">foo.bar</span> <span class="pre">%}</span></code> is the way to go when the original template output
shall not be modified: variables are not dumped inline, but in the web
debug toolbar;</p></li>
<li><p>on the contrary, <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">dump(foo.bar)</span> <span class="pre">}}</span></code> dumps inline and thus may or not
be suited to your use case (e.g. you shouldn’t use it in an HTML
attribute or a <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code> tag).</p></li>
</ul>
<p>This behavior can be changed by configuring the <code class="docutils literal notranslate"><span class="pre">debug.dump_destination</span></code>
option. Read more about this and other options in
<a class="reference internal" href="../reference/configuration/debug.xhtml"><span class="doc">the DebugBundle configuration reference</span></a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If the dumped contents are complex, consider using the local search box to
look for specific variables or values. First, click anywhere on the dumped
contents and then press <code class="docutils literal notranslate"><span class="pre">Ctrl.</span> <span class="pre">+</span> <span class="pre">F</span></code> or <code class="docutils literal notranslate"><span class="pre">Cmd.</span> <span class="pre">+</span> <span class="pre">F</span></code> to make the local
search box appear. All the common shortcuts to navigate the search results
are supported (<code class="docutils literal notranslate"><span class="pre">Ctrl.</span> <span class="pre">+</span> <span class="pre">G</span></code> or <code class="docutils literal notranslate"><span class="pre">Cmd.</span> <span class="pre">+</span> <span class="pre">G</span></code>, <code class="docutils literal notranslate"><span class="pre">F3</span></code>, etc.) When
finished, press <code class="docutils literal notranslate"><span class="pre">Esc.</span></code> to hide the box again.</p>
<p>If you want to use your browser search input, press <code class="docutils literal notranslate"><span class="pre">Ctrl.</span> <span class="pre">+</span> <span class="pre">F</span></code> or
<code class="docutils literal notranslate"><span class="pre">Cmd.</span> <span class="pre">+</span> <span class="pre">F</span></code> again while having focus on VarDumper’s search input.</p>
</div>
</div>
<div class="section" id="using-the-vardumper-component-in-your-phpunit-test-suite">
<h2>Using the VarDumper Component in your PHPUnit Test Suite</h2>
<p>The VarDumper component provides
<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Test/VarDumperTestTrait.php" title="Symfony\Component\VarDumper\Test\VarDumperTestTrait"><span class="pre">a</span> <span class="pre">trait</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Test/VarDumperTestTrait.php]</span></span></code>
that can help writing some of your tests for PHPUnit.</p>
<p>This will provide you with two new assertions:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Test/VarDumperTestTrait.php" title="Symfony\Component\VarDumper\Test\VarDumperTestTrait::assertDumpEquals()"><span class="pre">assertDumpEquals()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Test/VarDumperTestTrait.php]</span></span></code></dt>
<dd><p>verifies that the dump of the variable given as the second argument matches
the expected dump provided as the first argument.</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Test/VarDumperTestTrait.php" title="Symfony\Component\VarDumper\Test\VarDumperTestTrait::assertDumpMatchesFormat()"><span class="pre">assertDumpMatchesFormat()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Test/VarDumperTestTrait.php]</span></span></code></dt>
<dd><p>is like the previous method but accepts placeholders in the expected dump,
based on the <code class="docutils literal notranslate"><span class="pre">assertStringMatchesFormat()</span></code> method provided by PHPUnit.</p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">VarDumperTestTrait</span></code> also includes these other methods:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Test/VarDumperTestTrait.php" title="Symfony\Component\VarDumper\Test\VarDumperTestTrait::setUpVarDumper()"><span class="pre">setUpVarDumper()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Test/VarDumperTestTrait.php]</span></span></code></dt>
<dd><p>is used to configure the available casters and their options, which is a way
to only control the fields you’re expecting and allows writing concise tests.</p>
</dd>
<dt><code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Test/VarDumperTestTrait.php" title="Symfony\Component\VarDumper\Test\VarDumperTestTrait::tearDownVarDumper()"><span class="pre">tearDownVarDumper()</span></a><span class="link-target"> <span class="pre">[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/VarDumper/Test/VarDumperTestTrait.php]</span></span></code></dt>
<dd><p>is called automatically after each case to reset the custom configuration
made in <code class="docutils literal notranslate"><span class="pre">setUpVarDumper()</span></code>.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\VarDumper\Test\VarDumperTestTrait</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ExampleTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">VarDumperTestTrait</span><span class="p">;</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">setUp</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$casters</span> <span class="o">=</span> <span class="p">[</span>
            <span class="nx">\DateTimeInterface</span><span class="o">::</span><span class="na">class</span> <span class="o">=&gt;</span> <span class="k">static</span> <span class="k">function</span> <span class="p">(</span><span class="nx">\DateTimeInterface</span> <span class="nv">$date</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$a</span><span class="p">,</span> <span class="nx">Stub</span> <span class="nv">$stub</span><span class="p">)</span><span class="o">:</span> <span class="k">array</span> <span class="p">{</span>
                <span class="nv">$stub</span><span class="o">-&gt;</span><span class="na">class</span> <span class="o">=</span> <span class="s1">&#39;DateTime&#39;</span><span class="p">;</span>
                <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;date&#39;</span> <span class="o">=&gt;</span> <span class="nv">$date</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">&#39;d/m/Y&#39;</span><span class="p">)];</span>
            <span class="p">},</span>
        <span class="p">];</span>

        <span class="nv">$flags</span> <span class="o">=</span> <span class="nx">CliDumper</span><span class="o">::</span><span class="na">DUMP_LIGHT_ARRAY</span> <span class="o">|</span> <span class="nx">CliDumper</span><span class="o">::</span><span class="na">DUMP_COMMA_SEPARATOR</span><span class="p">;</span>

        <span class="c1">// this configures the casters &amp; flags to use for all the tests in this class.</span>
        <span class="c1">// If you need custom configurations per test rather than for the whole class,</span>
        <span class="c1">// call this setUpVarDumper() method from those tests instead.</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setUpVarDumper</span><span class="p">(</span><span class="nv">$casters</span><span class="p">,</span> <span class="nv">$flags</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">testWithDumpEquals</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$testedVar</span> <span class="o">=</span> <span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">];</span>

        <span class="c1">// the expected dump contents don&#39;t have the default VarDumper structure</span>
        <span class="c1">// because of the custom casters and flags used in the test</span>
        <span class="nv">$expectedDump</span> <span class="o">=</span> <span class="s">&lt;&lt;&lt;</span><span class="dl">EOTXT</span><span class="s"></span>
<span class="s">[</span>
<span class="s">  123,</span>
<span class="s">  &quot;foo&quot;,</span>
<span class="s">]</span>
<span class="dl">EOTXT</span><span class="p">;</span>

        <span class="c1">// if the first argument is a string, it must be the whole expected dump</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertDumpEquals</span><span class="p">(</span><span class="nv">$expectedDump</span><span class="p">,</span> <span class="nv">$testedVar</span><span class="p">);</span>

        <span class="c1">// if the first argument is not a string, assertDumpEquals() dumps it</span>
        <span class="c1">// and compares it with the dump of the second argument</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertDumpEquals</span><span class="p">(</span><span class="nv">$testedVar</span><span class="p">,</span> <span class="nv">$testedVar</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dump-examples-and-output">
<h2>Dump Examples and Output</h2>
<p>For simple variables, reading the output should be straightforward.
Here are some examples showing first a variable defined in PHP,
then its dump representation:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$var</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;a simple string&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;in an array of 5 elements&quot;</span><span class="p">,</span>
    <span class="s1">&#39;a float&#39;</span> <span class="o">=&gt;</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="s1">&#39;an integer&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;a boolean&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="s1">&#39;an empty array&#39;</span> <span class="o">=&gt;</span> <span class="p">[],</span>
<span class="p">];</span>
<span class="nx">dump</span><span class="p">(</span><span class="nv">$var</span><span class="p">);</span>
</pre></div>
</div>
<img alt="../_images/01-simple.png" src="../_images/01-simple.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The gray arrow is a toggle button for hiding/showing children of
nested structures.</p>
</div>
<div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$var</span> <span class="o">=</span> <span class="s2">&quot;This is a multi-line string.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">$var</span> <span class="o">.=</span> <span class="s2">&quot;Hovering a string shows its length.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">$var</span> <span class="o">.=</span> <span class="s2">&quot;The length of UTF-8 strings is counted in terms of UTF-8 characters.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">$var</span> <span class="o">.=</span> <span class="s2">&quot;Non-UTF-8 strings length are counted in octet size.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">$var</span> <span class="o">.=</span> <span class="s2">&quot;Because of this `</span><span class="se">\xE9</span><span class="s2">` octet (</span><span class="se">\\</span><span class="s2">xE9),</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">$var</span> <span class="o">.=</span> <span class="s2">&quot;this string is not UTF-8 valid, thus the `b` prefix.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nx">dump</span><span class="p">(</span><span class="nv">$var</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<img alt="../_images/02-multi-line-str.png" src="../_images/02-multi-line-str.png" />
<div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PropertyExample</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$publicProperty</span> <span class="o">=</span> <span class="s1">&#39;The `+` prefix denotes public properties,&#39;</span><span class="p">;</span>
    <span class="k">protected</span> <span class="nv">$protectedProperty</span> <span class="o">=</span> <span class="s1">&#39;`#` protected ones and `-` private ones.&#39;</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$privateProperty</span> <span class="o">=</span> <span class="s1">&#39;Hovering a property shows a reminder.&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$var</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PropertyExample</span><span class="p">();</span>
<span class="nx">dump</span><span class="p">(</span><span class="nv">$var</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<img alt="../_images/03-object.png" src="../_images/03-object.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>#14</cite> is the internal object handle. It allows comparing two
consecutive dumps of the same object.</p>
</div>
<div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DynamicPropertyExample</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$declaredProperty</span> <span class="o">=</span> <span class="s1">&#39;This property is declared in the class definition&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$var</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DynamicPropertyExample</span><span class="p">();</span>
<span class="nv">$var</span><span class="o">-&gt;</span><span class="na">undeclaredProperty</span> <span class="o">=</span> <span class="s1">&#39;Runtime added dynamic properties have `&quot;` around their name.&#39;</span><span class="p">;</span>
<span class="nx">dump</span><span class="p">(</span><span class="nv">$var</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<img alt="../_images/04-dynamic-property.png" src="../_images/04-dynamic-property.png" />
<div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ReferenceExample</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$info</span> <span class="o">=</span> <span class="s2">&quot;Circular and sibling references are displayed as `#number`.</span><span class="se">\n</span><span class="s2">Hovering them highlights all instances in the same dump.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>
<span class="nv">$var</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ReferenceExample</span><span class="p">();</span>
<span class="nv">$var</span><span class="o">-&gt;</span><span class="na">aCircularReference</span> <span class="o">=</span> <span class="nv">$var</span><span class="p">;</span>
<span class="nx">dump</span><span class="p">(</span><span class="nv">$var</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<img alt="../_images/05-soft-ref.png" src="../_images/05-soft-ref.png" />
<div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$var</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\ErrorException</span><span class="p">(</span>
    <span class="s2">&quot;For some objects, properties have special values</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="o">.</span><span class="s2">&quot;that are best represented as constants, like</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="o">.</span><span class="s2">&quot;`severity` below. Hovering displays the value (`2`).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="k">E_WARNING</span>
<span class="p">);</span>
<span class="nx">dump</span><span class="p">(</span><span class="nv">$var</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<img alt="../_images/06-constants.png" src="../_images/06-constants.png" />
<div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$var</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nv">$var</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nv">$var</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=&amp;</span> <span class="nv">$var</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="nv">$var</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nv">$var</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Hard references (circular or sibling)&quot;</span><span class="p">];</span>
<span class="nv">$var</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=&amp;</span> <span class="nv">$var</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="nv">$var</span><span class="p">[</span><span class="mi">3</span><span class="p">][]</span> <span class="o">=</span> <span class="s2">&quot;are dumped using `&amp;number` prefixes.&quot;</span><span class="p">;</span>
<span class="nx">dump</span><span class="p">(</span><span class="nv">$var</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<img alt="../_images/07-hard-ref.png" src="../_images/07-hard-ref.png" />
<div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$var</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\ArrayObject</span><span class="p">();</span>
<span class="nv">$var</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;Some resources and special objects like the current&quot;</span><span class="p">;</span>
<span class="nv">$var</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;one are sometimes best represented using virtual&quot;</span><span class="p">;</span>
<span class="nv">$var</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;properties that describe their internal state.&quot;</span><span class="p">;</span>
<span class="nx">dump</span><span class="p">(</span><span class="nv">$var</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<img alt="../_images/08-virtual-property.png" src="../_images/08-virtual-property.png" />
<div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$var</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AcmeController</span><span class="p">(</span>
    <span class="s2">&quot;When a dump goes over its maximum items limit,</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="o">.</span><span class="s2">&quot;or when some special objects are encountered,</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="o">.</span><span class="s2">&quot;children can be replaced by an ellipsis and</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="o">.</span><span class="s2">&quot;optionally followed by a number that says how</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="o">.</span><span class="s2">&quot;many have been removed; `9` in this case.</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="p">);</span>
<span class="nx">dump</span><span class="p">(</span><span class="nv">$var</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<img alt="../_images/09-cut.png" src="../_images/09-cut.png" />
</div>
<div class="section" id="learn-more">
<h2>Learn More</h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="var_dumper/advanced.xhtml">Advanced Usage of the VarDumper Component</a></li>
</ul>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>