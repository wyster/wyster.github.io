<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>Configuring Babel</title>
    <link rel="stylesheet" href="../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/rtd_custom.css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuring-babel">
<h1>Configuring Babel</h1>
<p><a class="reference external" href="https://babeljs.io/">Babel</a><span class="link-target"> [https://babeljs.io/]</span> is automatically configured for all <code class="docutils literal notranslate"><span class="pre">.js</span></code> and <code class="docutils literal notranslate"><span class="pre">.jsx</span></code> files via the
<code class="docutils literal notranslate"><span class="pre">babel-loader</span></code> with sensible defaults (e.g. with the <code class="docutils literal notranslate"><span class="pre">&#64;babel/preset-env</span></code> and
<code class="docutils literal notranslate"><span class="pre">&#64;babel/preset-react</span></code> if requested).</p>
<p>Need to extend the Babel configuration further? The easiest way is via
<code class="docutils literal notranslate"><span class="pre">configureBabel()</span></code>:</p>
<div class="highlight-javascript notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// webpack.config.js</span>
<span class="c1">// ...</span>

<span class="nx">Encore</span>
    <span class="c1">// ...</span>

    <span class="p">.</span><span class="nx">configureBabel</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">babelConfig</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// add additional presets</span>
        <span class="nx">babelConfig</span><span class="p">.</span><span class="nx">presets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;@babel/preset-flow&#39;</span><span class="p">);</span>

        <span class="c1">// no plugins are added by default, but you can add some</span>
        <span class="nx">babelConfig</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;styled-jsx/babel&#39;</span><span class="p">);</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="c1">// node_modules is not processed through Babel by default</span>
        <span class="c1">// but you can whitelist specific modules to process</span>
        <span class="nx">includeNodeModules</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;foundation-sites&#39;</span><span class="p">],</span>

        <span class="c1">// or completely control the exclude rule (note that you</span>
        <span class="c1">// can&#39;t use both &quot;includeNodeModules&quot; and &quot;exclude&quot; at</span>
        <span class="c1">// the same time)</span>
        <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/bower_components/</span>
    <span class="p">})</span>
<span class="p">;</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="configuring-browser-targets">
<h2>Configuring Browser Targets</h2>
<p>The <code class="docutils literal notranslate"><span class="pre">&#64;babel/preset-env</span></code> preset rewrites your JavaScript so that the final syntax
will work in whatever browsers you want. To configure the browsers that you need
to support, see <a class="reference internal" href="postcss.xhtml#browserslist-package-config"><span class="std std-ref">Adding browserslist to package.json</span></a>.</p>
<p>After changing your “browserslist” config, you will need to manually remove the babel
cache directory:</p>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># On Unix run this command. On Windows, clear this directory manually</span>
<span class="gp">$</span> rm -rf node_modules/.cache/babel-loader/
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="creating-a-babelrc-file">
<h2>Creating a <code class="docutils literal notranslate"><span class="pre">.babelrc</span></code> File</h2>
<p>Instead of calling <code class="docutils literal notranslate"><span class="pre">configureBabel()</span></code>, you could create a <code class="docutils literal notranslate"><span class="pre">.babelrc</span></code> file
at the root of your project. This is a more “standard” way of configuring
Babel, but it has a downside: as soon as a <code class="docutils literal notranslate"><span class="pre">.babelrc</span></code> file is present,
<strong>Encore can no longer add any Babel configuration for you</strong>. For example,
if you call <code class="docutils literal notranslate"><span class="pre">Encore.enableReactPreset()</span></code>, the <code class="docutils literal notranslate"><span class="pre">react</span></code> preset will <em>not</em>
automatically be added to Babel: you must add it yourself in <code class="docutils literal notranslate"><span class="pre">.babelrc</span></code>.</p>
<p>As soon as a <code class="docutils literal notranslate"><span class="pre">.babelrc</span></code> file is present, it will take priority over the Babel
configuration added by Encore.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>