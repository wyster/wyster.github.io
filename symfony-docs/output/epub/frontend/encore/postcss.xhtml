<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>PostCSS and autoprefixing (postcss-loader)</title>
    <link rel="stylesheet" href="../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/rtd_custom.css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="postcss-and-autoprefixing-postcss-loader">
<h1>PostCSS and autoprefixing (postcss-loader)</h1>
<p><a class="reference external" href="https://postcss.org/">PostCSS</a><span class="link-target"> [https://postcss.org/]</span> is a CSS post-processing tool that can transform your CSS in a lot
of cool ways, like <a class="reference external" href="https://github.com/postcss/autoprefixer">autoprefixing</a><span class="link-target"> [https://github.com/postcss/autoprefixer]</span>, <a class="reference external" href="https://stylelint.io/">linting</a><span class="link-target"> [https://stylelint.io/]</span> and more!</p>
<p>First, download <code class="docutils literal notranslate"><span class="pre">postcss-loader</span></code> and any plugins you want, like <code class="docutils literal notranslate"><span class="pre">autoprefixer</span></code>:</p>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> yarn add postcss-loader autoprefixer --dev
</pre></div>
</td></tr></table></div>
<p>Next, create a <code class="docutils literal notranslate"><span class="pre">postcss.config.js</span></code> file at the root of your project:</p>
<div class="highlight-javascript notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">plugins</span><span class="o">:</span> <span class="p">{</span>
        <span class="c1">// include whatever plugins you want</span>
        <span class="c1">// but make sure you install these via yarn or npm!</span>

        <span class="c1">// add browserslist config to package.json (see below)</span>
        <span class="nx">autoprefixer</span><span class="o">:</span> <span class="p">{}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Then, enable the loader in Encore!</p>
<div class="highlight-diff notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span>// webpack.config.js

Encore
    // ...
<span class="gi">+     .enablePostCssLoader()</span>
;
</pre></div>
</td></tr></table></div>
<p>Because you just modified <code class="docutils literal notranslate"><span class="pre">webpack.config.js</span></code>, stop and restart Encore.</p>
<p>Thatâ€™s it! The <code class="docutils literal notranslate"><span class="pre">postcss-loader</span></code> will now be used for all CSS, Sass, etc files.
You can also pass options to the <a class="reference external" href="https://github.com/postcss/postcss-loader">postcss-loader</a><span class="link-target"> [https://github.com/postcss/postcss-loader]</span> by passing a callback:</p>
<div class="highlight-diff notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span>// webpack.config.js

Encore
    // ...
<span class="gi">+     .enablePostCssLoader((options) =&gt; {</span>
<span class="gi">+         options.config = {</span>
<span class="gi">+             // the directory where the postcss.config.js file is stored</span>
<span class="gi">+             path: &#39;path/to/config&#39;</span>
<span class="gi">+         };</span>
<span class="gi">+     })</span>
;
</pre></div>
</td></tr></table></div>
<div class="section" id="adding-browserslist-to-package-json">
<span id="browserslist-package-config"></span><h2>Adding browserslist to <code class="docutils literal notranslate"><span class="pre">package.json</span></code></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">autoprefixer</span></code> (and many other tools) need to know what browsers you want to
support. The best-practice is to configure this directly in your <code class="docutils literal notranslate"><span class="pre">package.json</span></code>
(so that all the tools can read this):</p>
<div class="highlight-diff notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>{
<span class="gi">+  &quot;browserslist&quot;: [</span>
<span class="gi">+    &quot;defaults&quot;</span>
<span class="gi">+  ]</span>
}
</pre></div>
</td></tr></table></div>
<p>The <code class="docutils literal notranslate"><span class="pre">defaults</span></code> option is recommended for most users and would be equivalent
to the following browserslist:</p>
<div class="highlight-diff notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span>{
<span class="gi">+  &quot;browserslist&quot;: [</span>
<span class="gi">+    &quot;&gt; 0.5%&quot;,</span>
<span class="gi">+    &quot;last 2 versions&quot;,</span>
<span class="gi">+    &quot;Firefox ESR&quot;,</span>
<span class="gi">+    &quot;not dead&quot;</span>
<span class="gi">+  ]</span>
}
</pre></div>
</td></tr></table></div>
<p>See <a class="reference external" href="https://github.com/browserslist/browserslist">browserslist</a><span class="link-target"> [https://github.com/browserslist/browserslist]</span> for more details on the syntax.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>