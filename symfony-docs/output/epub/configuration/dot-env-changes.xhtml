<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>Nov 2018 Changes to .env &amp; How to Update</title>
    <link rel="stylesheet" href="../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/rtd_custom.css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="nov-2018-changes-to-env-how-to-update">
<h1>Nov 2018 Changes to .env &amp; How to Update</h1>
<p>In November 2018, several changes were made to the core Symfony <em>recipes</em> related
to the <code class="docutils literal notranslate"><span class="pre">.env</span></code> file. These changes make working with environment variables easier
and more consistent - especially when writing functional tests.</p>
<p>If your app was started before November 2018, your app <strong>does not require any changes
to keep working</strong>. However, if/when you are ready to take advantage of these improvements,
you will need to make a few small updates.</p>
<div class="section" id="what-changed-exactly">
<h2>What Changed Exactly?</h2>
<p>But first, what changed? On a high-level, not much. Here’s a summary of the most
important changes:</p>
<ul class="simple">
<li><p>A) The <code class="docutils literal notranslate"><span class="pre">.env.dist</span></code> file no longer exists. Its contents should be moved to your
<code class="docutils literal notranslate"><span class="pre">.env</span></code> file (see the next point).</p></li>
<li><p>B) The <code class="docutils literal notranslate"><span class="pre">.env</span></code> file <strong>is</strong> now committed to your repository. It was previously ignored
via the <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> file (the updated recipe does not ignore this file). Because
this file is committed, it should contain non-sensitive, default values. The
<code class="docutils literal notranslate"><span class="pre">.env</span></code> can be seen as the previous <code class="docutils literal notranslate"><span class="pre">.env.dist</span></code> file.</p></li>
<li><p>C) A <code class="docutils literal notranslate"><span class="pre">.env.local</span></code> file can now be created to <em>override</em> values in <code class="docutils literal notranslate"><span class="pre">.env</span></code> for
your machine. This file is ignored in the new <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code>.</p></li>
<li><p>D) When testing, your <code class="docutils literal notranslate"><span class="pre">.env</span></code> file is now read, making it consistent with all
other environments. You can also create a <code class="docutils literal notranslate"><span class="pre">.env.test</span></code> file for test-environment
overrides.</p></li>
<li><p>E) <a class="reference external" href="https://github.com/symfony/recipes/pull/501">One further change to the recipe in January 2019</a><span class="link-target"> [https://github.com/symfony/recipes/pull/501]</span> means that your <code class="docutils literal notranslate"><span class="pre">.env</span></code>
files are <em>always</em> loaded, even if you set an <code class="docutils literal notranslate"><span class="pre">APP_ENV=prod</span></code> environment
variable. The purpose is for the <code class="docutils literal notranslate"><span class="pre">.env</span></code> files to define default values that
you can override if you want to with real environment values.</p></li>
</ul>
<p>There are a few other improvements, but these are the most important. To take advantage
of these, you <em>will</em> need to modify a few files in your existing app.</p>
</div>
<div class="section" id="updating-my-application">
<h2>Updating My Application</h2>
<p>If you created your application after November 15th 2018, you don’t need to make
any changes! Otherwise, here is the list of changes you’ll need to make - these
changes can be made to any Symfony 3.4 or higher app:</p>
<ol class="arabic">
<li><p>Update your <code class="docutils literal notranslate"><span class="pre">public/index.php</span></code> file to add the code of the <a class="reference external" href="https://github.com/symfony/recipes/blob/master/symfony/framework-bundle/5.1/public/index.php">public/index.php</a><span class="link-target"> [https://github.com/symfony/recipes/blob/master/symfony/framework-bundle/5.1/public/index.php]</span>
file provided by Symfony. If you’ve customized this file, make sure to keep
those changes (but add the rest of the changes made by Symfony).</p></li>
<li><p>Update your <code class="docutils literal notranslate"><span class="pre">bin/console</span></code> file to add the code of the <a class="reference external" href="https://github.com/symfony/recipes/blob/master/symfony/console/5.1/bin/console">bin/console</a><span class="link-target"> [https://github.com/symfony/recipes/blob/master/symfony/console/5.1/bin/console]</span> file
provided by Symfony.</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code>:</p>
<div class="highlight-diff notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span># .gitignore
# ...

###&gt; symfony/framework-bundle ###
<span class="gd">- /.env</span>
<span class="gi">+ /.env.local</span>
<span class="gi">+ /.env.local.php</span>
<span class="gi">+ /.env.*.local</span>

# ...
</pre></div>
</td></tr></table></div>
</li>
<li><p>Rename <code class="docutils literal notranslate"><span class="pre">.env</span></code> to <code class="docutils literal notranslate"><span class="pre">.env.local</span></code> and <code class="docutils literal notranslate"><span class="pre">.env.dist</span></code> to <code class="docutils literal notranslate"><span class="pre">.env</span></code>:</p>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Unix</span>
<span class="gp">$</span> mv .env .env.local
<span class="gp">$</span> git mv .env.dist .env

<span class="c1"># Windows</span>
<span class="go">C:\&gt; move .env .env.local</span>
<span class="go">C:\&gt; git mv .env.dist .env</span>
</pre></div>
</td></tr></table></div>
<p>You can also update the <a class="reference external" href="https://github.com/symfony/recipes/blob/master/symfony/flex/1.0/.env">comment on the top of .env</a><span class="link-target"> [https://github.com/symfony/recipes/blob/master/symfony/flex/1.0/.env]</span> to reflect the new changes.</p>
</li>
<li><p>If you’re using PHPUnit, you will also need to <a class="reference external" href="https://github.com/symfony/recipes/blob/master/symfony/phpunit-bridge/3.3/.env.test">create a new .env.test</a><span class="link-target"> [https://github.com/symfony/recipes/blob/master/symfony/phpunit-bridge/3.3/.env.test]</span> file
and update your <a class="reference external" href="https://github.com/symfony/recipes/blob/master/symfony/phpunit-bridge/3.3/phpunit.xml.dist">phpunit.xml.dist file</a><span class="link-target"> [https://github.com/symfony/recipes/blob/master/symfony/phpunit-bridge/3.3/phpunit.xml.dist]</span> so it loads the <code class="docutils literal notranslate"><span class="pre">tests/bootstrap.php</span></code>
file.</p></li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>