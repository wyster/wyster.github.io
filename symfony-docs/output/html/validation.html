

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Validation &mdash; Symfony Framework Documentation  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/rtd_custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="How to Create a Custom Validation Constraint" href="validation/custom_constraint.html" />
    <link rel="prev" title="The XLIFF format" href="translation/xliff.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #f0f0f0" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/symfony-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                5.2}
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="quick_tour/index.html">The Quick Tour</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started/index.html">Getting Started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="best_practices.html">The Symfony Framework Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="bundles.html">The Bundle System</a></li>
<li class="toctree-l1"><a class="reference internal" href="cache.html">Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="console.html">Console Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="doctrine.html">Databases and the Doctrine ORM</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">How to Deploy a Symfony Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.html">Swift Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="event_dispatcher.html">Events and Event Listeners</a></li>
<li class="toctree-l1"><a class="reference internal" href="forms.html">Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="frontend.html">Managing CSS and JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="http_cache.html">HTTP Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="http_client.html">HTTP Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="lock.html">Dealing with Concurrency with Locks</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="mailer.html">Sending Emails with Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="mercure.html">Pushing Data to Clients Using the Mercure Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="messenger.html">Messenger: Sync &amp; Queued Message Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration.html">Migrating an Existing Application to Symfony</a></li>
<li class="toctree-l1"><a class="reference internal" href="notifier.html">Creating and Sending Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="profiler.html">Profiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="rate_limiter.html">Rate Limiter</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing.html">Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="session.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Installing &amp; Setting up the Symfony Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="serializer.html">How to Use the Serializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_container.html">Service Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="translation.html">Translations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Validation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-basics-of-validation">The Basics of Validation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-the-validator-service">Using the Validator Service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#constraints">Constraints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supported-constraints">Supported Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-constraints">Basic Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#string-constraints">String Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#comparison-constraints">Comparison Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#number-constraints">Number Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#date-constraints">Date Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#choice-constraints">Choice Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-constraints">File Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#financial-and-other-number-constraints">Financial and other Number Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-constraints">Other Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constraint-configuration">Constraint Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#constraints-in-form-classes">Constraints in Form Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#constraint-targets">Constraint Targets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#properties">Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getters">Getters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#classes">Classes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#debugging-the-constraints">Debugging the Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#final-thoughts">Final Thoughts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#learn-more">Learn more</a><ul>
<li class="toctree-l3"><a class="reference internal" href="validation/custom_constraint.html">How to Create a Custom Validation Constraint</a></li>
<li class="toctree-l3"><a class="reference internal" href="validation/groups.html">How to Apply only a Subset of all Your Validation Constraints (Validation Groups)</a></li>
<li class="toctree-l3"><a class="reference internal" href="validation/raw_values.html">How to Validate Raw Values (Scalar Values and Arrays)</a></li>
<li class="toctree-l3"><a class="reference internal" href="validation/sequence_provider.html">How to Sequentially Apply Validation Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="validation/severity.html">How to Handle Different Error Levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="validation/translations.html">How to Translate Validation Constraint Messages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="web_link.html">Asset Preloading and Resource Hints with HTTP/2 and WebLink</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="components/index.html">The Components</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference/index.html">Reference Documents</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing/index.html">Contributing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="create_framework/index.html">Create your own PHP Framework</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Symfony Framework Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Validation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/validation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="validation">
<span id="index-0"></span><h1>Validation<a class="headerlink" href="#validation" title="Permalink to this headline">¶</a></h1>
<p>Validation is a very common task in web applications. Data entered in forms
needs to be validated. Data also needs to be validated before it is written
into a database or passed to a web service.</p>
<p>Symfony provides a <a class="reference external" href="https://github.com/symfony/validator">Validator</a> component to handle this for you. This
component is based on the <a class="reference external" href="https://jcp.org/en/jsr/detail?id=303">JSR303 Bean Validation specification</a>.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>In applications using <a class="reference internal" href="setup.html#symfony-flex"><span class="std std-ref">Symfony Flex</span></a>, run this command to
install the validator before using it:</p>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> composer require symfony/validator doctrine/annotations
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="the-basics-of-validation">
<span id="index-1"></span><h2>The Basics of Validation<a class="headerlink" href="#the-basics-of-validation" title="Permalink to this headline">¶</a></h2>
<p>The best way to understand validation is to see it in action. To start, suppose
you’ve created a plain-old-PHP object that you need to use somewhere in
your application:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$name</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>So far, this is an ordinary class that serves some purpose inside your
application. The goal of validation is to tell you if the data of an object is
valid. For this to work, you’ll configure a list of rules (called
<a class="reference internal" href="#validation-constraints"><span class="std std-ref">constraints</span></a>) that the object must follow in
order to be valid. These rules are usually defined using PHP code or
annotations but they can also be defined as <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> or <code class="docutils literal notranslate"><span class="pre">.xml</span></code> files inside
the <code class="docutils literal notranslate"><span class="pre">config/validator/</span></code> directory:</p>
<p>For example, to guarantee that the <code class="docutils literal notranslate"><span class="pre">$name</span></code> property is not empty, add the
following:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\NotBlank</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$name</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/validator/validation.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">App\Entity\Author</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">NotBlank</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/validator/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping</span>
<span class="s">        https://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;App\Entity\Author&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;NotBlank&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>
<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints\NotBlank</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$name</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">NotBlank</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Symfony’s validator uses PHP reflection, as well as <em>“getter”</em> methods, to
get the value of any property, so they can be public, private or protected
(see <a class="reference internal" href="#validator-constraint-targets"><span class="std std-ref">Constraint Targets</span></a>).</p>
</div>
<div class="section" id="using-the-validator-service">
<span id="index-2"></span><h3>Using the Validator Service<a class="headerlink" href="#using-the-validator-service" title="Permalink to this headline">¶</a></h3>
<p>Next, to actually validate an <code class="docutils literal notranslate"><span class="pre">Author</span></code> object, use the <code class="docutils literal notranslate"><span class="pre">validate()</span></code> method
on the <code class="docutils literal notranslate"><span class="pre">validator</span></code> service (which implements <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Validator/Validator/ValidatorInterface.php" title="Symfony\Component\Validator\Validator\ValidatorInterface"><span class="pre">ValidatorInterface</span></a></code>).
The job of the <code class="docutils literal notranslate"><span class="pre">validator</span></code> is to read the constraints (i.e. rules)
of a class and verify if the data on the object satisfies those
constraints. If validation fails, a non-empty list of errors
(<code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Validator/ConstraintViolationList.php" title="Symfony\Component\Validator\ConstraintViolationList"><span class="pre">ConstraintViolationList</span></a></code> class) is
returned. Take this simple example from inside a controller:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">App\Entity\Author</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Validator\ValidatorInterface</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">author</span><span class="p">(</span><span class="nx">ValidatorInterface</span> <span class="nv">$validator</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$author</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Author</span><span class="p">();</span>

    <span class="c1">// ... do something to the $author object</span>

    <span class="nv">$errors</span> <span class="o">=</span> <span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="nv">$author</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="cm">/*</span>
<span class="cm">         * Uses a __toString method on the $errors variable which is a</span>
<span class="cm">         * ConstraintViolationList object. This gives us a nice string</span>
<span class="cm">         * for debugging.</span>
<span class="cm">         */</span>
        <span class="nv">$errorsString</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$errors</span><span class="p">;</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nv">$errorsString</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;The author is valid! Yes!&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">$name</span></code> property is empty, you will see the following error
message:</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Object(App\Entity\Author).name:
    This value should not be blank
</pre></div>
</td></tr></table></div>
<p>If you insert a value into the <code class="docutils literal notranslate"><span class="pre">name</span></code> property, the happy success message
will appear.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Most of the time, you won’t interact directly with the <code class="docutils literal notranslate"><span class="pre">validator</span></code>
service or need to worry about printing out the errors. Most of the time,
you’ll use validation indirectly when handling submitted form data. For
more information, see <a class="reference internal" href="forms.html#validating-forms"><span class="std std-ref">how to validate Symfony forms</span></a>.</p>
</div>
<p>You could also pass the collection of errors into a template:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;author/validation.html.twig&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="s1">&#39;errors&#39;</span> <span class="o">=&gt;</span> <span class="nv">$errors</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Inside the template, you can output the list of errors exactly as needed:</p>
<div class="highlight-html+twig notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">{# templates/author/validation.html.twig #}</span>
<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>The author has the following errors<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">error</span> <span class="k">in</span> <span class="nv">errors</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">error.message</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Each validation error (called a “constraint violation”), is represented by
a <code class="docutils literal notranslate"><a class="reference external" href="https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Validator/ConstraintViolation.php" title="Symfony\Component\Validator\ConstraintViolation"><span class="pre">ConstraintViolation</span></a></code> object.</p>
</div>
</div>
</div>
<div class="section" id="configuration">
<span id="index-3"></span><h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Before using the Symfony validator, make sure it’s enabled in the main config
file:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/packages/framework.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">framework</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">validation</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">enabled</span><span class="p p-Indicator">:</span> <span class="nv">true</span> <span class="p p-Indicator">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/packages/framework.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xmlns:framework=</span><span class="s">&quot;http://symfony.com/schema/dic/symfony&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services</span>
<span class="s">        https://symfony.com/schema/dic/services/services-1.0.xsd</span>
<span class="s">        http://symfony.com/schema/dic/symfony https://symfony.com/schema/dic/symfony/symfony-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;framework:config&gt;</span>
        <span class="nt">&lt;framework:validation</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/framework:config&gt;</span>
<span class="nt">&lt;/container&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/packages/framework.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;validation&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;enabled&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">]);</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>Besides, if you plan to use annotations to configure validation, replace the
previous configuration by the following:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/packages/framework.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">framework</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">validation</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">enable_annotations</span><span class="p p-Indicator">:</span> <span class="nv">true</span> <span class="p p-Indicator">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/packages/framework.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xmlns:framework=</span><span class="s">&quot;http://symfony.com/schema/dic/symfony&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services</span>
<span class="s">        https://symfony.com/schema/dic/services/services-1.0.xsd</span>
<span class="s">        http://symfony.com/schema/dic/symfony https://symfony.com/schema/dic/symfony/symfony-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;framework:config&gt;</span>
        <span class="nt">&lt;framework:validation</span> <span class="na">enable-annotations=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/framework:config&gt;</span>
<span class="nt">&lt;/container&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/packages/framework.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;validation&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;enable_annotations&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">]);</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">When using PHP, YAML, and XML files instead of annotations, Symfony looks
for by default in the <code class="docutils literal notranslate"><span class="pre">config/validator/</span></code> directory, but you can configure
other directories with the <a class="reference internal" href="reference/configuration/framework.html#reference-validation-mapping"><span class="std std-ref">validation.mapping.paths</span></a> option.</p>
</div>
</div>
<div class="section" id="constraints">
<span id="validation-constraints"></span><span id="index-4"></span><h2>Constraints<a class="headerlink" href="#constraints" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">validator</span></code> is designed to validate objects against <em>constraints</em> (i.e.
rules). In order to validate an object, simply map one or more constraints
to its class and then pass it to the <code class="docutils literal notranslate"><span class="pre">validator</span></code> service.</p>
<p>Behind the scenes, a constraint is simply a PHP object that makes an assertive
statement. In real life, a constraint could be: ‘The cake must not be burned’.
In Symfony, constraints are similar: they are assertions that a condition
is true. Given a value, a constraint will tell you if that value
adheres to the rules of the constraint.</p>
<div class="section" id="supported-constraints">
<h3>Supported Constraints<a class="headerlink" href="#supported-constraints" title="Permalink to this headline">¶</a></h3>
<p>Symfony packages many of the most commonly-needed constraints:</p>
</div>
<div class="section" id="basic-constraints">
<h3>Basic Constraints<a class="headerlink" href="#basic-constraints" title="Permalink to this headline">¶</a></h3>
<p>These are the basic constraints: use them to assert very basic things about
the value of properties or the return value of methods on your object.</p>
<ul class="simple">
<li><a class="reference internal" href="reference/constraints/NotBlank.html"><span class="doc">NotBlank</span></a></li>
<li><a class="reference internal" href="reference/constraints/Blank.html"><span class="doc">Blank</span></a></li>
<li><a class="reference internal" href="reference/constraints/NotNull.html"><span class="doc">NotNull</span></a></li>
<li><a class="reference internal" href="reference/constraints/IsNull.html"><span class="doc">IsNull</span></a></li>
<li><a class="reference internal" href="reference/constraints/IsTrue.html"><span class="doc">IsTrue</span></a></li>
<li><a class="reference internal" href="reference/constraints/IsFalse.html"><span class="doc">IsFalse</span></a></li>
<li><a class="reference internal" href="reference/constraints/Type.html"><span class="doc">Type</span></a></li>
</ul>
</div>
<div class="section" id="string-constraints">
<h3>String Constraints<a class="headerlink" href="#string-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference/constraints/Email.html"><span class="doc">Email</span></a></li>
<li><a class="reference internal" href="reference/constraints/ExpressionLanguageSyntax.html"><span class="doc">ExpressionLanguageSyntax</span></a></li>
<li><a class="reference internal" href="reference/constraints/Length.html"><span class="doc">Length</span></a></li>
<li><a class="reference internal" href="reference/constraints/Url.html"><span class="doc">Url</span></a></li>
<li><a class="reference internal" href="reference/constraints/Regex.html"><span class="doc">Regex</span></a></li>
<li><a class="reference internal" href="reference/constraints/Hostname.html"><span class="doc">Hostname</span></a></li>
<li><a class="reference internal" href="reference/constraints/Ip.html"><span class="doc">Ip</span></a></li>
<li><a class="reference internal" href="reference/constraints/Json.html"><span class="doc">Json</span></a></li>
<li><a class="reference internal" href="reference/constraints/Uuid.html"><span class="doc">Uuid</span></a></li>
<li><a class="reference internal" href="reference/constraints/Ulid.html"><span class="doc">Ulid</span></a></li>
<li><a class="reference internal" href="reference/constraints/UserPassword.html"><span class="doc">UserPassword</span></a></li>
<li><a class="reference internal" href="reference/constraints/NotCompromisedPassword.html"><span class="doc">NotCompromisedPassword</span></a></li>
</ul>
</div>
<div class="section" id="comparison-constraints">
<h3>Comparison Constraints<a class="headerlink" href="#comparison-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference/constraints/EqualTo.html"><span class="doc">EqualTo</span></a></li>
<li><a class="reference internal" href="reference/constraints/NotEqualTo.html"><span class="doc">NotEqualTo</span></a></li>
<li><a class="reference internal" href="reference/constraints/IdenticalTo.html"><span class="doc">IdenticalTo</span></a></li>
<li><a class="reference internal" href="reference/constraints/NotIdenticalTo.html"><span class="doc">NotIdenticalTo</span></a></li>
<li><a class="reference internal" href="reference/constraints/LessThan.html"><span class="doc">LessThan</span></a></li>
<li><a class="reference internal" href="reference/constraints/LessThanOrEqual.html"><span class="doc">LessThanOrEqual</span></a></li>
<li><a class="reference internal" href="reference/constraints/GreaterThan.html"><span class="doc">GreaterThan</span></a></li>
<li><a class="reference internal" href="reference/constraints/GreaterThanOrEqual.html"><span class="doc">GreaterThanOrEqual</span></a></li>
<li><a class="reference internal" href="reference/constraints/Range.html"><span class="doc">Range</span></a></li>
<li><a class="reference internal" href="reference/constraints/DivisibleBy.html"><span class="doc">DivisibleBy</span></a></li>
<li><a class="reference internal" href="reference/constraints/Unique.html"><span class="doc">Unique</span></a></li>
</ul>
</div>
<div class="section" id="number-constraints">
<h3>Number Constraints<a class="headerlink" href="#number-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference/constraints/Positive.html"><span class="doc">Positive</span></a></li>
<li><a class="reference internal" href="reference/constraints/PositiveOrZero.html"><span class="doc">PositiveOrZero</span></a></li>
<li><a class="reference internal" href="reference/constraints/Negative.html"><span class="doc">Negative</span></a></li>
<li><a class="reference internal" href="reference/constraints/NegativeOrZero.html"><span class="doc">NegativeOrZero</span></a></li>
</ul>
</div>
<div class="section" id="date-constraints">
<h3>Date Constraints<a class="headerlink" href="#date-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference/constraints/Date.html"><span class="doc">Date</span></a></li>
<li><a class="reference internal" href="reference/constraints/DateTime.html"><span class="doc">DateTime</span></a></li>
<li><a class="reference internal" href="reference/constraints/Time.html"><span class="doc">Time</span></a></li>
<li><a class="reference internal" href="reference/constraints/Timezone.html"><span class="doc">Timezone</span></a></li>
</ul>
</div>
<div class="section" id="choice-constraints">
<h3>Choice Constraints<a class="headerlink" href="#choice-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference/constraints/Choice.html"><span class="doc">Choice</span></a></li>
<li><a class="reference internal" href="reference/constraints/Language.html"><span class="doc">Language</span></a></li>
<li><a class="reference internal" href="reference/constraints/Locale.html"><span class="doc">Locale</span></a></li>
<li><a class="reference internal" href="reference/constraints/Country.html"><span class="doc">Country</span></a></li>
</ul>
</div>
<div class="section" id="file-constraints">
<h3>File Constraints<a class="headerlink" href="#file-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference/constraints/File.html"><span class="doc">File</span></a></li>
<li><a class="reference internal" href="reference/constraints/Image.html"><span class="doc">Image</span></a></li>
</ul>
</div>
<div class="section" id="financial-and-other-number-constraints">
<h3>Financial and other Number Constraints<a class="headerlink" href="#financial-and-other-number-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference/constraints/Bic.html"><span class="doc">Bic</span></a></li>
<li><a class="reference internal" href="reference/constraints/CardScheme.html"><span class="doc">CardScheme</span></a></li>
<li><a class="reference internal" href="reference/constraints/Currency.html"><span class="doc">Currency</span></a></li>
<li><a class="reference internal" href="reference/constraints/Luhn.html"><span class="doc">Luhn</span></a></li>
<li><a class="reference internal" href="reference/constraints/Iban.html"><span class="doc">Iban</span></a></li>
<li><a class="reference internal" href="reference/constraints/Isbn.html"><span class="doc">Isbn</span></a></li>
<li><a class="reference internal" href="reference/constraints/Issn.html"><span class="doc">Issn</span></a></li>
<li><a class="reference internal" href="reference/constraints/Isin.html"><span class="doc">Isin</span></a></li>
</ul>
</div>
<div class="section" id="other-constraints">
<h3>Other Constraints<a class="headerlink" href="#other-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference/constraints/AtLeastOneOf.html"><span class="doc">AtLeastOneOf</span></a></li>
<li><a class="reference internal" href="reference/constraints/Sequentially.html"><span class="doc">Sequentially</span></a></li>
<li><a class="reference internal" href="reference/constraints/Compound.html"><span class="doc">Compound</span></a></li>
<li><a class="reference internal" href="reference/constraints/Callback.html"><span class="doc">Callback</span></a></li>
<li><a class="reference internal" href="reference/constraints/Expression.html"><span class="doc">Expression</span></a></li>
<li><a class="reference internal" href="reference/constraints/All.html"><span class="doc">All</span></a></li>
<li><a class="reference internal" href="reference/constraints/Valid.html"><span class="doc">Valid</span></a></li>
<li><a class="reference internal" href="reference/constraints/Traverse.html"><span class="doc">Traverse</span></a></li>
<li><a class="reference internal" href="reference/constraints/Collection.html"><span class="doc">Collection</span></a></li>
<li><a class="reference internal" href="reference/constraints/Count.html"><span class="doc">Count</span></a></li>
<li><a class="reference internal" href="reference/constraints/UniqueEntity.html"><span class="doc">UniqueEntity</span></a></li>
</ul>
<p>You can also create your own custom constraints. This topic is covered in
the <a class="reference internal" href="validation/custom_constraint.html"><span class="doc">How to Create a Custom Validation Constraint</span></a> article.</p>
</div>
<div class="section" id="constraint-configuration">
<span id="validation-constraint-configuration"></span><span id="index-5"></span><h3>Constraint Configuration<a class="headerlink" href="#constraint-configuration" title="Permalink to this headline">¶</a></h3>
<p>Some constraints, like <a class="reference internal" href="reference/constraints/NotBlank.html"><span class="doc">NotBlank</span></a>,
are simple whereas others, like the <a class="reference internal" href="reference/constraints/Choice.html"><span class="doc">Choice</span></a>
constraint, have several configuration options available. Suppose that the
<code class="docutils literal notranslate"><span class="pre">Author</span></code> class has another property called <code class="docutils literal notranslate"><span class="pre">genre</span></code> that defines the
literature genre mostly associated with the author, which can be set to either
“fiction” or “non-fiction”:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\Choice(</span>
<span class="sd">     *     choices = { &quot;fiction&quot;, &quot;non-fiction&quot; },</span>
<span class="sd">     *     message = &quot;Choose a valid genre.&quot;</span>
<span class="sd">     * )</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$genre</span><span class="p">;</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/validator/validation.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">App\Entity\Author</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">genre</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Choice</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">choices</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">fiction</span><span class="p p-Indicator">,</span> <span class="nv">non-fiction</span><span class="p p-Indicator">],</span> <span class="nv">message</span><span class="p p-Indicator">:</span> <span class="nv">Choose a valid genre.</span> <span class="p p-Indicator">}</span>
        <span class="c1"># ...</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/validator/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping</span>
<span class="s">        https://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;App\Entity\Author&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;genre&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Choice&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;choices&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;value&gt;</span>fiction<span class="nt">&lt;/value&gt;</span>
                    <span class="nt">&lt;value&gt;</span>non-fiction<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/option&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;message&quot;</span><span class="nt">&gt;</span>Choose a valid genre.<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;/property&gt;</span>

        <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$genre</span><span class="p">;</span>

    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span><span class="s1">&#39;genre&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Assert\Choice</span><span class="p">([</span>
            <span class="s1">&#39;choices&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;fiction&#39;</span><span class="p">,</span> <span class="s1">&#39;non-fiction&#39;</span><span class="p">],</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Choose a valid genre.&#39;</span><span class="p">,</span>
        <span class="p">]));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p id="validation-default-option">The options of a constraint can always be passed in as an array. Some constraints,
however, also allow you to pass the value of one, “<em>default</em>”, option in place
of the array. In the case of the <code class="docutils literal notranslate"><span class="pre">Choice</span></code> constraint, the <code class="docutils literal notranslate"><span class="pre">choices</span></code>
options can be specified in this way.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\Choice({&quot;fiction&quot;, &quot;non-fiction&quot;})</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$genre</span><span class="p">;</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/validator/validation.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">App\Entity\Author</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">genre</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Choice</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">fiction</span><span class="p p-Indicator">,</span> <span class="nv">non-fiction</span><span class="p p-Indicator">]</span>
        <span class="c1"># ...</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/validator/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping</span>
<span class="s">        https://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;App\Entity\Author&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;genre&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Choice&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;value&gt;</span>fiction<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;value&gt;</span>non-fiction<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;/property&gt;</span>

        <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$genre</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span>
            <span class="s1">&#39;genre&#39;</span><span class="p">,</span>
            <span class="k">new</span> <span class="nx">Assert\Choice</span><span class="p">([</span><span class="s1">&#39;fiction&#39;</span><span class="p">,</span> <span class="s1">&#39;non-fiction&#39;</span><span class="p">])</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>This is purely meant to make the configuration of the most common option of
a constraint shorter and quicker.</p>
<p>If you’re ever unsure of how to specify an option, either check the namespace
<code class="docutils literal notranslate"><span class="pre">Symfony\Component\Validator\Constraints</span></code> for the constraint or play it safe
by always passing in an array of options (the first method shown above).</p>
</div>
</div>
<div class="section" id="constraints-in-form-classes">
<h2>Constraints in Form Classes<a class="headerlink" href="#constraints-in-form-classes" title="Permalink to this headline">¶</a></h2>
<p>Constraints can be defined while building the form via the <code class="docutils literal notranslate"><span class="pre">constraints</span></code> option
of the form fields:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">buildForm</span><span class="p">(</span><span class="nx">FormBuilderInterface</span> <span class="nv">$builder</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$builder</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;myField&#39;</span><span class="p">,</span> <span class="nx">TextType</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
            <span class="s1">&#39;constraints&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="k">new</span> <span class="nx">Length</span><span class="p">([</span><span class="s1">&#39;min&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">])]</span>
        <span class="p">])</span>
    <span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="constraint-targets">
<span id="validator-constraint-targets"></span><span id="index-6"></span><h2>Constraint Targets<a class="headerlink" href="#constraint-targets" title="Permalink to this headline">¶</a></h2>
<p>Constraints can be applied to a class property (e.g. <code class="docutils literal notranslate"><span class="pre">name</span></code>), a public
getter method (e.g. <code class="docutils literal notranslate"><span class="pre">getFullName()</span></code>) or an entire class. Property constraints
are the most common and easy to use. Getter constraints allow you to specify
more complex validation rules. Finally, class constraints are intended
for scenarios where you want to validate a class as a whole.</p>
<div class="section" id="properties">
<span id="validation-property-target"></span><span id="index-7"></span><h3>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h3>
<p>Validating class properties is the most basic validation technique. Symfony
allows you to validate private, protected or public properties. The next
listing shows you how to configure the <code class="docutils literal notranslate"><span class="pre">$firstName</span></code> property of an <code class="docutils literal notranslate"><span class="pre">Author</span></code>
class to have at least 3 characters.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Author.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\NotBlank</span>
<span class="sd">     * @Assert\Length(min=3)</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$firstName</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/validator/validation.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">App\Entity\Author</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">firstName</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">NotBlank</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Length</span><span class="p p-Indicator">:</span>
                <span class="l l-Scalar l-Scalar-Plain">min</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/validator/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping</span>
<span class="s">        https://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;App\Entity\Author&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;firstName&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;NotBlank&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Length&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;min&quot;</span><span class="nt">&gt;</span>3<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$firstName</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span><span class="s1">&#39;firstName&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Assert\NotBlank</span><span class="p">());</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span>
            <span class="s1">&#39;firstName&#39;</span><span class="p">,</span>
            <span class="k">new</span> <span class="nx">Assert\Length</span><span class="p">([</span><span class="s2">&quot;min&quot;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">])</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
</div>
<div class="section" id="getters">
<span id="index-8"></span><h3>Getters<a class="headerlink" href="#getters" title="Permalink to this headline">¶</a></h3>
<p>Constraints can also be applied to the return value of a method. Symfony
allows you to add a constraint to any public method whose name starts with
“get”, “is” or “has”. In this guide, these types of methods are referred to
as “getters”.</p>
<p>The benefit of this technique is that it allows you to validate your object
dynamically. For example, suppose you want to make sure that a password field
doesn’t match the first name of the user (for security reasons). You can
do this by creating an <code class="docutils literal notranslate"><span class="pre">isPasswordSafe()</span></code> method, and then asserting that
this method must return <code class="docutils literal notranslate"><span class="pre">true</span></code>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\IsTrue(message=&quot;The password cannot match your first name&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">isPasswordSafe</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ... return true or false</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/validator/validation.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">App\Entity\Author</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">getters</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">passwordSafe</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="s">&#39;IsTrue&#39;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">message</span><span class="p p-Indicator">:</span> <span class="s">&#39;The</span><span class="nv"> </span><span class="s">password</span><span class="nv"> </span><span class="s">cannot</span><span class="nv"> </span><span class="s">match</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">first</span><span class="nv"> </span><span class="s">name&#39;</span> <span class="p p-Indicator">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/validator/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping</span>
<span class="s">        https://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;App\Entity\Author&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;getter</span> <span class="na">property=</span><span class="s">&quot;passwordSafe&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;IsTrue&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;message&quot;</span><span class="nt">&gt;</span>The password cannot match your first name<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;/getter&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addGetterConstraint</span><span class="p">(</span><span class="s1">&#39;passwordSafe&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Assert\IsTrue</span><span class="p">([</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;The password cannot match your first name&#39;</span><span class="p">,</span>
        <span class="p">]));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>Now, create the <code class="docutils literal notranslate"><span class="pre">isPasswordSafe()</span></code> method and include the logic you need:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">isPasswordSafe</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">firstName</span> <span class="o">!==</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">password</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The keen-eyed among you will have noticed that the prefix of the getter
(“get”, “is” or “has”) is omitted in the mappings for the YAML, XML and PHP
formats. This allows you to move the constraint to a property with the same
name later (or vice versa) without changing your validation logic.</p>
</div>
</div>
<div class="section" id="classes">
<span id="validation-class-target"></span><h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<p>Some constraints apply to the entire class being validated. For example,
the <a class="reference internal" href="reference/constraints/Callback.html"><span class="doc">Callback</span></a> constraint is a generic
constraint that’s applied to the class itself. When that class is validated,
methods specified by that constraint are simply executed so that each can
provide more custom validation.</p>
</div>
</div>
<div class="section" id="debugging-the-constraints">
<h2>Debugging the Constraints<a class="headerlink" href="#debugging-the-constraints" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 5.2: </span>The <code class="docutils literal notranslate"><span class="pre">debug:validator</span></code> command was introduced in Symfony 5.2.</p>
</div>
<p>Use the <code class="docutils literal notranslate"><span class="pre">debug:validator</span></code> command to list the validation constraints of a
given class:</p>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> php bin/console debug:validator <span class="s1">&#39;App\Entity\SomeClass&#39;</span>

<span class="go">    App\Entity\SomeClass</span>
<span class="go">    -----------------------------------------------------</span>

<span class="go">    +---------------+--------------------------------------------------+---------+------------------------------------------------------------+</span>
<span class="go">    | Property      | Name                                             | Groups  | Options                                                    |</span>
<span class="go">    +---------------+--------------------------------------------------+---------+------------------------------------------------------------+</span>
<span class="go">    | firstArgument | Symfony\Component\Validator\Constraints\NotBlank | Default | [                                                          |</span>
<span class="go">    |               |                                                  |         |   &quot;message&quot; =&gt; &quot;This value should not be blank.&quot;,          |</span>
<span class="go">    |               |                                                  |         |   &quot;allowNull&quot; =&gt; false,                                    |</span>
<span class="go">    |               |                                                  |         |   &quot;normalizer&quot; =&gt; null,                                    |</span>
<span class="go">    |               |                                                  |         |   &quot;payload&quot; =&gt; null                                        |</span>
<span class="go">    |               |                                                  |         | ]                                                          |</span>
<span class="go">    | firstArgument | Symfony\Component\Validator\Constraints\Email    | Default | [                                                          |</span>
<span class="go">    |               |                                                  |         |   &quot;message&quot; =&gt; &quot;This value is not a valid email address.&quot;, |</span>
<span class="go">    |               |                                                  |         |   &quot;mode&quot; =&gt; null,                                          |</span>
<span class="go">    |               |                                                  |         |   &quot;normalizer&quot; =&gt; null,                                    |</span>
<span class="go">    |               |                                                  |         |   &quot;payload&quot; =&gt; null                                        |</span>
<span class="go">    |               |                                                  |         | ]                                                          |</span>
<span class="go">    +---------------+--------------------------------------------------+---------+------------------------------------------------------------+</span>
</pre></div>
</td></tr></table></div>
<p>You can also validate all the classes stored in a given directory:</p>
<div class="highlight-terminal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> php bin/console debug:validator src/Entity
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="final-thoughts">
<h2>Final Thoughts<a class="headerlink" href="#final-thoughts" title="Permalink to this headline">¶</a></h2>
<p>The Symfony <code class="docutils literal notranslate"><span class="pre">validator</span></code> is a powerful tool that can be leveraged to
guarantee that the data of any object is “valid”. The power behind validation
lies in “constraints”, which are rules that you can apply to properties or
getter methods of your object. And while you’ll most commonly use the validation
framework indirectly when using forms, remember that it can be used anywhere
to validate any object.</p>
</div>
<div class="section" id="learn-more">
<h2>Learn more<a class="headerlink" href="#learn-more" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="validation/custom_constraint.html">How to Create a Custom Validation Constraint</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation/groups.html">How to Apply only a Subset of all Your Validation Constraints (Validation Groups)</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation/raw_values.html">How to Validate Raw Values (Scalar Values and Arrays)</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation/sequence_provider.html">How to Sequentially Apply Validation Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation/severity.html">How to Handle Different Error Levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation/translations.html">How to Translate Validation Constraint Messages</a></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2004-2020 Fabien Potencier

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>