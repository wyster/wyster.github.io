

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How to Embed a Collection of Forms &mdash; Symfony Framework Documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/rtd_custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to Reduce Code Duplication with “inherit_data”" href="inherit_data_option.html" />
    <link rel="prev" title="How to Embed Forms" href="embedded.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #f0f0f0" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/symfony-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                5.2}
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../quick_tour/index.html">The Quick Tour</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../best_practices.html">The Symfony Framework Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bundles.html">The Bundle System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cache.html">Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console.html">Console Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doctrine.html">Databases and the Doctrine ORM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">How to Deploy a Symfony Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../email.html">Swift Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../event_dispatcher.html">Events and Event Listeners</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../forms.html">Forms</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../forms.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../forms.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../forms.html#building-forms">Building Forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../forms.html#rendering-forms">Rendering Forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../forms.html#processing-forms">Processing Forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../forms.html#validating-forms">Validating Forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../forms.html#other-common-form-features">Other Common Form Features</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../forms.html#learn-more">Learn more</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../reference/forms/types.html">Form Types Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../controller/upload_file.html">How to Upload Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/csrf.html">How to Implement CSRF Protection</a></li>
<li class="toctree-l3"><a class="reference internal" href="form_dependencies.html">How to Access Services or Config from Inside a Form</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_custom_field_type.html">How to Create a Custom Form Field Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_transformers.html">How to Use Data Transformers</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_mappers.html">When and How to Use Data Mappers</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_form_type_extension.html">How to Create a Form Type Extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="type_guesser.html">Creating a custom Type Guesser</a></li>
<li class="toctree-l3"><a class="reference internal" href="bootstrap4.html">Bootstrap 4 Form Theme</a></li>
<li class="toctree-l3"><a class="reference internal" href="form_customization.html">How to Customize Form Rendering</a></li>
<li class="toctree-l3"><a class="reference internal" href="form_themes.html">How to Work with Form Themes</a></li>
<li class="toctree-l3"><a class="reference internal" href="events.html">Form Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic_form_modification.html">How to Dynamically Modify Forms Using Form Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="validation_groups.html">How to Define the Validation Groups to Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="validation_group_service_resolver.html">How to Dynamically Configure Form Validation Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="button_based_validation.html">How to Choose Validation Groups Based on the Clicked Button</a></li>
<li class="toctree-l3"><a class="reference internal" href="disabling_validation.html">How to Disable the Validation of Submitted Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="direct_submit.html">How to Use the submit() Function to Handle Form Submissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="embedded.html">How to Embed Forms</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">How to Embed a Collection of Forms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#allowing-new-tags-with-the-prototype">Allowing “new” Tags with the “Prototype”</a></li>
<li class="toctree-l4"><a class="reference internal" href="#allowing-tags-to-be-removed">Allowing Tags to be Removed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="inherit_data_option.html">How to Reduce Code Duplication with “inherit_data”</a></li>
<li class="toctree-l3"><a class="reference internal" href="multiple_buttons.html">How to Submit a Form with Multiple Buttons</a></li>
<li class="toctree-l3"><a class="reference internal" href="unit_testing.html">How to Unit Test your Forms</a></li>
<li class="toctree-l3"><a class="reference internal" href="use_empty_data.html">How to Configure empty Data for a Form Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="without_class.html">How to Use a Form without a Data Class</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../frontend.html">Managing CSS and JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_cache.html">HTTP Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_client.html">HTTP Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lock.html">Dealing with Concurrency with Locks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mailer.html">Sending Emails with Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mercure.html">Pushing Data to Clients Using the Mercure Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../messenger.html">Messenger: Sync &amp; Queued Message Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">Migrating an Existing Application to Symfony</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notifier.html">Creating and Sending Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../profiler.html">Profiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rate_limiter.html">Rate Limiter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../routing.html">Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../session.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setup.html">Installing &amp; Setting up the Symfony Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../serializer.html">How to Use the Serializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../service_container.html">Service Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../translation.html">Translations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../validation.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web_link.html">Asset Preloading and Resource Hints with HTTP/2 and WebLink</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">Workflow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../components/index.html">The Components</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference Documents</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../create_framework/index.html">Create your own PHP Framework</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Symfony Framework Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../forms.html">Forms</a> &raquo;</li>
        
      <li>How to Embed a Collection of Forms</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/form/form_collections.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-embed-a-collection-of-forms">
<span id="index-0"></span><h1>How to Embed a Collection of Forms<a class="headerlink" href="#how-to-embed-a-collection-of-forms" title="Permalink to this headline">¶</a></h1>
<p>In this article, you’ll learn how to create a form that embeds a collection
of many other forms. This could be useful, for example, if you had a <code class="docutils literal notranslate"><span class="pre">Task</span></code>
class and you wanted to edit/create/remove many <code class="docutils literal notranslate"><span class="pre">Tag</span></code> objects related to
that Task, right inside the same form.</p>
<p>Let’s start by creating a <code class="docutils literal notranslate"><span class="pre">Task</span></code> entity:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Task.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\Common\Collections\ArrayCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\Common\Collections\Collection</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Task</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$description</span><span class="p">;</span>
    <span class="k">protected</span> <span class="nv">$tags</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tags</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ArrayCollection</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getDescription</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">description</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setDescription</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$description</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">description</span> <span class="o">=</span> <span class="nv">$description</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getTags</span><span class="p">()</span><span class="o">:</span> <span class="nx">Collection</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tags</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">ArrayCollection</span></code> is specific to Doctrine and is basically the
same as using an <code class="docutils literal notranslate"><span class="pre">array</span></code> (but it must be an <code class="docutils literal notranslate"><span class="pre">ArrayCollection</span></code> if
you’re using Doctrine).</p>
</div>
<p>Now, create a <code class="docutils literal notranslate"><span class="pre">Tag</span></code> class. As you saw above, a <code class="docutils literal notranslate"><span class="pre">Task</span></code> can have many <code class="docutils literal notranslate"><span class="pre">Tag</span></code>
objects:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Tag.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Tag</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$name</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getName</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setName</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$name</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then, create a form class so that a <code class="docutils literal notranslate"><span class="pre">Tag</span></code> object can be modified by the user:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Form/TagType.php</span>
<span class="k">namespace</span> <span class="nx">App\Form</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Entity\Tag</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Form\AbstractType</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Form\FormBuilderInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\OptionsResolver\OptionsResolver</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">TagType</span> <span class="k">extends</span> <span class="nx">AbstractType</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">buildForm</span><span class="p">(</span><span class="nx">FormBuilderInterface</span> <span class="nv">$builder</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">configureOptions</span><span class="p">(</span><span class="nx">OptionsResolver</span> <span class="nv">$resolver</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$resolver</span><span class="o">-&gt;</span><span class="na">setDefaults</span><span class="p">([</span>
            <span class="s1">&#39;data_class&#39;</span> <span class="o">=&gt;</span> <span class="nx">Tag</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Next, let’s create a form for the <code class="docutils literal notranslate"><span class="pre">Task</span></code> entity, using a
<a class="reference internal" href="../reference/forms/types/collection.html"><span class="doc">CollectionType</span></a> field of <code class="docutils literal notranslate"><span class="pre">TagType</span></code>
forms. This will allow us to modify all the <code class="docutils literal notranslate"><span class="pre">Tag</span></code> elements of a <code class="docutils literal notranslate"><span class="pre">Task</span></code> right
inside the task form itself:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Form/TaskType.php</span>
<span class="k">namespace</span> <span class="nx">App\Form</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Entity\Task</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Form\AbstractType</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Form\Extension\Core\Type\CollectionType</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Form\FormBuilderInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\OptionsResolver\OptionsResolver</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">TaskType</span> <span class="k">extends</span> <span class="nx">AbstractType</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">buildForm</span><span class="p">(</span><span class="nx">FormBuilderInterface</span> <span class="nv">$builder</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">);</span>

        <span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="nx">CollectionType</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;entry_type&#39;</span> <span class="o">=&gt;</span> <span class="nx">TagType</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
            <span class="s1">&#39;entry_options&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">],</span>
        <span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">configureOptions</span><span class="p">(</span><span class="nx">OptionsResolver</span> <span class="nv">$resolver</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$resolver</span><span class="o">-&gt;</span><span class="na">setDefaults</span><span class="p">([</span>
            <span class="s1">&#39;data_class&#39;</span> <span class="o">=&gt;</span> <span class="nx">Task</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In your controller, you’ll create a new form from the <code class="docutils literal notranslate"><span class="pre">TaskType</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/TaskController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Entity\Tag</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Entity\Task</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Form\TaskType</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">TaskController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">new</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span><span class="o">:</span> <span class="nx">Response</span>
    <span class="p">{</span>
        <span class="nv">$task</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Task</span><span class="p">();</span>

        <span class="c1">// dummy code - add some example tags to the task</span>
        <span class="c1">// (otherwise, the template will render an empty list of tags)</span>
        <span class="nv">$tag1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Tag</span><span class="p">();</span>
        <span class="nv">$tag1</span><span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">&#39;tag1&#39;</span><span class="p">);</span>
        <span class="nv">$task</span><span class="o">-&gt;</span><span class="na">getTags</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$tag1</span><span class="p">);</span>
        <span class="nv">$tag2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Tag</span><span class="p">();</span>
        <span class="nv">$tag2</span><span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">&#39;tag2&#39;</span><span class="p">);</span>
        <span class="nv">$task</span><span class="o">-&gt;</span><span class="na">getTags</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$tag2</span><span class="p">);</span>
        <span class="c1">// end dummy code</span>

        <span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createForm</span><span class="p">(</span><span class="nx">TaskType</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="nv">$task</span><span class="p">);</span>

        <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">handleRequest</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">isSubmitted</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">isValid</span><span class="p">())</span> <span class="p">{</span>
            <span class="c1">// ... do your form processing, like saving the Task and Tag entities</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;task/new.html.twig&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;form&#39;</span> <span class="o">=&gt;</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">createView</span><span class="p">(),</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the template, you can now iterate over the existing <code class="docutils literal notranslate"><span class="pre">TagType</span></code> forms
to render them:</p>
<div class="highlight-html+twig notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">{# templates/task/new.html.twig #}</span>

<span class="c">{# ... #}</span>

<span class="cp">{{</span> <span class="nv">form_start</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span>
    <span class="cp">{{</span> <span class="nv">form_row</span><span class="o">(</span><span class="nv">form.description</span><span class="o">)</span> <span class="cp">}}</span>

    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Tags<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tags&quot;</span><span class="p">&gt;</span>
        <span class="cp">{%</span> <span class="k">for</span> <span class="nv">tag</span> <span class="k">in</span> <span class="nv">form.tags</span> <span class="cp">%}</span>
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">form_row</span><span class="o">(</span><span class="nv">tag.name</span><span class="o">)</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{{</span> <span class="nv">form_end</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span>

<span class="c">{# ... #}</span>
</pre></div>
</td></tr></table></div>
<p>When the user submits the form, the submitted data for the <code class="docutils literal notranslate"><span class="pre">tags</span></code> field is
used to construct an <code class="docutils literal notranslate"><span class="pre">ArrayCollection</span></code> of <code class="docutils literal notranslate"><span class="pre">Tag</span></code> objects. The collection is
then set on the <code class="docutils literal notranslate"><span class="pre">tag</span></code> field of the <code class="docutils literal notranslate"><span class="pre">Task</span></code> and can be accessed via <code class="docutils literal notranslate"><span class="pre">$task-&gt;getTags()</span></code>.</p>
<p>So far, this works great, but only to edit <em>existing</em> tags. It doesn’t allow us
yet to add new tags or delete existing ones.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">You can embed nested collections as many levels down as you like. However,
if you use Xdebug, you may receive a <code class="docutils literal notranslate"><span class="pre">Maximum</span> <span class="pre">function</span> <span class="pre">nesting</span> <span class="pre">level</span> <span class="pre">of</span> <span class="pre">'100'</span>
<span class="pre">reached,</span> <span class="pre">aborting!</span></code> error. To fix this, increase the <code class="docutils literal notranslate"><span class="pre">xdebug.max_nesting_level</span></code>
PHP setting, or render each form field by hand using <code class="docutils literal notranslate"><span class="pre">form_row()</span></code> instead of
rendering the whole form at once (e.g <code class="docutils literal notranslate"><span class="pre">form_widget(form)</span></code>).</p>
</div>
<div class="section" id="allowing-new-tags-with-the-prototype">
<span id="form-collections-new-prototype"></span><h2>Allowing “new” Tags with the “Prototype”<a class="headerlink" href="#allowing-new-tags-with-the-prototype" title="Permalink to this headline">¶</a></h2>
<p>Previously you added two tags to your task in the controller. Now let the users
add as many tag forms as they need directly in the browser. This requires a bit
of JavaScript code.</p>
<p>But first, you need to let the form collection know that instead of exactly two,
it will receive an <em>unknown</em> number of tags. Otherwise, you’ll see a
<em>“This form should not contain extra fields”</em> error. This is done with the
<code class="docutils literal notranslate"><span class="pre">allow_add</span></code> option:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Form/TaskType.php</span>

<span class="c1">// ...</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">buildForm</span><span class="p">(</span><span class="nx">FormBuilderInterface</span> <span class="nv">$builder</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="nx">CollectionType</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="p">[</span>
        <span class="s1">&#39;entry_type&#39;</span> <span class="o">=&gt;</span> <span class="nx">TagType</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
        <span class="s1">&#39;entry_options&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">],</span>
        <span class="s1">&#39;allow_add&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">allow_add</span></code> option also makes a <code class="docutils literal notranslate"><span class="pre">prototype</span></code> variable available to you.
This “prototype” is a little “template” that contains all the HTML needed to
dynamically create any new “tag” forms with JavaScript. To render the prototype, add
the following <code class="docutils literal notranslate"><span class="pre">data-prototype</span></code> attribute to the existing <code class="docutils literal notranslate"><span class="pre">&lt;ul&gt;</span></code> in your template:</p>
<div class="highlight-html+twig notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tags&quot;</span> <span class="na">data-prototype</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">form_widget</span><span class="o">(</span><span class="nv">form.tags.vars.prototype</span><span class="o">)|</span><span class="nf">e</span><span class="o">(</span><span class="s1">&#39;html_attr&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Now add a button just next to the <code class="docutils literal notranslate"><span class="pre">&lt;ul&gt;</span></code> to dynamically add a new tag</p>
<div class="highlight-html+twig notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;add_item_link&quot;</span> <span class="na">data-collection-holder-class</span><span class="o">=</span><span class="s">&quot;tags&quot;</span><span class="p">&gt;</span>Add a tag<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>On the rendered page, the result will look something like this:</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tags&quot;</span> <span class="na">data-prototype</span><span class="o">=</span><span class="s">&quot;&amp;lt;div&amp;gt;&amp;lt;label class=&amp;quot; required&amp;quot;&amp;gt;__name__&amp;lt;/label&amp;gt;&amp;lt;div id=&amp;quot;task_tags___name__&amp;quot;&amp;gt;&amp;lt;div&amp;gt;&amp;lt;label for=&amp;quot;task_tags___name___name&amp;quot; class=&amp;quot; required&amp;quot;&amp;gt;Name&amp;lt;/label&amp;gt;&amp;lt;input type=&amp;quot;text&amp;quot; id=&amp;quot;task_tags___name___name&amp;quot; name=&amp;quot;task[tags][__name__][name]&amp;quot; required=&amp;quot;required&amp;quot; maxlength=&amp;quot;255&amp;quot; /&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&quot;</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">If you want to customize the HTML code in the prototype, see
<a class="reference internal" href="form_themes.html#form-custom-prototype"><span class="std std-ref">Fragment Naming for Collections</span></a>.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>The <code class="docutils literal notranslate"><span class="pre">form.tags.vars.prototype</span></code> is a form element that looks and feels just
like the individual <code class="docutils literal notranslate"><span class="pre">form_widget(tag)</span></code> elements inside your <code class="docutils literal notranslate"><span class="pre">for</span></code> loop.
This means that you can call <code class="docutils literal notranslate"><span class="pre">form_widget()</span></code>, <code class="docutils literal notranslate"><span class="pre">form_row()</span></code> or <code class="docutils literal notranslate"><span class="pre">form_label()</span></code>
on it. You could even choose to render only one of its fields (e.g. the
<code class="docutils literal notranslate"><span class="pre">name</span></code> field):</p>
<div class="last highlight-twig notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">form_widget</span><span class="o">(</span><span class="nv">form.tags.vars.prototype.name</span><span class="o">)|</span><span class="nf">e</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</td></tr></table></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you render your whole “tags” sub-form at once (e.g. <code class="docutils literal notranslate"><span class="pre">form_row(form.tags)</span></code>),
the <code class="docutils literal notranslate"><span class="pre">data-prototype</span></code> attribute is automatically added to the containing <code class="docutils literal notranslate"><span class="pre">div</span></code>,
and you need to adjust the following JavaScript accordingly.</p>
</div>
<p>The goal of this section will be to use JavaScript to read this attribute
and dynamically add new tag forms when the user clicks the “Add a tag” button.
This example uses jQuery and assumes you have it included somewhere on your page.</p>
<p>Add a <code class="docutils literal notranslate"><span class="pre">script</span></code> tag somewhere on your page so you can start writing some
JavaScript. In this script, bind to the “click” event of the “Add a tag”
button so you can add a new tag form (<code class="docutils literal notranslate"><span class="pre">addFormToCollection()</span></code> will be show next):</p>
<div class="highlight-javascript notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nx">jQuery</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Get the ul that holds the collection of tags</span>
    <span class="kd">var</span> <span class="nx">$tagsCollectionHolder</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;ul.tags&#39;</span><span class="p">);</span>
    <span class="c1">// count the current form inputs we have (e.g. 2), use that as the new</span>
    <span class="c1">// index when inserting a new item (e.g. 2)</span>
    <span class="nx">$tagsCollectionHolder</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="nx">$tagsCollectionHolder</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">).</span><span class="nx">length</span><span class="p">);</span>

    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="s1">&#39;.add_item_link&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">$collectionHolderClass</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;collectionHolderClass&#39;</span><span class="p">);</span>
        <span class="c1">// add a new tag form (see next code block)</span>
        <span class="nx">addFormToCollection</span><span class="p">(</span><span class="nx">$collectionHolderClass</span><span class="p">);</span>
    <span class="p">})</span>
<span class="p">});</span>
</pre></div>
</td></tr></table></div>
<p>The <code class="docutils literal notranslate"><span class="pre">addTagForm()</span></code> function’s job will be to use the <code class="docutils literal notranslate"><span class="pre">data-prototype</span></code> attribute
to dynamically add a new form when this link is clicked. The <code class="docutils literal notranslate"><span class="pre">data-prototype</span></code>
HTML contains the tag <code class="docutils literal notranslate"><span class="pre">text</span></code> input element with a name of <code class="docutils literal notranslate"><span class="pre">task[tags][__name__][name]</span></code>
and id of <code class="docutils literal notranslate"><span class="pre">task_tags___name___name</span></code>. The <code class="docutils literal notranslate"><span class="pre">__name__</span></code> is a little “placeholder”,
which you’ll replace with a unique, incrementing number (e.g. <code class="docutils literal notranslate"><span class="pre">task[tags][3][name]</span></code>).</p>
<p>The actual code needed to make this all work can vary quite a bit, but here’s
one example:</p>
<div class="highlight-javascript notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">addFormToCollection</span><span class="p">(</span><span class="nx">$collectionHolderClass</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Get the ul that holds the collection of tags</span>
    <span class="kd">var</span> <span class="nx">$collectionHolder</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">$collectionHolderClass</span><span class="p">);</span>

    <span class="c1">// Get the data-prototype explained earlier</span>
    <span class="kd">var</span> <span class="nx">prototype</span> <span class="o">=</span> <span class="nx">$collectionHolder</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;prototype&#39;</span><span class="p">);</span>

    <span class="c1">// get the new index</span>
    <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">$collectionHolder</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">newForm</span> <span class="o">=</span> <span class="nx">prototype</span><span class="p">;</span>
    <span class="c1">// You need this only if you didn&#39;t set &#39;label&#39; =&gt; false in your tags field in TaskType</span>
    <span class="c1">// Replace &#39;__name__label__&#39; in the prototype&#39;s HTML to</span>
    <span class="c1">// instead be a number based on how many items we have</span>
    <span class="c1">// newForm = newForm.replace(/__name__label__/g, index);</span>

    <span class="c1">// Replace &#39;__name__&#39; in the prototype&#39;s HTML to</span>
    <span class="c1">// instead be a number based on how many items we have</span>
    <span class="nx">newForm</span> <span class="o">=</span> <span class="nx">newForm</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/__name__/g</span><span class="p">,</span> <span class="nx">index</span><span class="p">);</span>

    <span class="c1">// increase the index with one for the next item</span>
    <span class="nx">$collectionHolder</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>

    <span class="c1">// Display the form in the page in an li, before the &quot;Add a tag&quot; link li</span>
    <span class="kd">var</span> <span class="nx">$newFormLi</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;li&gt;&lt;/li&gt;&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">newForm</span><span class="p">);</span>
    <span class="c1">// Add the new form at the end of the list</span>
    <span class="nx">$collectionHolder</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$newFormLi</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is better to separate your JavaScript in real JavaScript files than
to write it inside the HTML as is done here.</p>
</div>
<p>Now, each time a user clicks the <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">a</span> <span class="pre">tag</span></code> link, a new sub form will
appear on the page. When the form is submitted, any new tag forms will be converted
into new <code class="docutils literal notranslate"><span class="pre">Tag</span></code> objects and added to the <code class="docutils literal notranslate"><span class="pre">tags</span></code> property of the <code class="docutils literal notranslate"><span class="pre">Task</span></code> object.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">You can find a working example in this <a class="reference external" href="http://jsfiddle.net/847Kf/4/">JSFiddle</a>.</p>
</div>
<p>To make handling these new tags easier, add an “adder” and a “remover” method
for the tags in the <code class="docutils literal notranslate"><span class="pre">Task</span></code> class:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Task.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Task</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">addTag</span><span class="p">(</span><span class="nx">Tag</span> <span class="nv">$tag</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tags</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$tag</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">removeTag</span><span class="p">(</span><span class="nx">Tag</span> <span class="nv">$tag</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Next, add a <code class="docutils literal notranslate"><span class="pre">by_reference</span></code> option to the <code class="docutils literal notranslate"><span class="pre">tags</span></code> field and set it to <code class="docutils literal notranslate"><span class="pre">false</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Form/TaskType.php</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">buildForm</span><span class="p">(</span><span class="nx">FormBuilderInterface</span> <span class="nv">$builder</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="nx">CollectionType</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="p">[</span>
        <span class="c1">// ...</span>
        <span class="s1">&#39;by_reference&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With these two changes, when the form is submitted, each new <code class="docutils literal notranslate"><span class="pre">Tag</span></code> object
is added to the <code class="docutils literal notranslate"><span class="pre">Task</span></code> class by calling the <code class="docutils literal notranslate"><span class="pre">addTag()</span></code> method. Before this
change, they were added internally by the form by calling <code class="docutils literal notranslate"><span class="pre">$task-&gt;getTags()-&gt;add($tag)</span></code>.
That was fine, but forcing the use of the “adder” method makes handling
these new <code class="docutils literal notranslate"><span class="pre">Tag</span></code> objects easier (especially if you’re using Doctrine, which
you will learn about next!).</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">You have to create <strong>both</strong> <code class="docutils literal notranslate"><span class="pre">addTag()</span></code> and <code class="docutils literal notranslate"><span class="pre">removeTag()</span></code> methods,
otherwise the form will still use <code class="docutils literal notranslate"><span class="pre">setTag()</span></code> even if <code class="docutils literal notranslate"><span class="pre">by_reference</span></code> is <code class="docutils literal notranslate"><span class="pre">false</span></code>.
You’ll learn more about the <code class="docutils literal notranslate"><span class="pre">removeTag()</span></code> method later in this article.</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">Symfony can only make the plural-to-singular conversion (e.g. from the
<code class="docutils literal notranslate"><span class="pre">tags</span></code> property to the <code class="docutils literal notranslate"><span class="pre">addTag()</span></code> method) for English words. Code
written in any other language won’t work as expected.</p>
</div>
<div class="sidebar">
<p class="first sidebar-title">Doctrine: Cascading Relations and saving the “Inverse” side</p>
<p>To save the new tags with Doctrine, you need to consider a couple more
things. First, unless you iterate over all of the new <code class="docutils literal notranslate"><span class="pre">Tag</span></code> objects and
call <code class="docutils literal notranslate"><span class="pre">$entityManager-&gt;persist($tag)</span></code> on each, you’ll receive an error from
Doctrine:</p>
<blockquote>
<div>A new entity was found through the relationship
<code class="docutils literal notranslate"><span class="pre">App\Entity\Task#tags</span></code> that was not configured to
cascade persist operations for entity…</div></blockquote>
<p>To fix this, you may choose to “cascade” the persist operation automatically
from the <code class="docutils literal notranslate"><span class="pre">Task</span></code> object to any related tags. To do this, add the <code class="docutils literal notranslate"><span class="pre">cascade</span></code>
option to your <code class="docutils literal notranslate"><span class="pre">ManyToMany</span></code> metadata:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Task.php</span>

<span class="c1">// ...</span>

<span class="sd">/**</span>
<span class="sd"> * @ORM\ManyToMany(targetEntity=&quot;App\Entity\Tag&quot;, cascade={&quot;persist&quot;})</span>
<span class="sd"> */</span>
<span class="k">protected</span> <span class="nv">$tags</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/Resources/config/doctrine/Task.orm.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">App\Entity\Task</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">entity</span>
    <span class="c1"># ...</span>
    <span class="l l-Scalar l-Scalar-Plain">oneToMany</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">tags</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">targetEntity</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Entity\Tag</span>
            <span class="l l-Scalar l-Scalar-Plain">cascade</span><span class="p p-Indicator">:</span>      <span class="p p-Indicator">[</span><span class="nv">persist</span><span class="p p-Indicator">]</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- src/Resources/config/doctrine/Task.orm.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;doctrine-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://doctrine-project.org/schemas/orm/doctrine-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://doctrine-project.org/schemas/orm/doctrine-mapping</span>
<span class="s">                    https://doctrine-project.org/schemas/orm/doctrine-mapping.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;entity</span> <span class="na">name=</span><span class="s">&quot;App\Entity\Task&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- ... --&gt;</span>
        <span class="nt">&lt;one-to-many</span> <span class="na">field=</span><span class="s">&quot;tags&quot;</span> <span class="na">target-entity=</span><span class="s">&quot;Tag&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;cascade&gt;</span>
                <span class="nt">&lt;cascade-persist/&gt;</span>
            <span class="nt">&lt;/cascade&gt;</span>
        <span class="nt">&lt;/one-to-many&gt;</span>
    <span class="nt">&lt;/entity&gt;</span>
<span class="nt">&lt;/doctrine-mapping&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>A second potential issue deals with the <a class="reference external" href="https://www.doctrine-project.org/projects/doctrine-orm/en/current/reference/unitofwork-associations.html">Owning Side and Inverse Side</a>
of Doctrine relationships. In this example, if the “owning” side of the
relationship is “Task”, then persistence will work fine as the tags are
properly added to the Task. However, if the owning side is on “Tag”, then
you’ll need to do a little bit more work to ensure that the correct side
of the relationship is modified.</p>
<p>The trick is to make sure that the single “Task” is set on each “Tag”.
One way to do this is to add some extra logic to <code class="docutils literal notranslate"><span class="pre">addTag()</span></code>, which
is called by the form type since <code class="docutils literal notranslate"><span class="pre">by_reference</span></code> is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Task.php</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">addTag</span><span class="p">(</span><span class="nx">Tag</span> <span class="nv">$tag</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
<span class="p">{</span>
    <span class="c1">// for a many-to-many association:</span>
    <span class="nv">$tag</span><span class="o">-&gt;</span><span class="na">addTask</span><span class="p">(</span><span class="nv">$this</span><span class="p">);</span>

    <span class="c1">// for a many-to-one association:</span>
    <span class="nv">$tag</span><span class="o">-&gt;</span><span class="na">setTask</span><span class="p">(</span><span class="nv">$this</span><span class="p">);</span>

    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tags</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$tag</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you’re going for <code class="docutils literal notranslate"><span class="pre">addTask()</span></code>, make sure you have an appropriate method
that looks something like this:</p>
<div class="last highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Tag.php</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">addTask</span><span class="p">(</span><span class="nx">Task</span> <span class="nv">$task</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tasks</span><span class="o">-&gt;</span><span class="na">contains</span><span class="p">(</span><span class="nv">$task</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tasks</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$task</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="allowing-tags-to-be-removed">
<span id="form-collections-remove"></span><h2>Allowing Tags to be Removed<a class="headerlink" href="#allowing-tags-to-be-removed" title="Permalink to this headline">¶</a></h2>
<p>The next step is to allow the deletion of a particular item in the collection.
The solution is similar to allowing tags to be added.</p>
<p>Start by adding the <code class="docutils literal notranslate"><span class="pre">allow_delete</span></code> option in the form Type:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Form/TaskType.php</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">buildForm</span><span class="p">(</span><span class="nx">FormBuilderInterface</span> <span class="nv">$builder</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="nx">CollectionType</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="p">[</span>
        <span class="c1">// ...</span>
        <span class="s1">&#39;allow_delete&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now, you need to put some code into the <code class="docutils literal notranslate"><span class="pre">removeTag()</span></code> method of <code class="docutils literal notranslate"><span class="pre">Task</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Task.php</span>

<span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Task</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">removeTag</span><span class="p">(</span><span class="nx">Tag</span> <span class="nv">$tag</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tags</span><span class="o">-&gt;</span><span class="na">removeElement</span><span class="p">(</span><span class="nv">$tag</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="template-modifications">
<h3>Template Modifications<a class="headerlink" href="#template-modifications" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">allow_delete</span></code> option means that if an item of a collection
isn’t sent on submission, the related data is removed from the collection
on the server. In order for this to work in an HTML form, you must remove
the DOM element for the collection item to be removed, before submitting
the form.</p>
<p>First, add a “delete this tag” link to each tag form:</p>
<div class="highlight-javascript notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nx">jQuery</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Get the ul that holds the collection of tags</span>
    <span class="nx">$collectionHolder</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;ul.tags&#39;</span><span class="p">);</span>

    <span class="c1">// add a delete link to all of the existing tag form li elements</span>
    <span class="nx">$collectionHolder</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">addTagFormDeleteLink</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="c1">// ... the rest of the block from above</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">addTagForm</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="c1">// add a delete link to the new form</span>
    <span class="nx">addTagFormDeleteLink</span><span class="p">(</span><span class="nx">$newFormLi</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The <code class="docutils literal notranslate"><span class="pre">addTagFormDeleteLink()</span></code> function will look something like this:</p>
<div class="highlight-javascript notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">addTagFormDeleteLink</span><span class="p">(</span><span class="nx">$tagFormLi</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">$removeFormButton</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;button type=&quot;button&quot;&gt;Delete this tag&lt;/button&gt;&#39;</span><span class="p">);</span>
    <span class="nx">$tagFormLi</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$removeFormButton</span><span class="p">);</span>

    <span class="nx">$removeFormButton</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// remove the li for the tag form</span>
        <span class="nx">$tagFormLi</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>When a tag form is removed from the DOM and submitted, the removed <code class="docutils literal notranslate"><span class="pre">Tag</span></code> object
will not be included in the collection passed to <code class="docutils literal notranslate"><span class="pre">setTags()</span></code>. Depending on
your persistence layer, this may or may not be enough to actually remove
the relationship between the removed <code class="docutils literal notranslate"><span class="pre">Tag</span></code> and <code class="docutils literal notranslate"><span class="pre">Task</span></code> object.</p>
<div class="sidebar">
<p class="first sidebar-title">Doctrine: Ensuring the database persistence</p>
<p>When removing objects in this way, you may need to do a little bit more
work to ensure that the relationship between the <code class="docutils literal notranslate"><span class="pre">Task</span></code> and the removed
<code class="docutils literal notranslate"><span class="pre">Tag</span></code> is properly removed.</p>
<p>In Doctrine, you have two sides of the relationship: the owning side and the
inverse side. Normally in this case you’ll have a many-to-one relationship
and the deleted tags will disappear and persist correctly (adding new
tags also works effortlessly).</p>
<p>But if you have a one-to-many relationship or a many-to-many relationship with a
<code class="docutils literal notranslate"><span class="pre">mappedBy</span></code> on the Task entity (meaning Task is the “inverse” side),
you’ll need to do more work for the removed tags to persist correctly.</p>
<p>In this case, you can modify the controller to remove the relationship
on the removed tag. This assumes that you have some <code class="docutils literal notranslate"><span class="pre">edit()</span></code> action which
is handling the “update” of your Task:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/TaskController.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">App\Entity\Task</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\Common\Collections\ArrayCollection</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">TaskController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">edit</span><span class="p">(</span><span class="nv">$id</span><span class="p">,</span> <span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">EntityManagerInterface</span> <span class="nv">$entityManager</span><span class="p">)</span><span class="o">:</span> <span class="nx">Response</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">null</span> <span class="o">===</span> <span class="nv">$task</span> <span class="o">=</span> <span class="nv">$entityManager</span><span class="o">-&gt;</span><span class="na">getRepository</span><span class="p">(</span><span class="nx">Task</span><span class="o">::</span><span class="na">class</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createNotFoundException</span><span class="p">(</span><span class="s1">&#39;No task found for id &#39;</span><span class="o">.</span><span class="nv">$id</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$originalTags</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ArrayCollection</span><span class="p">();</span>

        <span class="c1">// Create an ArrayCollection of the current Tag objects in the database</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$task</span><span class="o">-&gt;</span><span class="na">getTags</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$tag</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$originalTags</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$tag</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$editForm</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createForm</span><span class="p">(</span><span class="nx">TaskType</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="nv">$task</span><span class="p">);</span>

        <span class="nv">$editForm</span><span class="o">-&gt;</span><span class="na">handleRequest</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$editForm</span><span class="o">-&gt;</span><span class="na">isSubmitted</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nv">$editForm</span><span class="o">-&gt;</span><span class="na">isValid</span><span class="p">())</span> <span class="p">{</span>
            <span class="c1">// remove the relationship between the tag and the Task</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="nv">$originalTags</span> <span class="k">as</span> <span class="nv">$tag</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">false</span> <span class="o">===</span> <span class="nv">$task</span><span class="o">-&gt;</span><span class="na">getTags</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">contains</span><span class="p">(</span><span class="nv">$tag</span><span class="p">))</span> <span class="p">{</span>
                    <span class="c1">// remove the Task from the Tag</span>
                    <span class="nv">$tag</span><span class="o">-&gt;</span><span class="na">getTasks</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">removeElement</span><span class="p">(</span><span class="nv">$task</span><span class="p">);</span>

                    <span class="c1">// if it was a many-to-one relationship, remove the relationship like this</span>
                    <span class="c1">// $tag-&gt;setTask(null);</span>

                    <span class="nv">$entityManager</span><span class="o">-&gt;</span><span class="na">persist</span><span class="p">(</span><span class="nv">$tag</span><span class="p">);</span>

                    <span class="c1">// if you wanted to delete the Tag entirely, you can also do that</span>
                    <span class="c1">// $entityManager-&gt;remove($tag);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="nv">$entityManager</span><span class="o">-&gt;</span><span class="na">persist</span><span class="p">(</span><span class="nv">$task</span><span class="p">);</span>
            <span class="nv">$entityManager</span><span class="o">-&gt;</span><span class="na">flush</span><span class="p">();</span>

            <span class="c1">// redirect back to some edit page</span>
            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirectToRoute</span><span class="p">(</span><span class="s1">&#39;task_edit&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">]);</span>
        <span class="p">}</span>

        <span class="c1">// ... render some form template</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="last">As you can see, adding and removing the elements correctly can be tricky.
Unless you have a many-to-many relationship where Task is the “owning” side,
you’ll need to do extra work to make sure that the relationship is properly
updated (whether you’re adding new tags or removing existing tags) on
each Tag object itself.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">The Symfony community has created some JavaScript packages that provide the
functionality needed to add, edit and delete elements of the collection.
Check out the <a class="reference external" href="https://github.com/a2lix/symfony-collection">&#64;a2lix/symfony-collection</a> package for modern browsers and
the <a class="reference external" href="https://github.com/ninsuo/symfony-collection">symfony-collection</a> package based on jQuery for the rest of browsers.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2004-2020 Fabien Potencier

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>