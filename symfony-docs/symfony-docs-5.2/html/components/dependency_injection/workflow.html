

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Container Building Workflow &mdash; Symfony Framework Documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/rtd_custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="The EventDispatcher Component" href="../event_dispatcher.html" />
    <link rel="prev" title="Compiling the Container" href="compilation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #f0f0f0" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/symfony-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                5.2}
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../quick_tour/index.html">The Quick Tour</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../best_practices.html">The Symfony Framework Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bundles.html">The Bundle System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cache.html">Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../console.html">Console Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doctrine.html">Databases and the Doctrine ORM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment.html">How to Deploy a Symfony Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../email.html">Swift Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../event_dispatcher.html">Events and Event Listeners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../forms.html">Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../frontend.html">Managing CSS and JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../http_cache.html">HTTP Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../http_client.html">HTTP Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lock.html">Dealing with Concurrency with Locks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mailer.html">Sending Emails with Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mercure.html">Pushing Data to Clients Using the Mercure Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../messenger.html">Messenger: Sync &amp; Queued Message Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration.html">Migrating an Existing Application to Symfony</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../notifier.html">Creating and Sending Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../performance.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../profiler.html">Profiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rate_limiter.html">Rate Limiter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../routing.html">Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../session.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../setup.html">Installing &amp; Setting up the Symfony Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../serializer.html">How to Use the Serializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../service_container.html">Service Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../translation.html">Translations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../validation.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web_link.html">Asset Preloading and Resource Hints with HTTP/2 and WebLink</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../workflow.html">Workflow</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">The Components</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../using_components.html">How to Install and Use the Symfony Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asset.html">The Asset Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../browser_kit.html">The BrowserKit Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cache.html">The Cache Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html">The Config Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../console.html">The Console Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contracts.html">The Contracts Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../css_selector.html">The CssSelector Component</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../dependency_injection.html">The DependencyInjection Component</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../dependency_injection.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dependency_injection.html#basic-usage">Basic Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dependency_injection.html#avoiding-your-code-becoming-dependent-on-the-container">Avoiding your Code Becoming Dependent on the Container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dependency_injection.html#setting-up-the-container-with-configuration-files">Setting up the Container with Configuration Files</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../dependency_injection.html#learn-more">Learn More</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="compilation.html">Compiling the Container</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Container Building Workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/alias_private.html">How to Create Service Aliases and Mark Services as Private</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/autowiring.html">Defining Services Dependencies Automatically (Autowiring)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/calls.html">Service Method Calls and Setter Injection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/compiler_passes.html">How to Work with Compiler Passes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/configurators.html">How to Configure a Service with a Configurator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/debug.html">How to Debug the Service Container &amp; List Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/definitions.html">How to work with Service Definition Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/expression_language.html">How to Inject Values Based on Complex Expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/factories.html">Using a Factory to Create Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/import.html">How to Import Configuration Files/Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/injection_types.html">Types of Injection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/lazy_services.html">Lazy Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/optional_dependencies.html">How to Make Service Arguments/References Optional</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/parent_services.html">How to Manage Common Dependencies with Parent Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/request.html">How to Retrieve the Request from the Service Container</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/service_decoration.html">How to Decorate Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/service_subscribers_locators.html">Service Subscribers &amp; Locators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/shared.html">How to Define Non Shared Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/synthetic_services.html">How to Inject Instances into the Container</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../service_container/tags.html">How to Work with Service Tags</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dom_crawler.html">The DomCrawler Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event_dispatcher.html">The EventDispatcher Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../expression_language.html">The ExpressionLanguage Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem.html">The Filesystem Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../finder.html">The Finder Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../form.html">The Form Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../http_foundation.html">The HttpFoundation Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../http_kernel.html">The HttpKernel Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inflector.html">The Inflector Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intl.html">The Intl Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ldap.html">The Ldap Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lock.html">The Lock Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../messenger.html">The Messenger Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mime.html">The Mime Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../options_resolver.html">The OptionsResolver Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../phpunit_bridge.html">The PHPUnit Bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">The Process Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../property_access.html">The PropertyAccess Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../property_info.html">The PropertyInfo Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../psr7.html">The PSR-7 Bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security.html">The Security Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../semaphore.html">The Semaphore Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serializer.html">The Serializer Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../string.html">The String Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../uid.html">The UID Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../validator.html">The Validator Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../var_dumper.html">The VarDumper Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../var_exporter.html">The VarExporter Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workflow.html">The Workflow Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yaml.html">The Yaml Component</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference Documents</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../create_framework/index.html">Create your own PHP Framework</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Symfony Framework Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">The Components</a> &raquo;</li>
        
          <li><a href="../dependency_injection.html">The DependencyInjection Component</a> &raquo;</li>
        
      <li>Container Building Workflow</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/components/dependency_injection/workflow.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="container-building-workflow">
<span id="index-0"></span><h1>Container Building Workflow<a class="headerlink" href="#container-building-workflow" title="Permalink to this headline">¶</a></h1>
<p>The location of the files and classes related to the Dependency Injection
component depends on the application, library or framework in which you want
to use the container. Looking at how the container is configured and built
in the Symfony full-stack Framework will help you see how this all fits together,
whether you are using the full-stack framework or looking to use the service
container in another application.</p>
<p>The full-stack framework uses the HttpKernel component to manage the loading
of the service container configuration from the application and bundles
and also handles the compilation and caching. Even if you are not using
HttpKernel, it should give you an idea of one way of organizing configuration
in a modular application.</p>
<div class="section" id="working-with-a-cached-container">
<h2>Working with a Cached Container<a class="headerlink" href="#working-with-a-cached-container" title="Permalink to this headline">¶</a></h2>
<p>Before building it, the kernel checks to see if a cached version of the
container exists. The HttpKernel has a debug setting and if this is false,
the cached version is used if it exists. If debug is true then the kernel
<a class="reference internal" href="../config/caching.html"><span class="doc">checks to see if configuration is fresh</span></a>
and if it is, the cached version of the container is used. If not then the
container is built from the application-level configuration and the bundles’s
extension configuration.</p>
<p>Read <a class="reference internal" href="compilation.html#components-dependency-injection-dumping"><span class="std std-ref">Dumping the Configuration for Performance</span></a>
for more details.</p>
</div>
<div class="section" id="application-level-configuration">
<h2>Application-level Configuration<a class="headerlink" href="#application-level-configuration" title="Permalink to this headline">¶</a></h2>
<p>Application level config is loaded from the <code class="docutils literal notranslate"><span class="pre">config</span></code> directory. Multiple
files are loaded which are then merged when the extensions are processed.
This allows for different configuration for different environments e.g.
dev, prod.</p>
<p>These files contain parameters and services that are loaded directly into
the container as per
<a class="reference internal" href="../dependency_injection.html#components-dependency-injection-loading-config"><span class="std std-ref">Setting Up the Container with Configuration Files</span></a>.
They also contain configuration that is processed by extensions as per
<a class="reference internal" href="compilation.html#components-dependency-injection-extension"><span class="std std-ref">Managing Configuration with Extensions</span></a>.
These are considered to be bundle configuration since each bundle contains
an Extension class.</p>
</div>
<div class="section" id="bundle-level-configuration-with-extensions">
<h2>Bundle-level Configuration with Extensions<a class="headerlink" href="#bundle-level-configuration-with-extensions" title="Permalink to this headline">¶</a></h2>
<p>By convention, each bundle contains an Extension class which is in the bundle’s
<code class="docutils literal notranslate"><span class="pre">DependencyInjection</span></code> directory. These are registered with the <code class="docutils literal notranslate"><span class="pre">ContainerBuilder</span></code>
when the kernel is booted. When the <code class="docutils literal notranslate"><span class="pre">ContainerBuilder</span></code> is
<a class="reference internal" href="compilation.html"><span class="doc">compiled</span></a>, the application-level
configuration relevant to the bundle’s extension is passed to the Extension
which also usually loads its own config file(s), typically from the bundle’s
<code class="docutils literal notranslate"><span class="pre">Resources/config</span></code> directory. The application-level config is usually
processed with a <a class="reference internal" href="../config/definition.html"><span class="doc">Configuration object</span></a>
also stored in the bundle’s <code class="docutils literal notranslate"><span class="pre">DependencyInjection</span></code> directory.</p>
</div>
<div class="section" id="compiler-passes-to-allow-interaction-between-bundles">
<h2>Compiler Passes to Allow Interaction between Bundles<a class="headerlink" href="#compiler-passes-to-allow-interaction-between-bundles" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="compilation.html#components-dependency-injection-compiler-passes"><span class="std std-ref">Compiler passes</span></a>
are used to allow interaction between different bundles as they cannot affect
each other’s configuration in the extension classes. One of the main uses
is to process tagged services, allowing bundles to register services to
be picked up by other bundles, such as Monolog loggers, Twig extensions
and Data Collectors for the Web Profiler. Compiler passes are usually placed
in the bundle’s <code class="docutils literal notranslate"><span class="pre">DependencyInjection/Compiler</span></code> directory.</p>
</div>
<div class="section" id="compilation-and-caching">
<h2>Compilation and Caching<a class="headerlink" href="#compilation-and-caching" title="Permalink to this headline">¶</a></h2>
<p>After the compilation process has loaded the services from the configuration,
extensions and the compiler passes, it is dumped so that the cache can be
used next time. The dumped version is then used during subsequent requests
as it is more efficient.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2004-2020 Fabien Potencier

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>